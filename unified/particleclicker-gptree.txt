# Project Directory Structure:
.
├── css/
│   └── style.css
├── js/
│   ├── external/
│   │   ├── canvas2svg.js
│   │   ├── fastclick.js
│   │   ├── jquery.cookie-1.4.1.min.js
│   │   └── retina.js
│   ├── analytics.js
│   ├── app.js
│   ├── detector.js
│   ├── event.js
│   ├── game.js
│   ├── gameobjects.js
│   ├── helpers.js
│   ├── histogram.js
│   ├── storage.js
│   └── ui.js
├── json/
│   ├── achievements.json
│   ├── research.json
│   ├── upgrades.json
│   └── workers.json
├── LICENSE
├── README.md
├── bootstrap-config.json
└── index.html

# BEGIN FILE CONTENTS
# File: css/style.css

  1 | body {
  2 |   padding-top: 40px;
  3 | }
  4 | 
  5 | * {
  6 |   border-radius: 0 !important;
  7 | }
  8 | 
  9 | a, button {
 10 |   transition:all 0.2s;
 11 |   -webkit-transition:all 0.2s; }
 12 | }
 13 | 
 14 | h1 br {
 15 |   display: none;
 16 | }
 17 | 
 18 | .pc-icon {
 19 |   background: url('../assets/pc32sw.png') no-repeat 10px center;
 20 |   padding-left: 50px;
 21 | }
 22 | 
 23 | .pc-icon:hover {
 24 |   background-image: url('../assets/pc32.png');
 25 | }
 26 | 
 27 | #detector {
 28 |   cursor: pointer;
 29 |   margin: 0 auto;
 30 |   position: relative;
 31 | }
 32 | 
 33 | #detector canvas {
 34 |   position: absolute;
 35 |   left: 0;
 36 |   top: 0;
 37 | }
 38 | 
 39 | #detector-core {
 40 |    z-index: 0;
 41 | }
 42 | 
 43 | #detector-events {
 44 |    z-index: 1;
 45 | }
 46 | 
 47 | #detector-info {
 48 |   z-index: 10;
 49 |   position: absolute;
 50 | }
 51 | 
 52 | .scrollable {
 53 |   overflow: auto;
 54 | }
 55 | 
 56 | .research-icon {
 57 |   float: left;
 58 |   margin-right: 10px;
 59 | }
 60 | 
 61 | #achievements-container {
 62 |   position: fixed; bottom: 0px; left: 0px;
 63 | }
 64 | 
 65 | #messages-container {
 66 |   position: fixed; bottom: 0px; right: 0px;
 67 | }
 68 | 
 69 | #achievements-container .alert,
 70 | #messages-container .alert {
 71 |   margin-bottom: 10px; position: relative;
 72 | }
 73 | 
 74 | #achievements-container .alert-glyph,
 75 | #messages-container .alert-glyph {
 76 |   float:left; font-size: 20px; margin-right: 10px;
 77 | }
 78 | 
 79 | #achievements-container .alert-text,
 80 | #messages-container .alert-text {
 81 |   font-size: 14px;
 82 | }
 83 | 
 84 | #achievements-container .alert-text {
 85 |   font-weight: bold;
 86 | }
 87 | 
 88 | #messages-container .btn {
 89 |   float:right; font-weight: bold;
 90 | }
 91 | 
 92 | #mobile-orientation-container {
 93 |   position: fixed; top: 0; bottom: 0; left: 0; right: 0;
 94 |   background: #fff;
 95 |   display: none;
 96 |   padding-top: 50%;
 97 |   z-index: 100;
 98 | }
 99 | 
100 | #mobile-orientation-message {
101 |   text-align: center;
102 |   margin: auto auto;
103 |   color: #777;
104 |   font-size: 18px;
105 |   padding: 15px;
106 | }
107 | 
108 | .status strong {
109 |   color: #666;
110 | }
111 | 
112 | .update-value {
113 |   position: absolute;
114 |   right: 1em;
115 |   top: 1.42857em;
116 |   height: 1.42857em;
117 | }
118 | 
119 | .update-plus {
120 |   color: green;
121 |   float: left;
122 |   right: 5px;
123 |   position: absolute;
124 | }
125 | 
126 | .update-minus {
127 |   color: red;
128 |   float: left;
129 |   right: 5px;
130 |   position: absolute;
131 | }
132 | 
133 | #labname {
134 |   border: 0px;
135 |   padding: 0 4px;
136 |   margin-top: 20px;
137 |   font-weight: 500;
138 |   line-height: 1;
139 |   width: 99%;
140 | }
141 | 
142 | .panel {
143 |   margin-bottom: 0;
144 | }
145 | 
146 | .media-list-no-margin {
147 |   margin-top: -15px;
148 | }
149 | 
150 | .col-no-padding {
151 |   padding-right: 0;
152 |   padding-left: 0;
153 | }
154 | 
155 | .tab-content {
156 |   border-left:1px solid #ddd;
157 | }
158 | 
159 | .tab-pane.scrollable {
160 |   padding:15px;
161 | }
162 | 
163 | 
164 | .prevent-select {
165 |   -webkit-touch-callout: none;
166 |   -webkit-user-select: none;
167 |   -khtml-user-select: none;
168 |   -moz-user-select: none;
169 |   -ms-user-select: none;
170 |   user-select: none;
171 | }
172 | 
173 | [ng\:cloak], [ng-cloak], .ng-cloak {
174 |   display: none !important;
175 | }
176 | 
177 | 
178 | /** Annoying blink effect to get user's attention. */
179 | .blink {
180 |   animation: blinker 1.0s cubic-bezier(.5, 0, 1, 1) infinite alternate;
181 |   -webkit-animation: blinker 1.0s cubic-bezier(.5, 0, 1, 1) infinite alternate;
182 | }
183 | 
184 | @keyframes blinker {
185 |   from { opacity: 1; }
186 |   to { opacity: 0.25; }
187 | }
188 | 
189 | @-webkit-keyframes blinker {
190 |   from { opacity: 1; }
191 |   to {
192 |     opacity: 0.25;
193 |     background: #f00;
194 |     border-color: #900;
195 |   }
196 | }
197 | 
198 | /** Responsive **/
199 | @media screen and (orientation:portrait) and (max-width: 767px) {
200 |   #mobile-orientation-container {
201 |     display: block;
202 |   }
203 | }
204 | 
205 | @media screen and (orientation:landscape) and (max-width: 767px) {
206 |   
207 | }
208 | 
209 | @media screen and (min-width: 768px) {
210 |   #detector-holder {
211 |     margin-left: -15px;
212 |     margin-right: -15px;
213 |   }
214 | 
215 |   .status {
216 |     font-size: 18px;
217 |   }
218 | 
219 |   #labname {
220 |     font-size: 22px;
221 |   }
222 | 
223 |   #detector-info {
224 |     top: 85px; right: 15px;
225 |   }
226 | }
227 | 
228 | @media screen and (min-width: 992px) {
229 |   .panel-stick,
230 |   .panel-stick .panel-heading,
231 |   .panel-stick .panel-body {
232 |     border-right: 0;
233 |   }
234 | 
235 |   .status {
236 |     font-size: 20px;
237 |   }
238 | 
239 |   #labname {
240 |     font-size: 24px;
241 |   }
242 | }
243 | 
244 | @media screen and (min-width: 1200px) {
245 |   .status {
246 |     font-size: 24px;
247 |   }
248 | }
249 | 
250 | @media screen and (min-width: 992px) and (max-width: 1199px){
251 |   .col-md-3s {
252 |     width:20%;
253 |   }
254 | 
255 |   .col-md-5s {
256 |     width:40%;
257 |   }
258 | }
259 | 
260 | @media screen and (max-width: 767px) {
261 |   h4 {
262 |     font-size: 16px;
263 |   }
264 | 
265 |   .col-no-padding-xs {
266 |     padding-right: 0;
267 |     padding-left: 0;
268 |   }
269 | 
270 |   .col-no-padding-xs .row {
271 |     margin-left: 0;
272 |     margin-right: 0;
273 |   }
274 | 
275 |   .status .col-xs-4 {
276 |     min-width: 75px;
277 |   }
278 | 
279 |   #detector-info {
280 |     top: 15px; right: 15px;
281 |   }
282 | }
283 | 
284 | /* Retina support */
285 | @media only screen and (-webkit-min-device-pixel-ratio: 1.5),
286 |     only screen and (min-resolution: 1.5dppx),
287 |     only screen and (min-resolution: 144dpi)
288 | {
289 |   .pc-icon {
290 |     background-image: url('../assets/pc32sw@2x.png');
291 |     background-size: 32px 32px;
292 |   }
293 | 
294 |   .pc-icon:hover {
295 |     background-image: url('../assets/pc32@2x.png');
296 |   }
297 | }

# File: js/external/canvas2svg.js

  1 | /*!!
  2 |  *  Canvas 2 Svg v1.0.6
  3 |  *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
  4 |  *
  5 |  *  Licensed under the MIT license:
  6 |  *  http://www.opensource.org/licenses/mit-license.php
  7 |  *
  8 |  *  Author:
  9 |  *  Kerry Liu
 10 |  *
 11 |  *  Copyright (c) 2014 Gliffy Inc.
 12 |  */
 13 | 
 14 | ;(function() {
 15 |     "use strict";
 16 | 
 17 |     var STYLES, ctx, CanvasGradient, CanvasPattern, namedEntities;
 18 | 
 19 |     //helper function to format a string
 20 |     function format(str, args) {
 21 |         var keys = Object.keys(args), i;
 22 |         for (i=0; i<keys.length; i++) {
 23 |             str = str.replace(new RegExp("\\{" + keys[i] + "\\}", "gi"), args[keys[i]]);
 24 |         }
 25 |         return str;
 26 |     }
 27 | 
 28 |     //helper function that generates a random string
 29 |     function randomString(holder) {
 30 |         var chars, randomstring, i;
 31 |         if (!holder) {
 32 |             throw new Error("cannot create a random attribute name for an undefined object");
 33 |         }
 34 |         chars = "ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
 35 |         randomstring = "";
 36 |         do {
 37 |             randomstring = "";
 38 |             for (i = 0; i < 12; i++) {
 39 |                 randomstring += chars[Math.floor(Math.random() * chars.length)];
 40 |             }
 41 |         } while (holder[randomstring]);
 42 |         return randomstring;
 43 |     }
 44 | 
 45 |     //helper function to map named to numbered entities
 46 |     function createNamedToNumberedLookup(items, radix) {
 47 |         var i, entity, lookup = {}, base10, base16;
 48 |         items = items.split(',');
 49 |         radix = radix || 10;
 50 |         // Map from named to numbered entities.
 51 |         for (i = 0; i < items.length; i += 2) {
 52 |             entity = '&' + items[i + 1] + ';';
 53 |             base10 = parseInt(items[i], radix);
 54 |             lookup[entity] = '&#'+base10+';';
 55 |         }
 56 |         //FF and IE need to create a regex from hex values ie &nbsp; == \xa0
 57 |         lookup["\\xa0"] = '&#160;';
 58 |         return lookup;
 59 |     }
 60 |     
 61 |     //helper function to map canvas-textAlign to svg-textAnchor
 62 |     function getTextAnchor(textAlign) {
 63 |         //TODO: support rtl languages
 64 |         var mapping = {"left":"start", "right":"end", "center":"middle", "start":"start", "end":"end"};
 65 |         return mapping[textAlign] || mapping.start;
 66 |     }
 67 |     
 68 |     //helper function to map canvas-textBaseline to svg-dominantBaseline
 69 |     function getDominantBaseline(textBaseline) {
 70 |         //INFO: not supported in all browsers
 71 |         var mapping = {"alphabetic": "alphabetic", "hanging": "hanging", "top":"text-before-edge", "bottom":"text-after-edge", "middle":"central"};
 72 |         return mapping[textBaseline] || mapping.alphabetic;
 73 |     }
 74 | 
 75 |     // Unpack entities lookup where the numbers are in radix 32 to reduce the size
 76 |     // entity mapping courtesy of tinymce
 77 |     namedEntities = createNamedToNumberedLookup(
 78 |         '50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' +
 79 |             '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' +
 80 |             '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' +
 81 |             '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' +
 82 |             '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' +
 83 |             '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' +
 84 |             '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' +
 85 |             '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' +
 86 |             '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' +
 87 |             '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' +
 88 |             'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' +
 89 |             'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' +
 90 |             't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' +
 91 |             'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' +
 92 |             'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' +
 93 |             '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' +
 94 |             '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' +
 95 |             '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' +
 96 |             '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' +
 97 |             '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' +
 98 |             'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' +
 99 |             'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' +
100 |             'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' +
101 |             '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' +
102 |             '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);
103 | 
104 | 
105 |     //Some basic mappings for attributes and default values.
106 |     STYLES = {
107 |         "strokeStyle":{
108 |             svgAttr : "stroke", //corresponding svg attribute
109 |             canvas : "#000000", //canvas default
110 |             svg : "none",       //svg default
111 |             apply : "stroke"    //apply on stroke() or fill()
112 |         },
113 |         "fillStyle":{
114 |             svgAttr : "fill",
115 |             canvas : "#000000",
116 |             svg : null, //svg default is black, but we need to special case this to handle canvas stroke without fill
117 |             apply : "fill"
118 |         },
119 |         "lineCap":{
120 |             svgAttr : "stroke-linecap",
121 |             canvas : "butt",
122 |             svg : "butt",
123 |             apply : "stroke"
124 |         },
125 |         "lineJoin":{
126 |             svgAttr : "stroke-linejoin",
127 |             canvas : "miter",
128 |             svg : "miter",
129 |             apply : "stroke"
130 |         },
131 |         "miterLimit":{
132 |             svgAttr : "stroke-miterlimit",
133 |             canvas : 10,
134 |             svg : 4,
135 |             apply : "stroke"
136 |         },
137 |         "lineWidth":{
138 |             svgAttr : "stroke-width",
139 |             canvas : 1,
140 |             svg : 1,
141 |             apply : "stroke"
142 |         },
143 |         "globalAlpha": {
144 |             svgAttr : "opacity",
145 |             canvas : 1,
146 |             svg : 1,
147 |             apply : "fill stroke"
148 |         },
149 |         "font":{
150 |             //font converts to multiple svg attributes, there is custom logic for this
151 |             canvas : "10px sans-serif"
152 |         },
153 |         "shadowColor":{
154 |             canvas : "#000000"
155 |         },
156 |         "shadowOffsetX":{
157 |             canvas : 0
158 |         },
159 |         "shadowOffsetY":{
160 |             canvas : 0
161 |         },
162 |         "shadowBlur":{
163 |             canvas : 0
164 |         },
165 |         "textAlign":{
166 |             canvas : "start"
167 |         },
168 |         "textBaseline":{
169 |             canvas : "alphabetic"
170 |         }
171 |     };
172 | 
173 |     /**
174 |      *
175 |      * @param gradientNode - reference to the gradient
176 |      * @constructor
177 |      */
178 |     CanvasGradient = function(gradientNode) {
179 |         this.__root = gradientNode;
180 |     };
181 | 
182 |     /**
183 |      * Adds a color stop to the gradient root
184 |      */
185 |     CanvasGradient.prototype.addColorStop = function(offset, color) {
186 |         var stop = document.createElementNS("http://www.w3.org/2000/svg", "stop"), regex, matches;
187 |         stop.setAttribute("offset", offset);
188 |         if(color.indexOf("rgba") !== -1) {
189 |             //separate alpha value, since webkit can't handle it
190 |             regex = /rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi;
191 |             matches = regex.exec(color);
192 |             stop.setAttribute("stop-color", format("rgb({r},{g},{b})", {r:matches[1], g:matches[2], b:matches[3]}));
193 |             stop.setAttribute("stop-opacity", matches[4]);
194 |         } else {
195 |             stop.setAttribute("stop-color", color);
196 |         }
197 |         this.__root.appendChild(stop);
198 |     };
199 | 
200 |     CanvasPattern = function(pattern, ctx) {
201 |         this.__root = pattern;
202 |         this.__ctx = ctx;
203 |     };
204 | 
205 |     /**
206 |      * The mock canvas context
207 |      * @param o - options include:
208 |      * width - width of your canvas (defaults to 500)
209 |      * height - height of your canvas (defaults to 500)
210 |      * enableMirroring - enables canvas mirroring (get image data) (defaults to false)
211 |      */
212 |     ctx = function(o) {
213 | 
214 |         var defaultOptions = { width:500, height:500, enableMirroring : false }, options;
215 | 
216 |         //keep support for this way of calling C2S: new C2S(width,height)
217 |         if(arguments.length > 1) {
218 |             options = defaultOptions;
219 |             options.width = arguments[0];
220 |             options.height = arguments[1];
221 |         } else if( !o ) {
222 |             options = defaultOptions;
223 |         } else {
224 |             options = o;
225 |         }
226 | 
227 |         if(!(this instanceof ctx)) {
228 |             //did someone call this without new?
229 |             return new ctx(options);
230 |         }
231 | 
232 |         //setup options
233 |         this.width = options.width || defaultOptions.width;
234 |         this.height = options.height || defaultOptions.height;
235 |         this.enableMirroring = options.enableMirroring !== undefined ? options.enableMirroring : defaultOptions.enableMirroring;
236 | 
237 |         this.canvas = this;   ///point back to this instance!
238 |         this.__canvas = document.createElement("canvas");
239 |         this.__ctx = this.__canvas.getContext("2d");
240 | 
241 |         this.__setDefaultStyles();
242 |         this.__stack = [this.__getStyleState()];
243 |         this.__groupStack = [];
244 | 
245 |         //the root svg element
246 |         this.__root = document.createElementNS("http://www.w3.org/2000/svg", "svg");
247 |         this.__root.setAttribute("version", 1.1);
248 |         this.__root.setAttribute("xmlns", "http://www.w3.org/2000/svg");
249 |         this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
250 |         this.__root.setAttribute("width", this.width);
251 |         this.__root.setAttribute("height", this.height);
252 | 
253 |         //make sure we don't generate the same ids in defs
254 |         this.__ids = {};
255 | 
256 |         //defs tag
257 |         this.__defs = document.createElementNS("http://www.w3.org/2000/svg", "defs");
258 |         this.__root.appendChild(this.__defs);
259 | 
260 |         //also add a group child. the svg element can't use the transform attribute
261 |         this.__currentElement = document.createElementNS("http://www.w3.org/2000/svg", "g");
262 |         this.__root.appendChild(this.__currentElement);
263 | 
264 |     };
265 | 
266 |     /**
267 |      * Creates the specified svg element
268 |      * @private
269 |      */
270 |     ctx.prototype.__createElement = function(elementName, properties, resetFill) {
271 |         var element = document.createElementNS("http://www.w3.org/2000/svg", elementName),
272 |             keys = Object.keys(properties), i, key;
273 |         if(resetFill) {
274 |             //if fill or stroke is not specified, the svg element should not display. By default SVG's fill is black.
275 |             element.setAttribute("fill", "none");
276 |             element.setAttribute("stroke", "none");
277 |         }
278 |         for(i=0; i<keys.length; i++) {
279 |             key = keys[i];
280 |             element.setAttribute(key, properties[key]);
281 |         }
282 |         return element;
283 |     };
284 | 
285 |     /**
286 |      * Applies default canvas styles to the context
287 |      * @private
288 |      */
289 |     ctx.prototype.__setDefaultStyles = function() {
290 |         //default 2d canvas context properties see:http://www.w3.org/TR/2dcontext/
291 |         var keys = Object.keys(STYLES), i, key;
292 |         for(i=0; i<keys.length; i++) {
293 |             key = keys[i];
294 |             this[key] = STYLES[key].canvas;
295 |         }
296 |     };
297 | 
298 |     /**
299 |      * Applies styles on restore
300 |      * @param styleState
301 |      * @private
302 |      */
303 |     ctx.prototype.__applyStyleState = function(styleState) {
304 |         var keys = Object.keys(styleState), i, key;
305 |         for(i=0; i<keys.length; i++) {
306 |             key = keys[i];
307 |             this[key] = styleState[key];
308 |         }
309 |     };
310 | 
311 |     /**
312 |      * Gets the current style state
313 |      * @return {Object}
314 |      * @private
315 |      */
316 |     ctx.prototype.__getStyleState = function() {
317 |         var i, styleState = {}, keys = Object.keys(STYLES), key;
318 |         for(i=0; i<keys.length; i++) {
319 |             key = keys[i];
320 |             styleState[key] = this[key];
321 |         }
322 |         return styleState;
323 |     };
324 | 
325 |     /**
326 |      * Apples the current styles to the current SVG element. On "ctx.fill" or "ctx.stroke"
327 |      * @param type
328 |      * @private
329 |      */
330 |     ctx.prototype.__applyStyleToCurrentElement = function(type) {
331 |         var keys = Object.keys(STYLES), i, style, value, id, regex, matches;
332 |         for(i=0; i<keys.length; i++) {
333 |             style = STYLES[keys[i]];
334 |             value = this[keys[i]];
335 |             if(style.apply) {
336 |                 //is this a gradient or pattern?
337 |                 if(style.apply.indexOf("fill")!==-1 && value instanceof CanvasPattern) {
338 |                     //pattern
339 |                     if(value.__ctx) {
340 |                         //copy over defs
341 |                         while(value.__ctx.__defs.childNodes.length) {
342 |                             id = value.__ctx.__defs.childNodes[0].getAttribute("id");
343 |                             this.__ids[id] = id;
344 |                             this.__defs.appendChild(value.__ctx.__defs.childNodes[0]);
345 |                         }
346 |                     }
347 |                     this.__currentElement.setAttribute("fill", format("url(#{id})", {id:value.__root.getAttribute("id")}));
348 |                 }
349 |                 else if(style.apply.indexOf("fill")!==-1 && value instanceof CanvasGradient) {
350 |                     //gradient
351 |                     this.__currentElement.setAttribute("fill", format("url(#{id})", {id:value.__root.getAttribute("id")}));
352 |                 } else if(style.apply.indexOf(type)!==-1 && style.svg !== value) {
353 |                     if((style.svgAttr === "stroke" || style.svgAttr === "fill") && value.indexOf("rgba") !== -1) {
354 |                         //separate alpha value, since illustrator can't handle it
355 |                         regex = /rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi;
356 |                         matches = regex.exec(value);
357 |                         this.__currentElement.setAttribute(style.svgAttr, format("rgb({r},{g},{b})", {r:matches[1], g:matches[2], b:matches[3]}));
358 |                         this.__currentElement.setAttribute(style.svgAttr+"-opacity", matches[4]);
359 |                     } else {
360 |                         //otherwise only update attribute if right type, and not svg default
361 |                         this.__currentElement.setAttribute(style.svgAttr, value);
362 |                     }
363 |                 }
364 |             }
365 |         }
366 | 
367 |     };
368 | 
369 |     /**
370 |      * Will return the closest group or svg node. May return the current element.
371 |      * @private
372 |      */
373 |     ctx.prototype.__closestGroupOrSvg = function(node) {
374 |         node = node || this.__currentElement;
375 |         if(node.nodeName === "g" || node.nodeName === "svg") {
376 |             return node;
377 |         } else {
378 |             return this.__closestGroupOrSvg(node.parentNode);
379 |         }
380 |     };
381 | 
382 |     /**
383 |      * Returns the serialized value of the svg so far
384 |      * @param fixNamedEntities - Standalone SVG doesn't support named entities, which document.createTextNode encodes.
385 |      *                           If true, we attempt to find all named entities and encode it as a numeric entity.
386 |      * @return serialized svg
387 |      */
388 |     ctx.prototype.getSerializedSvg = function(fixNamedEntities) {
389 |         var serialized = new XMLSerializer().serializeToString(this.__root),
390 |             keys, i, key, value, regexp, xmlns;
391 | 
392 |         //IE search for a duplicate xmnls because they didn't implement setAttributeNS correctly
393 |         xmlns = /xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi;
394 |         if(xmlns.test(serialized)) {
395 |             serialized = serialized.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink');
396 |         }
397 | 
398 |         if(fixNamedEntities) {
399 |             keys = Object.keys(namedEntities);
400 |             //loop over each named entity and replace with the proper equivalent.
401 |             for(i=0; i<keys.length; i++) {
402 |                 key = keys[i];
403 |                 value = namedEntities[key];
404 |                 regexp = new RegExp(key, "gi");
405 |                 if(regexp.test(serialized)) {
406 |                     serialized = serialized.replace(regexp, value);
407 |                 }
408 |             }
409 |         }
410 | 
411 |         return serialized;
412 |     };
413 | 
414 | 
415 |     /**
416 |      * Returns the root svg
417 |      * @return
418 |      */
419 |     ctx.prototype.getSvg = function() {
420 |         return this.__root;
421 |     };
422 |     /**
423 |      * Will generate a group tag.
424 |      */
425 |     ctx.prototype.save = function() {
426 |         var group = document.createElementNS("http://www.w3.org/2000/svg", "g"), parent = this.__closestGroupOrSvg();
427 |         this.__groupStack.push(parent);
428 |         parent.appendChild(group);
429 |         this.__currentElement = group;
430 |         this.__stack.push(this.__getStyleState());
431 |     };
432 |     /**
433 |      * Sets current element to parent, or just root if already root
434 |      */
435 |     ctx.prototype.restore = function(){
436 |         this.__currentElement = this.__groupStack.pop();
437 |         var state = this.__stack.pop();
438 |         this.__applyStyleState(state);
439 | 
440 |     };
441 | 
442 |     /**
443 |      * Helper method to add transform
444 |      * @private
445 |      */
446 |     ctx.prototype.__addTransform = function(t) {
447 |         var transform = this.__currentElement.getAttribute("transform");
448 |         if(transform) {
449 |             transform += " ";
450 |         } else {
451 |             transform = "";
452 |         }
453 |         transform += t;
454 |         this.__currentElement.setAttribute("transform", transform);
455 |     };
456 | 
457 |     /**
458 |      *  scales the current element
459 |      */
460 |     ctx.prototype.scale = function(x, y) {
461 |         if(y === undefined) {
462 |             y = x;
463 |         }
464 |         this.__addTransform(format("scale({x},{y})", {x:x, y:y}));
465 |     };
466 | 
467 |     /**
468 |      * rotates the current element
469 |      */
470 |     ctx.prototype.rotate = function(angle){
471 |         var degrees = (angle * 180 / Math.PI);
472 |         this.__addTransform(format("rotate({angle},{cx},{cy})", {angle:degrees, cx:0, cy:0}));
473 |     };
474 | 
475 |     /**
476 |      * translates the current element
477 |      */
478 |     ctx.prototype.translate = function(x, y){
479 |         this.__addTransform(format("translate({x},{y})", {x:x,y:y}));
480 |     };
481 | 
482 |     /**
483 |      * applies a transform to the current element
484 |      */
485 |     ctx.prototype.transform = function(a, b, c, d, e, f){
486 |         this.__addTransform(format("matrix({a},{b},{c},{d},{e},{f})", {a:a, b:b, c:c, d:d, e:e, f:f}));
487 |     };
488 | 
489 |     /**
490 |      * Create a new Path Element
491 |      */
492 |     ctx.prototype.beginPath = function(){
493 |         var path, parent;
494 |         path = this.__createElement("path", {}, true);
495 |         parent = this.__closestGroupOrSvg();
496 |         parent.appendChild(path);
497 |         this.__currentElement = path;
498 |     };
499 | 
500 |     /**
501 |      * Helper function to add path command
502 |      * @private
503 |      */
504 |     ctx.prototype.__addPathCommand = function(command){
505 |         if(this.__currentElement.nodeName === "path") {
506 |             var d = this.__currentElement.getAttribute("d");
507 |             if(d) {
508 |                 d += " ";
509 |             } else {
510 |                 d = "";
511 |             }
512 |             d += command;
513 |             this.__currentElement.setAttribute("d", d);
514 |         } else {
515 |             throw new Error("Attempted to add path command to node " + this.__currentElement.nodeName);
516 |         }
517 |     };
518 | 
519 |     /**
520 |      * Adds the move command to the current path element,
521 |      * if the currentPathElement is not empty create a new path element
522 |      */
523 |     ctx.prototype.moveTo = function(x,y){
524 |         if(this.__currentElement.nodeName !== "path") {
525 |             this.beginPath();
526 |         }
527 |         this.__addPathCommand(format("M {x} {y}", {x:x, y:y}));
528 |     };
529 | 
530 |     /**
531 |      * Closes the current path
532 |      */
533 |     ctx.prototype.closePath = function(){
534 |         this.__addPathCommand("Z");
535 |     };
536 | 
537 |     /**
538 |      * Adds a line to command
539 |      */
540 |     ctx.prototype.lineTo = function(x, y){
541 |         this.__addPathCommand(format("L {x} {y}", {x:x, y:y}));
542 |     };
543 | 
544 |     /**
545 |      * Add a bezier command
546 |      */
547 |     ctx.prototype.bezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {
548 |         this.__addPathCommand(format("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",
549 |             {cp1x:cp1x, cp1y:cp1y, cp2x:cp2x, cp2y:cp2y, x:x, y:y}));
550 |     };
551 | 
552 |     /**
553 |      * Adds a quadratic curve to command
554 |      */
555 |     ctx.prototype.quadraticCurveTo = function(cpx, cpy, x, y){
556 |         this.__addPathCommand(format("Q {cpx} {cpy} {x} {y}", {cpx:cpx, cpy:cpy, x:x, y:y}));
557 |     };
558 | 
559 |     /**
560 |      * Sets the stroke property on the current element
561 |      */
562 |     ctx.prototype.stroke = function(){
563 |         this.__applyStyleToCurrentElement("stroke");
564 |     };
565 | 
566 |     /**
567 |      * Sets fill properties on the current element
568 |      */
569 |     ctx.prototype.fill = function(){
570 |         this.__applyStyleToCurrentElement("fill");
571 |     };
572 | 
573 |     /**
574 |      *  Adds a rectangle to the path.
575 |      */
576 |     ctx.prototype.rect = function(x, y, width, height){
577 |         if(this.__currentElement.nodeName !== "path") {
578 |             this.beginPath();
579 |         }
580 |         this.moveTo(x, y);
581 |         this.lineTo(x+width, y);
582 |         this.lineTo(x+width, y+height);
583 |         this.lineTo(x, y+height);
584 |         this.lineTo(x, y);
585 |         this.closePath();
586 |     };
587 | 
588 | 
589 |     /**
590 |      * adds a rectangle element
591 |      */
592 |     ctx.prototype.fillRect = function(x, y, width, height){
593 |         var rect, parent;
594 |         rect = this.__createElement("rect", {
595 |             x : x,
596 |             y : y,
597 |             width : width,
598 |             height : height
599 |         }, true);
600 |         parent = this.__closestGroupOrSvg();
601 |         parent.appendChild(rect);
602 |         this.__currentElement = rect;
603 |         this.__applyStyleToCurrentElement("fill");
604 |     };
605 | 
606 |     /**
607 |      * Draws a rectangle with no fill
608 |      * @param x
609 |      * @param y
610 |      * @param width
611 |      * @param height
612 |      */
613 |     ctx.prototype.strokeRect = function(x, y, width, height){
614 |         var rect, parent;
615 |         rect = this.__createElement("rect", {
616 |             x : x,
617 |             y : y,
618 |             width : width,
619 |             height : height
620 |         }, true);
621 |         parent = this.__closestGroupOrSvg();
622 |         parent.appendChild(rect);
623 |         this.__currentElement = rect;
624 |         this.__applyStyleToCurrentElement("stroke");
625 |     };
626 | 
627 | 
628 |     /**
629 |      * "Clears" a canvas by just drawing a white rectangle in the current group.
630 |      */
631 |     ctx.prototype.clearRect = function(x, y, width, height) {
632 |         var rect, parent = this.__closestGroupOrSvg();
633 |         rect = this.__createElement("rect", {
634 |             x : x,
635 |             y : y,
636 |             width : width,
637 |             height : height,
638 |             fill : "#FFFFFF"
639 |         }, true);
640 |         parent.appendChild(rect);
641 |     };
642 | 
643 |     /**
644 |      * Adds a linear gradient to a defs tag.
645 |      * Returns a canvas gradient object that has a reference to it's parent def
646 |      */
647 |     ctx.prototype.createLinearGradient = function(x1, y1, x2, y2){
648 |         var grad = this.__createElement("linearGradient", {
649 |             id : randomString(this.__ids),
650 |             x1 : x1+"px",
651 |             x2 : x2+"px",
652 |             y1 : y1+"px",
653 |             y2 : y2+"px",
654 |             "gradientUnits" : "userSpaceOnUse"
655 |         }, false);
656 |         this.__defs.appendChild(grad);
657 |         return new CanvasGradient(grad);
658 |     };
659 | 
660 |     /**
661 |      * Adds a radial gradient to a defs tag.
662 |      * Returns a canvas gradient object that has a reference to it's parent def
663 |      */
664 |     ctx.prototype.createRadialGradient = function(x0, y0, r0, x1, y1, r1){
665 |         var grad = this.__createElement("radialGradient", {
666 |             id : randomString(this.__ids),
667 |             cx : x1+"px",
668 |             cy : y1+"px",
669 |             r  : r1+"px",
670 |             fx : x0+"px",
671 |             fy : y0+"px",
672 |             "gradientUnits" : "userSpaceOnUse"
673 |         }, false);
674 |         this.__defs.appendChild(grad);
675 |         return new CanvasGradient(grad);
676 | 
677 |     };
678 | 
679 |     /**
680 |      * Parses the font string and returns svg mapping
681 |      * @private
682 |      */
683 |     ctx.prototype.__parseFont = function() {
684 |         var font = this.font, parts, token, index = 0, data = {
685 |             style : "normal",
686 |             size : "10px",
687 |             family : "sans-serif",
688 |             weight: "normal",
689 |             decoration : "none", //underline | none
690 |             href : null
691 |         };
692 | 
693 |         //canvas doesn't support underline natively, but we can pass this attribute
694 |         if(this.__fontUnderline === "underline") {
695 |             data.decoration = "underline";
696 |         }
697 | 
698 |         //canvas also doesn't support linking, but we can pass this as well
699 |         if(this.__fontHref) {
700 |             data.href = this.__fontHref;
701 |         }
702 | 
703 |         parts = font.split(" ");
704 |         token = parts[index];
705 | 
706 |         //text decoration
707 |         while(/italic|bold|normal/.test(token)) {
708 |             if(token === "bold") {
709 |                 data.weight = token; //[normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | inherit]
710 |             } else {
711 |                 data.style = token; //[normal / italic /oblique /inherit]
712 |             }
713 |             //advance to next token
714 |             index++;
715 |             token = parts[index];
716 |         }
717 | 
718 |         //next token should be font size
719 |         if(/em|px|pt|%/.test(token)) {
720 |             data.size = token;
721 |             index++;
722 |         }
723 | 
724 |         //font family?
725 |         parts.splice(0, index);
726 |         data.family = parts.join(" ");
727 | 
728 |         return data;
729 |     };
730 | 
731 |     /**
732 |      * Helper to link text fragments
733 |      * @param font
734 |      * @param element
735 |      * @return {*}
736 |      * @private
737 |      */
738 |     ctx.prototype.__wrapTextLink = function(font, element) {
739 |         if(font.href) {
740 |             var a = document.createElementNS("http://www.w3.org/2000/svg", "a");
741 |             a.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", font.href);
742 |             a.appendChild(element);
743 |             return a;
744 |         }
745 |         return element;
746 |     };
747 | 
748 |     /**
749 |      * Fills or strokes text
750 |      * @param text
751 |      * @param x
752 |      * @param y
753 |      * @param action - stroke or fill
754 |      * @private
755 |      */
756 |     ctx.prototype.__applyText = function(text, x, y, action) {
757 |         var font = this.__parseFont(),
758 |             parent = this.__closestGroupOrSvg(),
759 |             textElement = this.__createElement("text", {
760 |                 "font-family" : font.family,
761 |                 "font-size" : font.size,
762 |                 "font-style" : font.style,
763 |                 "font-weight" : font.weight,
764 |                 "text-decoration" : font.decoration,
765 |                 "x" : x,
766 |                 "y" : y,
767 |                 "text-anchor": getTextAnchor(this.textAlign),
768 |                 "dominant-baseline": getDominantBaseline(this.textBaseline)
769 |             }, true);
770 | 
771 |         textElement.appendChild(document.createTextNode(text));
772 |         this.__currentElement = textElement;
773 |         this.__applyStyleToCurrentElement(action);
774 |         parent.appendChild(this.__wrapTextLink(font,textElement));
775 |     };
776 | 
777 |     /**
778 |      * Creates a text element
779 |      * @param text
780 |      * @param x
781 |      * @param y
782 |      */
783 |     ctx.prototype.fillText = function(text, x, y){
784 |         this.__applyText(text, x, y, "fill");
785 |     };
786 | 
787 |     /**
788 |      * Strokes text
789 |      * @param text
790 |      * @param x
791 |      * @param y
792 |      */
793 |     ctx.prototype.strokeText = function(text, x, y){
794 |         this.__applyText(text, x, y, "stroke");
795 |     };
796 | 
797 |     /**
798 |      * No need to implement this for svg.
799 |      * @param text
800 |      * @return {TextMetrics}
801 |      */
802 |     ctx.prototype.measureText = function(text){
803 |         this.__ctx.font = this.font;
804 |         return this.__ctx.measureText(text);
805 |     };
806 | 
807 |     /**
808 |      *  Arc command!
809 |      */
810 |     ctx.prototype.arc = function(x, y, radius, startAngle, endAngle, counterClockwise) {
811 |         startAngle = startAngle % (2*Math.PI);
812 |         endAngle = endAngle % (2*Math.PI);
813 |         if(startAngle === endAngle) {
814 |             //circle time! subtract some of the angle so svg is happy (svg elliptical arc can't draw a full circle)
815 |             endAngle = ((endAngle + (2*Math.PI)) - 0.001 * (counterClockwise ? -1 : 1)) % (2*Math.PI);
816 |         }
817 |         var endX = x+radius*Math.cos(endAngle),
818 |             endY = y+radius*Math.sin(endAngle),
819 |             startX = x+radius*Math.cos(startAngle),
820 |             startY = y+radius*Math.sin(startAngle),
821 |             sweepFlag = counterClockwise ? 0 : 1,
822 |             largeArcFlag = 0,
823 |             diff = endAngle - startAngle;
824 | 
825 |         // https://github.com/gliffy/canvas2svg/issues/4
826 |         if(diff < 0) {
827 |             diff += 2*Math.PI;
828 |         }
829 | 
830 |         if(counterClockwise) {
831 |             largeArcFlag = diff > Math.PI ? 0 : 1;
832 |         } else {
833 |             largeArcFlag = diff > Math.PI ? 1 : 0;
834 |         }
835 | 
836 |         this.moveTo(startX, startY);
837 |         this.__addPathCommand(format("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",
838 |             {rx:radius, ry:radius, xAxisRotation:0, largeArcFlag:largeArcFlag, sweepFlag:sweepFlag, endX:endX, endY:endY}));
839 | 
840 |     };
841 | 
842 |     /**
843 |      * Generates a ClipPath from the clip command.
844 |      */
845 |     ctx.prototype.clip = function(){
846 |         var group = this.__closestGroupOrSvg(),
847 |             clipPath = document.createElementNS("http://www.w3.org/2000/svg", "clipPath"),
848 |             id =  randomString(this.__ids),
849 |             newGroup = document.createElementNS("http://www.w3.org/2000/svg", "g");
850 | 
851 |         group.removeChild(this.__currentElement);
852 |         clipPath.setAttribute("id", id);
853 |         clipPath.appendChild(this.__currentElement);
854 | 
855 |         this.__defs.appendChild(clipPath);
856 | 
857 |         //set the clip path to this group
858 |         group.setAttribute("clip-path", format("url(#{id})", {id:id}));
859 | 
860 |         //clip paths can be scaled and transformed, we need to add another wrapper group to avoid later transformations
861 |         // to this path
862 |         group.appendChild(newGroup);
863 | 
864 |         this.__currentElement = newGroup;
865 | 
866 |     };
867 | 
868 |     /**
869 |      * Draws a canvas, image or mock context to this canvas.
870 |      * Note that all svg dom manipulation uses node.childNodes rather than node.children for IE support.
871 |      * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-drawimage
872 |      */
873 |     ctx.prototype.drawImage = function(){
874 |         //convert arguments to a real array
875 |         var args = Array.prototype.slice.call(arguments),
876 |             image=args[0],
877 |             dx, dy, dw, dh, sx=0, sy=0, sw, sh, parent, svg, defs, group,
878 |             currentElement, svgImage, canvas, context, id;
879 | 
880 |         if(args.length === 3) {
881 |             dx = args[1];
882 |             dy = args[2];
883 |             sw = image.width;
884 |             sh = image.height;
885 |             dw = sw;
886 |             dh = sh;
887 |         } else if(args.length === 5) {
888 |             dx = args[1];
889 |             dy = args[2];
890 |             dw = args[3];
891 |             dh = args[4];
892 |             sw = image.width;
893 |             sh = image.height;
894 |         } else if(args.length === 9) {
895 |             sx = args[1];
896 |             sy = args[2];
897 |             sw = args[3];
898 |             sh = args[4];
899 |             dx = args[5];
900 |             dy = args[6];
901 |             dw = args[7];
902 |             dh = args[8];
903 |         } else {
904 |             throw new Error("Inavlid number of arguments passed to drawImage: " + arguments.length);
905 |         }
906 | 
907 |         parent = this.__closestGroupOrSvg();
908 |         currentElement = this.__currentElement;
909 | 
910 |         if(image instanceof ctx) {
911 |             //canvas2svg mock canvas context. In the future we may want to clone nodes instead.
912 |             //also I'm currently ignoring dw, dh, sw, sh, sx, sy for a mock context.
913 |             svg = image.getSvg();
914 |             defs = svg.childNodes[0];
915 |             while(defs.childNodes.length) {
916 |                 id = defs.childNodes[0].getAttribute("id");
917 |                 this.__ids[id] = id;
918 |                 this.__defs.appendChild(defs.childNodes[0]);
919 |             }
920 |             group = svg.childNodes[1];
921 |             parent.appendChild(group);
922 |             this.__currentElement = group;
923 |             this.translate(dx, dy);
924 |             this.__currentElement = currentElement;
925 |         } else if(image.nodeName === "CANVAS" || image.nodeName === "IMG") {
926 |             //canvas or image
927 |             svgImage = document.createElementNS("http://www.w3.org/2000/svg", "image");
928 |             svgImage.setAttribute("width", dw);
929 |             svgImage.setAttribute("height", dh);
930 |             svgImage.setAttribute("preserveAspectRatio", "none");
931 | 
932 |             if(sx || sy || sw !== image.width || sh !== image.height) {
933 |                 //crop the image using a temporary canvas
934 |                 canvas = document.createElement("canvas");
935 |                 canvas.width = dw;
936 |                 canvas.height = dh;
937 |                 context = canvas.getContext("2d");
938 |                 context.drawImage(image, sx, sy, sw, sh, 0, 0, dw, dh);
939 |                 image = canvas;
940 |             }
941 | 
942 |             svgImage.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href",
943 |                 image.nodeName === "CANVAS" ? image.toDataURL() : image.getAttribute("src"));
944 |             parent.appendChild(svgImage);
945 |             this.__currentElement = svgImage;
946 |             this.translate(dx, dy);
947 |             this.__currentElement = currentElement;
948 |         }
949 |     };
950 | 
951 |     /**
952 |      * Generates a pattern tag
953 |      */
954 |     ctx.prototype.createPattern = function(image, repetition){
955 |         var pattern = document.createElementNS("http://www.w3.org/2000/svg", "pattern"), id = randomString(this.__ids),
956 |             img;
957 |         pattern.setAttribute("id", id);
958 |         pattern.setAttribute("width", image.width);
959 |         pattern.setAttribute("height", image.height);
960 |         if(image.nodeName === "CANVAS" || image.nodeName === "IMG") {
961 |             img = document.createElementNS("http://www.w3.org/2000/svg", "image");
962 |             img.setAttribute("width", image.width);
963 |             img.setAttribute("height", image.height);
964 |             img.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href",
965 |                 image.nodeName === "CANVAS" ? image.toDataURL() : image.getAttribute("src"));
966 |             pattern.appendChild(img);
967 |             this.__defs.appendChild(pattern);
968 |         } else if(image instanceof ctx) {
969 |             pattern.appendChild(image.__root.childNodes[1]);
970 |             this.__defs.appendChild(pattern);
971 |         }
972 |         return new CanvasPattern(pattern, this);
973 |     };
974 | 
975 |     /**
976 |      * Not yet implemented
977 |      */
978 |     ctx.prototype.drawFocusRing = function(){};
979 |     ctx.prototype.createImageData = function(){};
980 |     ctx.prototype.getImageData = function(){};
981 |     ctx.prototype.putImageData = function(){};
982 |     ctx.prototype.globalCompositeOperation = function(){};
983 |     ctx.prototype.arcTo = function(){};
984 |     ctx.prototype.setTransform = function(){};
985 | 
986 |     //add options for alternative namespace
987 |     window.C2S = ctx;
988 | 
989 | }());

# File: js/external/fastclick.js

  1 | /**
  2 |  * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
  3 |  *
  4 |  * @version 1.0.3
  5 |  * @codingstandard ftlabs-jsv2
  6 |  * @copyright The Financial Times Limited [All Rights Reserved]
  7 |  * @license MIT License (see LICENSE.txt)
  8 |  */
  9 | 
 10 | /*jslint browser:true, node:true*/
 11 | /*global define, Event, Node*/
 12 | 
 13 | 
 14 | /**
 15 |  * Instantiate fast-clicking listeners on the specified layer.
 16 |  *
 17 |  * @constructor
 18 |  * @param {Element} layer The layer to listen on
 19 |  * @param {Object} options The options to override the defaults
 20 |  */
 21 | function FastClick(layer, options) {
 22 | 	'use strict';
 23 | 	var oldOnClick;
 24 | 
 25 | 	options = options || {};
 26 | 
 27 | 	/**
 28 | 	 * Whether a click is currently being tracked.
 29 | 	 *
 30 | 	 * @type boolean
 31 | 	 */
 32 | 	this.trackingClick = false;
 33 | 
 34 | 
 35 | 	/**
 36 | 	 * Timestamp for when click tracking started.
 37 | 	 *
 38 | 	 * @type number
 39 | 	 */
 40 | 	this.trackingClickStart = 0;
 41 | 
 42 | 
 43 | 	/**
 44 | 	 * The element being tracked for a click.
 45 | 	 *
 46 | 	 * @type EventTarget
 47 | 	 */
 48 | 	this.targetElement = null;
 49 | 
 50 | 
 51 | 	/**
 52 | 	 * X-coordinate of touch start event.
 53 | 	 *
 54 | 	 * @type number
 55 | 	 */
 56 | 	this.touchStartX = 0;
 57 | 
 58 | 
 59 | 	/**
 60 | 	 * Y-coordinate of touch start event.
 61 | 	 *
 62 | 	 * @type number
 63 | 	 */
 64 | 	this.touchStartY = 0;
 65 | 
 66 | 
 67 | 	/**
 68 | 	 * ID of the last touch, retrieved from Touch.identifier.
 69 | 	 *
 70 | 	 * @type number
 71 | 	 */
 72 | 	this.lastTouchIdentifier = 0;
 73 | 
 74 | 
 75 | 	/**
 76 | 	 * Touchmove boundary, beyond which a click will be cancelled.
 77 | 	 *
 78 | 	 * @type number
 79 | 	 */
 80 | 	this.touchBoundary = options.touchBoundary || 10;
 81 | 
 82 | 
 83 | 	/**
 84 | 	 * The FastClick layer.
 85 | 	 *
 86 | 	 * @type Element
 87 | 	 */
 88 | 	this.layer = layer;
 89 | 
 90 | 	/**
 91 | 	 * The minimum time between tap(touchstart and touchend) events
 92 | 	 *
 93 | 	 * @type number
 94 | 	 */
 95 | 	this.tapDelay = options.tapDelay || 200;
 96 | 
 97 | 	if (FastClick.notNeeded(layer)) {
 98 | 		return;
 99 | 	}
100 | 
101 | 	// Some old versions of Android don't have Function.prototype.bind
102 | 	function bind(method, context) {
103 | 		return function() { return method.apply(context, arguments); };
104 | 	}
105 | 
106 | 
107 | 	var methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];
108 | 	var context = this;
109 | 	for (var i = 0, l = methods.length; i < l; i++) {
110 | 		context[methods[i]] = bind(context[methods[i]], context);
111 | 	}
112 | 
113 | 	// Set up event handlers as required
114 | 	if (deviceIsAndroid) {
115 | 		layer.addEventListener('mouseover', this.onMouse, true);
116 | 		layer.addEventListener('mousedown', this.onMouse, true);
117 | 		layer.addEventListener('mouseup', this.onMouse, true);
118 | 	}
119 | 
120 | 	layer.addEventListener('click', this.onClick, true);
121 | 	layer.addEventListener('touchstart', this.onTouchStart, false);
122 | 	layer.addEventListener('touchmove', this.onTouchMove, false);
123 | 	layer.addEventListener('touchend', this.onTouchEnd, false);
124 | 	layer.addEventListener('touchcancel', this.onTouchCancel, false);
125 | 
126 | 	// Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
127 | 	// which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick
128 | 	// layer when they are cancelled.
129 | 	if (!Event.prototype.stopImmediatePropagation) {
130 | 		layer.removeEventListener = function(type, callback, capture) {
131 | 			var rmv = Node.prototype.removeEventListener;
132 | 			if (type === 'click') {
133 | 				rmv.call(layer, type, callback.hijacked || callback, capture);
134 | 			} else {
135 | 				rmv.call(layer, type, callback, capture);
136 | 			}
137 | 		};
138 | 
139 | 		layer.addEventListener = function(type, callback, capture) {
140 | 			var adv = Node.prototype.addEventListener;
141 | 			if (type === 'click') {
142 | 				adv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {
143 | 					if (!event.propagationStopped) {
144 | 						callback(event);
145 | 					}
146 | 				}), capture);
147 | 			} else {
148 | 				adv.call(layer, type, callback, capture);
149 | 			}
150 | 		};
151 | 	}
152 | 
153 | 	// If a handler is already declared in the element's onclick attribute, it will be fired before
154 | 	// FastClick's onClick handler. Fix this by pulling out the user-defined handler function and
155 | 	// adding it as listener.
156 | 	if (typeof layer.onclick === 'function') {
157 | 
158 | 		// Android browser on at least 3.2 requires a new reference to the function in layer.onclick
159 | 		// - the old one won't work if passed to addEventListener directly.
160 | 		oldOnClick = layer.onclick;
161 | 		layer.addEventListener('click', function(event) {
162 | 			oldOnClick(event);
163 | 		}, false);
164 | 		layer.onclick = null;
165 | 	}
166 | }
167 | 
168 | 
169 | /**
170 |  * Android requires exceptions.
171 |  *
172 |  * @type boolean
173 |  */
174 | var deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0;
175 | 
176 | 
177 | /**
178 |  * iOS requires exceptions.
179 |  *
180 |  * @type boolean
181 |  */
182 | var deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent);
183 | 
184 | 
185 | /**
186 |  * iOS 4 requires an exception for select elements.
187 |  *
188 |  * @type boolean
189 |  */
190 | var deviceIsIOS4 = deviceIsIOS && (/OS 4_\d(_\d)?/).test(navigator.userAgent);
191 | 
192 | 
193 | /**
194 |  * iOS 6.0(+?) requires the target element to be manually derived
195 |  *
196 |  * @type boolean
197 |  */
198 | var deviceIsIOSWithBadTarget = deviceIsIOS && (/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);
199 | 
200 | /**
201 |  * BlackBerry requires exceptions.
202 |  *
203 |  * @type boolean
204 |  */
205 | var deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;
206 | 
207 | /**
208 |  * Determine whether a given element requires a native click.
209 |  *
210 |  * @param {EventTarget|Element} target Target DOM element
211 |  * @returns {boolean} Returns true if the element needs a native click
212 |  */
213 | FastClick.prototype.needsClick = function(target) {
214 | 	'use strict';
215 | 	switch (target.nodeName.toLowerCase()) {
216 | 
217 | 	// Don't send a synthetic click to disabled inputs (issue #62)
218 | 	case 'button':
219 | 	case 'select':
220 | 	case 'textarea':
221 | 		if (target.disabled) {
222 | 			return true;
223 | 		}
224 | 
225 | 		break;
226 | 	case 'input':
227 | 
228 | 		// File inputs need real clicks on iOS 6 due to a browser bug (issue #68)
229 | 		if ((deviceIsIOS && target.type === 'file') || target.disabled) {
230 | 			return true;
231 | 		}
232 | 
233 | 		break;
234 | 	case 'label':
235 | 	case 'video':
236 | 		return true;
237 | 	}
238 | 
239 | 	return (/\bneedsclick\b/).test(target.className);
240 | };
241 | 
242 | 
243 | /**
244 |  * Determine whether a given element requires a call to focus to simulate click into element.
245 |  *
246 |  * @param {EventTarget|Element} target Target DOM element
247 |  * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.
248 |  */
249 | FastClick.prototype.needsFocus = function(target) {
250 | 	'use strict';
251 | 	switch (target.nodeName.toLowerCase()) {
252 | 	case 'textarea':
253 | 		return true;
254 | 	case 'select':
255 | 		return !deviceIsAndroid;
256 | 	case 'input':
257 | 		switch (target.type) {
258 | 		case 'button':
259 | 		case 'checkbox':
260 | 		case 'file':
261 | 		case 'image':
262 | 		case 'radio':
263 | 		case 'submit':
264 | 			return false;
265 | 		}
266 | 
267 | 		// No point in attempting to focus disabled inputs
268 | 		return !target.disabled && !target.readOnly;
269 | 	default:
270 | 		return (/\bneedsfocus\b/).test(target.className);
271 | 	}
272 | };
273 | 
274 | 
275 | /**
276 |  * Send a click event to the specified element.
277 |  *
278 |  * @param {EventTarget|Element} targetElement
279 |  * @param {Event} event
280 |  */
281 | FastClick.prototype.sendClick = function(targetElement, event) {
282 | 	'use strict';
283 | 	var clickEvent, touch;
284 | 
285 | 	// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)
286 | 	if (document.activeElement && document.activeElement !== targetElement) {
287 | 		document.activeElement.blur();
288 | 	}
289 | 
290 | 	touch = event.changedTouches[0];
291 | 
292 | 	// Synthesise a click event, with an extra attribute so it can be tracked
293 | 	clickEvent = document.createEvent('MouseEvents');
294 | 	clickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);
295 | 	clickEvent.forwardedTouchEvent = true;
296 | 	targetElement.dispatchEvent(clickEvent);
297 | };
298 | 
299 | FastClick.prototype.determineEventType = function(targetElement) {
300 | 	'use strict';
301 | 
302 | 	//Issue #159: Android Chrome Select Box does not open with a synthetic click event
303 | 	if (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {
304 | 		return 'mousedown';
305 | 	}
306 | 
307 | 	return 'click';
308 | };
309 | 
310 | 
311 | /**
312 |  * @param {EventTarget|Element} targetElement
313 |  */
314 | FastClick.prototype.focus = function(targetElement) {
315 | 	'use strict';
316 | 	var length;
317 | 
318 | 	// Issue #160: on iOS 7, some input elements (e.g. date datetime) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.
319 | 	if (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time') {
320 | 		length = targetElement.value.length;
321 | 		targetElement.setSelectionRange(length, length);
322 | 	} else {
323 | 		targetElement.focus();
324 | 	}
325 | };
326 | 
327 | 
328 | /**
329 |  * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.
330 |  *
331 |  * @param {EventTarget|Element} targetElement
332 |  */
333 | FastClick.prototype.updateScrollParent = function(targetElement) {
334 | 	'use strict';
335 | 	var scrollParent, parentElement;
336 | 
337 | 	scrollParent = targetElement.fastClickScrollParent;
338 | 
339 | 	// Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the
340 | 	// target element was moved to another parent.
341 | 	if (!scrollParent || !scrollParent.contains(targetElement)) {
342 | 		parentElement = targetElement;
343 | 		do {
344 | 			if (parentElement.scrollHeight > parentElement.offsetHeight) {
345 | 				scrollParent = parentElement;
346 | 				targetElement.fastClickScrollParent = parentElement;
347 | 				break;
348 | 			}
349 | 
350 | 			parentElement = parentElement.parentElement;
351 | 		} while (parentElement);
352 | 	}
353 | 
354 | 	// Always update the scroll top tracker if possible.
355 | 	if (scrollParent) {
356 | 		scrollParent.fastClickLastScrollTop = scrollParent.scrollTop;
357 | 	}
358 | };
359 | 
360 | 
361 | /**
362 |  * @param {EventTarget} targetElement
363 |  * @returns {Element|EventTarget}
364 |  */
365 | FastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {
366 | 	'use strict';
367 | 
368 | 	// On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.
369 | 	if (eventTarget.nodeType === Node.TEXT_NODE) {
370 | 		return eventTarget.parentNode;
371 | 	}
372 | 
373 | 	return eventTarget;
374 | };
375 | 
376 | 
377 | /**
378 |  * On touch start, record the position and scroll offset.
379 |  *
380 |  * @param {Event} event
381 |  * @returns {boolean}
382 |  */
383 | FastClick.prototype.onTouchStart = function(event) {
384 | 	'use strict';
385 | 	var targetElement, touch, selection;
386 | 
387 | 	// Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).
388 | 	if (event.targetTouches.length > 1) {
389 | 		return true;
390 | 	}
391 | 
392 | 	targetElement = this.getTargetElementFromEventTarget(event.target);
393 | 	touch = event.targetTouches[0];
394 | 
395 | 	if (deviceIsIOS) {
396 | 
397 | 		// Only trusted events will deselect text on iOS (issue #49)
398 | 		selection = window.getSelection();
399 | 		if (selection.rangeCount && !selection.isCollapsed) {
400 | 			return true;
401 | 		}
402 | 
403 | 		if (!deviceIsIOS4) {
404 | 
405 | 			// Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):
406 | 			// when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched
407 | 			// with the same identifier as the touch event that previously triggered the click that triggered the alert.
408 | 			// Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an
409 | 			// immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.
410 | 			// Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,
411 | 			// which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,
412 | 			// random integers, it's safe to to continue if the identifier is 0 here.
413 | 			if (touch.identifier && touch.identifier === this.lastTouchIdentifier) {
414 | 				event.preventDefault();
415 | 				return false;
416 | 			}
417 | 
418 | 			this.lastTouchIdentifier = touch.identifier;
419 | 
420 | 			// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:
421 | 			// 1) the user does a fling scroll on the scrollable layer
422 | 			// 2) the user stops the fling scroll with another tap
423 | 			// then the event.target of the last 'touchend' event will be the element that was under the user's finger
424 | 			// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check
425 | 			// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).
426 | 			this.updateScrollParent(targetElement);
427 | 		}
428 | 	}
429 | 
430 | 	this.trackingClick = true;
431 | 	this.trackingClickStart = event.timeStamp;
432 | 	this.targetElement = targetElement;
433 | 
434 | 	this.touchStartX = touch.pageX;
435 | 	this.touchStartY = touch.pageY;
436 | 
437 | 	// Prevent phantom clicks on fast double-tap (issue #36)
438 | 	if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
439 | 		event.preventDefault();
440 | 	}
441 | 
442 | 	return true;
443 | };
444 | 
445 | 
446 | /**
447 |  * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.
448 |  *
449 |  * @param {Event} event
450 |  * @returns {boolean}
451 |  */
452 | FastClick.prototype.touchHasMoved = function(event) {
453 | 	'use strict';
454 | 	var touch = event.changedTouches[0], boundary = this.touchBoundary;
455 | 
456 | 	if (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {
457 | 		return true;
458 | 	}
459 | 
460 | 	return false;
461 | };
462 | 
463 | 
464 | /**
465 |  * Update the last position.
466 |  *
467 |  * @param {Event} event
468 |  * @returns {boolean}
469 |  */
470 | FastClick.prototype.onTouchMove = function(event) {
471 | 	'use strict';
472 | 	if (!this.trackingClick) {
473 | 		return true;
474 | 	}
475 | 
476 | 	// If the touch has moved, cancel the click tracking
477 | 	if (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {
478 | 		this.trackingClick = false;
479 | 		this.targetElement = null;
480 | 	}
481 | 
482 | 	return true;
483 | };
484 | 
485 | 
486 | /**
487 |  * Attempt to find the labelled control for the given label element.
488 |  *
489 |  * @param {EventTarget|HTMLLabelElement} labelElement
490 |  * @returns {Element|null}
491 |  */
492 | FastClick.prototype.findControl = function(labelElement) {
493 | 	'use strict';
494 | 
495 | 	// Fast path for newer browsers supporting the HTML5 control attribute
496 | 	if (labelElement.control !== undefined) {
497 | 		return labelElement.control;
498 | 	}
499 | 
500 | 	// All browsers under test that support touch events also support the HTML5 htmlFor attribute
501 | 	if (labelElement.htmlFor) {
502 | 		return document.getElementById(labelElement.htmlFor);
503 | 	}
504 | 
505 | 	// If no for attribute exists, attempt to retrieve the first labellable descendant element
506 | 	// the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label
507 | 	return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');
508 | };
509 | 
510 | 
511 | /**
512 |  * On touch end, determine whether to send a click event at once.
513 |  *
514 |  * @param {Event} event
515 |  * @returns {boolean}
516 |  */
517 | FastClick.prototype.onTouchEnd = function(event) {
518 | 	'use strict';
519 | 	var forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;
520 | 
521 | 	if (!this.trackingClick) {
522 | 		return true;
523 | 	}
524 | 
525 | 	// Prevent phantom clicks on fast double-tap (issue #36)
526 | 	if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
527 | 		this.cancelNextClick = true;
528 | 		return true;
529 | 	}
530 | 
531 | 	// Reset to prevent wrong click cancel on input (issue #156).
532 | 	this.cancelNextClick = false;
533 | 
534 | 	this.lastClickTime = event.timeStamp;
535 | 
536 | 	trackingClickStart = this.trackingClickStart;
537 | 	this.trackingClick = false;
538 | 	this.trackingClickStart = 0;
539 | 
540 | 	// On some iOS devices, the targetElement supplied with the event is invalid if the layer
541 | 	// is performing a transition or scroll, and has to be re-detected manually. Note that
542 | 	// for this to function correctly, it must be called *after* the event target is checked!
543 | 	// See issue #57; also filed as rdar://13048589 .
544 | 	if (deviceIsIOSWithBadTarget) {
545 | 		touch = event.changedTouches[0];
546 | 
547 | 		// In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null
548 | 		targetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;
549 | 		targetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;
550 | 	}
551 | 
552 | 	targetTagName = targetElement.tagName.toLowerCase();
553 | 	if (targetTagName === 'label') {
554 | 		forElement = this.findControl(targetElement);
555 | 		if (forElement) {
556 | 			this.focus(targetElement);
557 | 			if (deviceIsAndroid) {
558 | 				return false;
559 | 			}
560 | 
561 | 			targetElement = forElement;
562 | 		}
563 | 	} else if (this.needsFocus(targetElement)) {
564 | 
565 | 		// Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.
566 | 		// Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).
567 | 		if ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {
568 | 			this.targetElement = null;
569 | 			return false;
570 | 		}
571 | 
572 | 		this.focus(targetElement);
573 | 		this.sendClick(targetElement, event);
574 | 
575 | 		// Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.
576 | 		// Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)
577 | 		if (!deviceIsIOS || targetTagName !== 'select') {
578 | 			this.targetElement = null;
579 | 			event.preventDefault();
580 | 		}
581 | 
582 | 		return false;
583 | 	}
584 | 
585 | 	if (deviceIsIOS && !deviceIsIOS4) {
586 | 
587 | 		// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled
588 | 		// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).
589 | 		scrollParent = targetElement.fastClickScrollParent;
590 | 		if (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {
591 | 			return true;
592 | 		}
593 | 	}
594 | 
595 | 	// Prevent the actual click from going though - unless the target node is marked as requiring
596 | 	// real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.
597 | 	if (!this.needsClick(targetElement)) {
598 | 		event.preventDefault();
599 | 		this.sendClick(targetElement, event);
600 | 	}
601 | 
602 | 	return false;
603 | };
604 | 
605 | 
606 | /**
607 |  * On touch cancel, stop tracking the click.
608 |  *
609 |  * @returns {void}
610 |  */
611 | FastClick.prototype.onTouchCancel = function() {
612 | 	'use strict';
613 | 	this.trackingClick = false;
614 | 	this.targetElement = null;
615 | };
616 | 
617 | 
618 | /**
619 |  * Determine mouse events which should be permitted.
620 |  *
621 |  * @param {Event} event
622 |  * @returns {boolean}
623 |  */
624 | FastClick.prototype.onMouse = function(event) {
625 | 	'use strict';
626 | 
627 | 	// If a target element was never set (because a touch event was never fired) allow the event
628 | 	if (!this.targetElement) {
629 | 		return true;
630 | 	}
631 | 
632 | 	if (event.forwardedTouchEvent) {
633 | 		return true;
634 | 	}
635 | 
636 | 	// Programmatically generated events targeting a specific element should be permitted
637 | 	if (!event.cancelable) {
638 | 		return true;
639 | 	}
640 | 
641 | 	// Derive and check the target element to see whether the mouse event needs to be permitted;
642 | 	// unless explicitly enabled, prevent non-touch click events from triggering actions,
643 | 	// to prevent ghost/doubleclicks.
644 | 	if (!this.needsClick(this.targetElement) || this.cancelNextClick) {
645 | 
646 | 		// Prevent any user-added listeners declared on FastClick element from being fired.
647 | 		if (event.stopImmediatePropagation) {
648 | 			event.stopImmediatePropagation();
649 | 		} else {
650 | 
651 | 			// Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
652 | 			event.propagationStopped = true;
653 | 		}
654 | 
655 | 		// Cancel the event
656 | 		event.stopPropagation();
657 | 		event.preventDefault();
658 | 
659 | 		return false;
660 | 	}
661 | 
662 | 	// If the mouse event is permitted, return true for the action to go through.
663 | 	return true;
664 | };
665 | 
666 | 
667 | /**
668 |  * On actual clicks, determine whether this is a touch-generated click, a click action occurring
669 |  * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or
670 |  * an actual click which should be permitted.
671 |  *
672 |  * @param {Event} event
673 |  * @returns {boolean}
674 |  */
675 | FastClick.prototype.onClick = function(event) {
676 | 	'use strict';
677 | 	var permitted;
678 | 
679 | 	// It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.
680 | 	if (this.trackingClick) {
681 | 		this.targetElement = null;
682 | 		this.trackingClick = false;
683 | 		return true;
684 | 	}
685 | 
686 | 	// Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.
687 | 	if (event.target.type === 'submit' && event.detail === 0) {
688 | 		return true;
689 | 	}
690 | 
691 | 	permitted = this.onMouse(event);
692 | 
693 | 	// Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.
694 | 	if (!permitted) {
695 | 		this.targetElement = null;
696 | 	}
697 | 
698 | 	// If clicks are permitted, return true for the action to go through.
699 | 	return permitted;
700 | };
701 | 
702 | 
703 | /**
704 |  * Remove all FastClick's event listeners.
705 |  *
706 |  * @returns {void}
707 |  */
708 | FastClick.prototype.destroy = function() {
709 | 	'use strict';
710 | 	var layer = this.layer;
711 | 
712 | 	if (deviceIsAndroid) {
713 | 		layer.removeEventListener('mouseover', this.onMouse, true);
714 | 		layer.removeEventListener('mousedown', this.onMouse, true);
715 | 		layer.removeEventListener('mouseup', this.onMouse, true);
716 | 	}
717 | 
718 | 	layer.removeEventListener('click', this.onClick, true);
719 | 	layer.removeEventListener('touchstart', this.onTouchStart, false);
720 | 	layer.removeEventListener('touchmove', this.onTouchMove, false);
721 | 	layer.removeEventListener('touchend', this.onTouchEnd, false);
722 | 	layer.removeEventListener('touchcancel', this.onTouchCancel, false);
723 | };
724 | 
725 | 
726 | /**
727 |  * Check whether FastClick is needed.
728 |  *
729 |  * @param {Element} layer The layer to listen on
730 |  */
731 | FastClick.notNeeded = function(layer) {
732 | 	'use strict';
733 | 	var metaViewport;
734 | 	var chromeVersion;
735 | 	var blackberryVersion;
736 | 
737 | 	// Devices that don't support touch don't need FastClick
738 | 	if (typeof window.ontouchstart === 'undefined') {
739 | 		return true;
740 | 	}
741 | 
742 | 	// Chrome version - zero for other browsers
743 | 	chromeVersion = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];
744 | 
745 | 	if (chromeVersion) {
746 | 
747 | 		if (deviceIsAndroid) {
748 | 			metaViewport = document.querySelector('meta[name=viewport]');
749 | 
750 | 			if (metaViewport) {
751 | 				// Chrome on Android with user-scalable="no" doesn't need FastClick (issue #89)
752 | 				if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
753 | 					return true;
754 | 				}
755 | 				// Chrome 32 and above with width=device-width or less don't need FastClick
756 | 				if (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {
757 | 					return true;
758 | 				}
759 | 			}
760 | 
761 | 		// Chrome desktop doesn't need FastClick (issue #15)
762 | 		} else {
763 | 			return true;
764 | 		}
765 | 	}
766 | 
767 | 	if (deviceIsBlackBerry10) {
768 | 		blackberryVersion = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);
769 | 
770 | 		// BlackBerry 10.3+ does not require Fastclick library.
771 | 		// https://github.com/ftlabs/fastclick/issues/251
772 | 		if (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {
773 | 			metaViewport = document.querySelector('meta[name=viewport]');
774 | 
775 | 			if (metaViewport) {
776 | 				// user-scalable=no eliminates click delay.
777 | 				if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
778 | 					return true;
779 | 				}
780 | 				// width=device-width (or less than device-width) eliminates click delay.
781 | 				if (document.documentElement.scrollWidth <= window.outerWidth) {
782 | 					return true;
783 | 				}
784 | 			}
785 | 		}
786 | 	}
787 | 
788 | 	// IE10 with -ms-touch-action: none, which disables double-tap-to-zoom (issue #97)
789 | 	if (layer.style.msTouchAction === 'none') {
790 | 		return true;
791 | 	}
792 | 
793 | 	return false;
794 | };
795 | 
796 | 
797 | /**
798 |  * Factory method for creating a FastClick object
799 |  *
800 |  * @param {Element} layer The layer to listen on
801 |  * @param {Object} options The options to override the defaults
802 |  */
803 | FastClick.attach = function(layer, options) {
804 | 	'use strict';
805 | 	return new FastClick(layer, options);
806 | };
807 | 
808 | 
809 | if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
810 | 
811 | 	// AMD. Register as an anonymous module.
812 | 	define(function() {
813 | 		'use strict';
814 | 		return FastClick;
815 | 	});
816 | } else if (typeof module !== 'undefined' && module.exports) {
817 | 	module.exports = FastClick.attach;
818 | 	module.exports.FastClick = FastClick;
819 | } else {
820 | 	window.FastClick = FastClick;
821 | }

# File: js/external/jquery.cookie-1.4.1.min.js

1 | /*! jquery.cookie v1.4.1 | MIT */
2 | !function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});

# File: js/external/retina.js

  1 | /*!
  2 |  * Retina.js v1.3.0
  3 |  *
  4 |  * Copyright 2014 Imulus, LLC
  5 |  * Released under the MIT license
  6 |  *
  7 |  * Retina.js is an open source script that makes it easy to serve
  8 |  * high-resolution images to devices with retina displays.
  9 |  */
 10 | 
 11 | (function() {
 12 |     var root = (typeof exports === 'undefined' ? window : exports);
 13 |     var config = {
 14 |         // An option to choose a suffix for 2x images
 15 |         retinaImageSuffix : '@2x',
 16 | 
 17 |         // Ensure Content-Type is an image before trying to load @2x image
 18 |         // https://github.com/imulus/retinajs/pull/45)
 19 |         check_mime_type: true,
 20 | 
 21 |         // Resize high-resolution images to original image's pixel dimensions
 22 |         // https://github.com/imulus/retinajs/issues/8
 23 |         force_original_dimensions: true
 24 |     };
 25 | 
 26 |     function Retina() {}
 27 | 
 28 |     root.Retina = Retina;
 29 | 
 30 |     Retina.configure = function(options) {
 31 |         if (options === null) {
 32 |             options = {};
 33 |         }
 34 | 
 35 |         for (var prop in options) {
 36 |             if (options.hasOwnProperty(prop)) {
 37 |                 config[prop] = options[prop];
 38 |             }
 39 |         }
 40 |     };
 41 | 
 42 |     Retina.init = function(context) {
 43 |         if (context === null) {
 44 |             context = root;
 45 |         }
 46 | 
 47 |         var existing_onload = context.onload || function(){};
 48 | 
 49 |         context.onload = function() {
 50 |             var images = document.getElementsByTagName('img'), retinaImages = [], i, image;
 51 |             for (i = 0; i < images.length; i += 1) {
 52 |                 image = images[i];
 53 |                 if (!!!image.getAttributeNode('data-no-retina')) {
 54 |                     image.setAttribute('data-at2x-loaded', true);
 55 |                     retinaImages.push(new RetinaImage(image));
 56 |                 }
 57 |             }
 58 |             existing_onload();
 59 |         };
 60 |     };
 61 | 
 62 |     Retina.recheck = function() {
 63 |         var images = document.getElementsByTagName('img'), retinaImages = [], i, image;
 64 |         for (i = 0; i < images.length; i += 1) {
 65 |             image = images[i];
 66 |             if (!!!image.getAttributeNode('data-no-retina')) {
 67 |                 if (!!!image.getAttributeNode('data-at2x-loaded')) {
 68 |                     image.setAttribute('data-at2x-loaded', true);
 69 |                     retinaImages.push(new RetinaImage(image));
 70 |                 }
 71 |             }
 72 |         }
 73 |     };
 74 | 
 75 |     Retina.isRetina = function(){
 76 |         var mediaQuery = '(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)';
 77 | 
 78 |         if (root.devicePixelRatio > 1) {
 79 |             return true;
 80 |         }
 81 | 
 82 |         if (root.matchMedia && root.matchMedia(mediaQuery).matches) {
 83 |             return true;
 84 |         }
 85 | 
 86 |         return false;
 87 |     };
 88 | 
 89 | 
 90 |     var regexMatch = /\.\w+$/;
 91 |     function suffixReplace (match) {
 92 |         return config.retinaImageSuffix + match;
 93 |     }
 94 | 
 95 |     function RetinaImagePath(path, at_2x_path) {
 96 |         this.path = path || '';
 97 |         if (typeof at_2x_path !== 'undefined' && at_2x_path !== null) {
 98 |             this.at_2x_path = at_2x_path;
 99 |             this.perform_check = false;
100 |         } else {
101 |             if (undefined !== document.createElement) {
102 |                 var locationObject = document.createElement('a');
103 |                 locationObject.href = this.path;
104 |                 locationObject.pathname = locationObject.pathname.replace(regexMatch, suffixReplace);
105 |                 this.at_2x_path = locationObject.href;
106 |             } else {
107 |                 var parts = this.path.split('?');
108 |                 parts[0] = parts[0].replace(regexMatch, suffixReplace);
109 |                 this.at_2x_path = parts.join('?');
110 |             }
111 |             this.perform_check = true;
112 |         }
113 |     }
114 | 
115 |     root.RetinaImagePath = RetinaImagePath;
116 | 
117 |     RetinaImagePath.confirmed_paths = [];
118 | 
119 |     RetinaImagePath.prototype.is_external = function() {
120 |         return !!(this.path.match(/^https?\:/i) && !this.path.match('//' + document.domain) );
121 |     };
122 | 
123 |     RetinaImagePath.prototype.check_2x_variant = function(callback) {
124 |         var http, that = this;
125 |         if (this.is_external()) {
126 |             return callback(false);
127 |         } else if (!this.perform_check && typeof this.at_2x_path !== 'undefined' && this.at_2x_path !== null) {
128 |             return callback(true);
129 |         } else if (this.at_2x_path in RetinaImagePath.confirmed_paths) {
130 |             return callback(true);
131 |         } else {
132 |             http = new XMLHttpRequest();
133 |             http.open('HEAD', this.at_2x_path);
134 |             http.onreadystatechange = function() {
135 |                 if (http.readyState !== 4) {
136 |                     return callback(false);
137 |                 }
138 | 
139 |                 if (http.status >= 200 && http.status <= 399) {
140 |                     if (config.check_mime_type) {
141 |                         var type = http.getResponseHeader('Content-Type');
142 |                         if (type === null || !type.match(/^image/i)) {
143 |                             return callback(false);
144 |                         }
145 |                     }
146 | 
147 |                     RetinaImagePath.confirmed_paths.push(that.at_2x_path);
148 |                     return callback(true);
149 |                 } else {
150 |                     return callback(false);
151 |                 }
152 |             };
153 |             http.send();
154 |         }
155 |     };
156 | 
157 | 
158 |     function RetinaImage(el) {
159 |         this.el = el;
160 |         this.path = new RetinaImagePath(this.el.getAttribute('src'), this.el.getAttribute('data-at2x'));
161 |         var that = this;
162 |         this.path.check_2x_variant(function(hasVariant) {
163 |             if (hasVariant) {
164 |                 that.swap();
165 |             }
166 |         });
167 |     }
168 | 
169 |     root.RetinaImage = RetinaImage;
170 | 
171 |     RetinaImage.prototype.swap = function(path) {
172 |         if (typeof path === 'undefined') {
173 |             path = this.path.at_2x_path;
174 |         }
175 | 
176 |         var that = this;
177 |         function load() {
178 |             if (! that.el.complete) {
179 |                 setTimeout(load, 5);
180 |             } else {
181 |                 if (config.force_original_dimensions) {
182 |                     that.el.setAttribute('width', that.el.width);
183 |                     that.el.setAttribute('height', that.el.height);
184 |                 }
185 | 
186 |                 that.el.setAttribute('src', path);
187 |             }
188 |         }
189 |         load();
190 |     };
191 | 
192 | 
193 |     if (Retina.isRetina()) {
194 |         Retina.init(root);
195 |     }
196 | })();

# File: js/analytics.js

 1 | var analytics =
 2 | {
 3 |     enabled: true,
 4 | 
 5 |     screens:
 6 |     {
 7 |         main: 'Main screen',
 8 |         about: 'About',
 9 |         achievements: 'Achievements',
10 |         info: 'Physics information'
11 |     },
12 | 
13 |     events:
14 |     {
15 |         categoryResearch: 'Research',
16 |         categoryHR: 'HR',
17 |         categoryUpgrades: 'Upgrades',
18 |         
19 |         actionResearch: 'Research',
20 |         actionHire: 'Hire',
21 |         actionBuy: 'Buy'
22 |     },
23 |     
24 |     init: function()
25 |     {
26 |         if (typeof Helpers.analytics === 'undefined' || Helpers.analytics == '') {
27 |             analytics.enabled = false;
28 |             return;
29 |         }
30 |         
31 |         ga('create', Helpers.analytics);
32 |         ga('set', { 'appName': 'Particle Clicker', 'appId': 'ch.cern.particle-clicker', 'appVersion': '0.9' });
33 |         ga('set', 'anonymizeIp', true);
34 | 
35 | 
36 |         $('#myModal').on('show.bs.modal', function (e) {
37 |             analytics.sendScreen(analytics.screens.about);
38 |         });
39 |         $('#myModal').on('hide.bs.modal', function (e) {
40 |             analytics.sendScreen(analytics.screens.main);
41 |         });
42 | 
43 |         $('#achievements-modal').on('show.bs.modal', function (e) {
44 |             analytics.sendScreen(analytics.screens.achievements);
45 |         });
46 |         $('#achievements-modal').on('hide.bs.modal', function (e) {
47 |             analytics.sendScreen(analytics.screens.main);
48 |         });
49 | 
50 |         $('#infoBox').on('show.bs.modal', function (e) {
51 |             analytics.sendScreen(analytics.screens.info);
52 |         });
53 |         $('#infoBox').on('hide.bs.modal', function (e) {
54 |             analytics.sendScreen(analytics.screens.main);
55 |         });
56 |     },
57 |     
58 |     sendScreen: function(type)
59 |     {
60 |         if (!analytics.enabled || typeof type === 'undefined') {
61 |             return;
62 |         }
63 |         
64 |         ga('send', 'screenview', { 'screenName': type });
65 |     },
66 |     
67 |     sendEvent: function(category, action, label, value)
68 |     {
69 |         if (!analytics.enabled || typeof category === 'undefined' || typeof action === 'undefined' || typeof label === 'undefined' || typeof value === 'undefined') {
70 |             return;
71 |         }
72 |         
73 |         //ga('send', 'event', category, action, label, value, {'screenName': analytics.screens.main });
74 |     }
75 | };

# File: js/app.js

  1 | 'use strict';
  2 | (function() {
  3 |   Helpers.validateSaveVersion();
  4 | 
  5 |   var game = new Game.Game();
  6 |   game.load();
  7 | 
  8 |   var lab = game.lab;
  9 |   var research = game.research;
 10 |   var workers = game.workers;
 11 |   var upgrades = game.upgrades;
 12 |   var achievements = game.achievements;
 13 |   var allObjects = game.allObjects;
 14 |   var lastSaved;
 15 | 
 16 |   var app = angular.module('particleClicker', []);
 17 | 
 18 |   app.filter('niceNumber', ['$filter', function($filter) {
 19 |       return Helpers.formatNumberPostfix;
 20 |   }]);
 21 | 
 22 |   app.filter('niceTime', ['$filter', function($filter) {
 23 |       return Helpers.formatTime;
 24 |   }]);
 25 | 
 26 |   app.filter('currency', ['$filter', function($filter) {
 27 |     return function(input) {
 28 |       return 'JTN ' + $filter('niceNumber')(input);
 29 |     };
 30 |   }]);
 31 | 
 32 |   app.filter('reverse', ['$filter', function($filter) {
 33 |     return function(items) {
 34 |       return items.slice().reverse();
 35 |     };
 36 |   }]);
 37 | 
 38 |   app.controller('DetectorController', function() {
 39 |     this.click = function() {
 40 |       lab.clickDetector();
 41 |       detector.addEvent();
 42 |       UI.showUpdateValue("#update-data", lab.state.detector);
 43 |       return false;
 44 |     };
 45 |   });
 46 | 
 47 |   // Hack to prevent text highlighting
 48 |   document.getElementById('detector').addEventListener('mousedown', function(e) {
 49 |     e.preventDefault();
 50 |   });
 51 | 
 52 |   app.controller('LabController', ['$interval', function($interval) {
 53 |     this.lab = lab;
 54 |     this.showDetectorInfo = function() {
 55 |       if (!this._detectorInfo) {
 56 |         this._detectorInfo = Helpers.loadFile('html/detector.html');
 57 |       }
 58 |       UI.showModal('Detector', this._detectorInfo);
 59 |     };
 60 |     $interval(function() {  // one tick
 61 |       var grant = lab.getGrant();
 62 |       UI.showUpdateValue("#update-funding", grant);
 63 |       var sum = 0;
 64 |       for (var i = 0; i < workers.length; i++) {
 65 |         sum += workers[i].state.hired * workers[i].state.rate;
 66 |       }
 67 |       if (sum > 0) {
 68 |         lab.acquireData(sum);
 69 |         UI.showUpdateValue("#update-data", sum);
 70 |         detector.addEventExternal(workers.map(function(w) {
 71 |           return w.state.hired;
 72 |         }).reduce(function(a, b){return a + b}, 0));
 73 |       }
 74 |     }, 1000);
 75 |   }]);
 76 | 
 77 |   app.controller('ResearchController', ['$compile', function($compile) {
 78 |     this.research = research;
 79 |     this.isVisible = function(item) {
 80 |       return item.isVisible(lab);
 81 |     };
 82 |     this.isAvailable = function(item) {
 83 |       return item.isAvailable(lab);
 84 |     };
 85 |     this.doResearch = function(item) {
 86 |       var cost = item.research(lab);
 87 |       if (cost > 0) {
 88 |         UI.showUpdateValue("#update-data", -cost);
 89 |         UI.showUpdateValue("#update-reputation", item.state.reputation);
 90 |       }
 91 |     };
 92 |     this.showInfo = function(r) {
 93 |       UI.showModal(r.name, r.getInfo());
 94 |       UI.showLevels(r.state.level);
 95 |     };
 96 |   }]);
 97 | 
 98 |   app.controller('HRController', function() {
 99 |     this.workers = workers;
100 |     this.isVisible = function(worker) {
101 |       return worker.isVisible(lab);
102 |     };
103 |     this.isAvailable = function(worker) {
104 |       return worker.isAvailable(lab);
105 |     };
106 |     this.hire = function(worker) {
107 |       var cost = worker.hire(lab);
108 |       if (cost > 0) {
109 |         UI.showUpdateValue("#update-funding", -cost);
110 |       }
111 |     };
112 |   });
113 | 
114 |   app.controller('UpgradesController', function() {
115 |     this.upgrades = upgrades;
116 |     this.isVisible = function(upgrade) {
117 |       return upgrade.isVisible(lab, allObjects);
118 |     };
119 |     this.isAvailable = function(upgrade) {
120 |       return upgrade.isAvailable(lab, allObjects);
121 |     };
122 |     this.upgrade = function(upgrade) {
123 |       if (upgrade.buy(lab, allObjects)) {
124 |         UI.showUpdateValue("#update-funding", upgrade.cost);
125 |       }
126 |     }
127 |   });
128 | 
129 |   app.controller('AchievementsController', function($scope) {
130 |     $scope.achievements = achievements;
131 |     $scope.progress = function() {
132 |       return achievements.filter(function(a) { return a.validate(lab, allObjects, lastSaved); }).length;
133 |     };
134 |   });
135 | 
136 |   app.controller('SaveController',
137 |       ['$scope', '$interval', function($scope, $interval) {
138 |     lastSaved = new Date().getTime();
139 |     $scope.lastSaved = lastSaved;
140 |     $scope.saveNow = function() {
141 |       var saveTime = new Date().getTime();
142 |       game.lab.state.time += saveTime - lastSaved;
143 |       game.save();
144 |       lastSaved = saveTime;
145 |       $scope.lastSaved = lastSaved;
146 |     };
147 |     $scope.restart = function() {
148 |       if (window.confirm(
149 |         'Do you really want to restart the game? All progress will be lost.'
150 |       )) {
151 |         ObjectStorage.clear();
152 |         window.location.reload(true);
153 |       }
154 |     };
155 |     $interval($scope.saveNow, 10000);
156 |   }]);
157 | 
158 |   app.controller('StatsController', function($scope) {
159 |     $scope.lab = lab;
160 |   });
161 | 
162 |   analytics.init();
163 |   analytics.sendScreen(analytics.screens.main);
164 | })();

# File: js/detector.js

  1 | var detector =
  2 | {
  3 |     core:
  4 |     {
  5 |         canvas: null,
  6 |         ctx: null
  7 |     },
  8 | 
  9 |     events:
 10 |     {
 11 |         canvas: null,
 12 |         ctx: null,
 13 |         list: [],
 14 |     },
 15 | 
 16 |     visible: true,
 17 | 
 18 |     width: 400,
 19 |     height: 400,
 20 | 
 21 |     ratio: 1,
 22 | 
 23 |     colors: 
 24 |     {
 25 |         siliconRing: '#FFF371',
 26 |         siliconRingLine: '#EAC918',
 27 |         ecal: '#C5FF82',
 28 |         ecalLine: '#9EFF28',
 29 |         hcal: '#E1FF79',
 30 |         hcalLine: '#C9FF2D',
 31 |         lightRing: '#A0B3FF',
 32 |         lightRingLine: '#A0B3FF',
 33 |         darkRing: '#7280B8',
 34 |         darkRingLine: '#7280B8',
 35 | 
 36 |         mucalLight: '#FFDFB7',
 37 |         mucalLightLine: '#FFDFB7',
 38 |         mucalDark: '#EA301F',
 39 |         mucalDarkLine: '#C5291A'
 40 |     },
 41 | 
 42 |     radius:
 43 |     {
 44 |         siliconInner: 10,
 45 |         silicon: 30,
 46 |         siliconSpace: 35,
 47 |         ecal: 50,
 48 |         hcal: 80,
 49 |         darkRing1: 83,
 50 |         darkRing1Space: 86,
 51 |         lightRing: 92,
 52 |         lightRingSpace: 94,
 53 |         darkRing2: 100,
 54 | 
 55 |         mucal: 107,
 56 |         mucalLight: 8,
 57 |         mucalDark: 18
 58 |     },
 59 | 
 60 |     tracks:
 61 |     [
 62 |         {
 63 |             name: 'electron',
 64 |             color: '#0016EA'
 65 |         },
 66 | 
 67 |         {
 68 |             name: 'jet',
 69 |             color: '#0B7700'
 70 |         },
 71 |         
 72 |         {
 73 |             name: 'muon',
 74 |             color: '#775400'
 75 |         }
 76 |     ],
 77 | 
 78 |     lastRender: 0,
 79 | 
 80 |     animate: function(time)
 81 |     {
 82 |         var duration = typeof time !== 'undefined' ? time - detector.lastRender : 16;
 83 |         detector.lastRender = time;
 84 | 
 85 |         requestAnimFrame(detector.animate);
 86 |         detector.draw(duration);
 87 |     },
 88 | 
 89 |     init: function(baseSize)
 90 |     {
 91 |         detector.core.canvas = document.getElementById('detector-core');
 92 |         detector.core.ctx = detector.core.canvas.getContext('2d');
 93 |         //detector.core.ctx = new C2S(400,400);
 94 | 
 95 |         detector.events.canvas = document.getElementById('detector-events');
 96 |         detector.events.ctx = detector.events.canvas.getContext('2d');
 97 | 
 98 |         var devicePixelRatio = window.devicePixelRatio || 1;
 99 |         var backingStoreRatio = detector.core.ctx.webkitBackingStorePixelRatio ||
100 |                                 detector.core.ctx.mozBackingStorePixelRatio ||
101 |                                 detector.core.ctx.msBackingStorePixelRatio ||
102 |                                 detector.core.ctx.oBackingStorePixelRatio ||
103 |                                 detector.core.ctx.backingStorePixelRatio || 1;
104 | 
105 |         var ratio = devicePixelRatio / backingStoreRatio;
106 | 
107 |         detector.ratio = baseSize / 400;
108 | 
109 |         detector.width = baseSize;
110 |         detector.height = baseSize;
111 | 
112 |         detector.core.canvas.width = baseSize;
113 |         detector.core.canvas.height = baseSize;
114 | 
115 |         detector.events.canvas.width = baseSize;
116 |         detector.events.canvas.height = baseSize;
117 | 
118 |         if (devicePixelRatio !== backingStoreRatio) {
119 |             var oldWidth = detector.core.canvas.width;
120 |             var oldHeight = detector.core.canvas.height;
121 | 
122 |             detector.core.canvas.width = oldWidth * ratio;
123 |             detector.core.canvas.height = oldHeight * ratio;
124 |             detector.core.canvas.style.width = oldWidth + 'px';
125 |             detector.core.canvas.style.height = oldHeight + 'px';
126 | 
127 |             detector.events.canvas.width = oldWidth * ratio;
128 |             detector.events.canvas.height = oldHeight * ratio;
129 |             detector.events.canvas.style.width = oldWidth + 'px';
130 |             detector.events.canvas.style.height = oldHeight + 'px';
131 | 
132 |             // now scale the context to counter
133 |             // the fact that we've manually scaled
134 |             // our canvas element
135 |             detector.core.ctx.scale(ratio, ratio);
136 |             detector.events.ctx.scale(ratio, ratio);
137 |         }
138 | 
139 |         detector.coreDraw();
140 |         detector.animate();
141 |     },
142 | 
143 |     coreDraw: function()
144 |     {
145 |         var ctx = detector.core.ctx;
146 |         var cx = detector.width / 2;
147 |         var cy = detector.height / 2;
148 | 
149 |         ctx.clearRect(0, 0, detector.width, detector.width);
150 | 
151 |         var muSplit = 2/12;
152 |         for (var k = 3; k >= 1; k--) {
153 |             ctx.strokeStyle = detector.colors.mucalDarkLine;
154 |             ctx.fillStyle = detector.colors.mucalDark;
155 |             
156 |             ctx.beginPath();
157 |             ctx.moveTo(cx + (detector.radius.mucal + k * detector.radius.mucalLight + k * detector.radius.mucalDark) * Math.cos(Math.PI * muSplit) * detector.ratio, cy + (detector.radius.mucal + k * detector.radius.mucalLight + k * detector.radius.mucalDark) * Math.sin(Math.PI * muSplit) * detector.ratio);
158 |             for (var i = 1; i <= 13; i++) {
159 |                 ctx.lineTo(cx + (detector.radius.mucal + k * detector.radius.mucalLight + k * detector.radius.mucalDark) * Math.cos(Math.PI * i * muSplit) * detector.ratio, cy + (detector.radius.mucal + k * detector.radius.mucalLight + k * detector.radius.mucalDark) * Math.sin(Math.PI * i * muSplit) * detector.ratio);
160 |             }
161 |             ctx.stroke();
162 |             ctx.fill();
163 | 
164 |             ctx.beginPath();
165 |             ctx.moveTo(cx + (detector.radius.mucal + k * detector.radius.mucalLight + (k-1) * detector.radius.mucalDark) * Math.cos(Math.PI * muSplit) * detector.ratio, cy + (detector.radius.mucal + k * detector.radius.mucalLight + (k-1) * detector.radius.mucalDark) * Math.sin(Math.PI * muSplit) * detector.ratio);
166 |             for (var i = 1; i <= 13; i++) {
167 |                 ctx.lineTo(cx + (detector.radius.mucal + k * detector.radius.mucalLight + (k-1) * detector.radius.mucalDark) * Math.cos(Math.PI * i * muSplit) * detector.ratio, cy + (detector.radius.mucal + k * detector.radius.mucalLight + (k-1) * detector.radius.mucalDark) * Math.sin(Math.PI * i * muSplit) * detector.ratio);
168 |             }
169 |             ctx.stroke();
170 |             ctx.fillStyle = detector.colors.mucalLight;
171 |             ctx.fill();
172 |         }
173 | 
174 |         ctx.strokeStyle = detector.colors.mucalDarkLine;
175 |         ctx.beginPath();
176 |         ctx.moveTo(cx + detector.radius.mucal * Math.cos(Math.PI * muSplit) * detector.ratio, cy + detector.radius.mucal * Math.sin(Math.PI * muSplit) * detector.ratio);
177 |         for (var i = 1; i <= 13; i++) {
178 |             ctx.lineTo(cx + detector.radius.mucal * Math.cos(Math.PI * i * muSplit) * detector.ratio, cy + detector.radius.mucal * Math.sin(Math.PI * i * muSplit) * detector.ratio);
179 |         }
180 |         ctx.stroke();
181 |         ctx.fillStyle = '#FFFFFF';
182 |         ctx.fill();
183 | 
184 | 
185 |         ctx.beginPath();
186 |         ctx.strokeStyle = detector.colors.darkRingLine;
187 |         ctx.fillStyle = detector.colors.darkRing;
188 |         ctx.arc(cx, cy, detector.radius.darkRing2 * detector.ratio, 0, Math.PI * 2, true);
189 |         ctx.fill();
190 |         ctx.stroke();
191 | 
192 |         ctx.beginPath();
193 |         ctx.fillStyle = '#FFFFFF';
194 |         ctx.arc(cx, cy, detector.radius.lightRingSpace * detector.ratio, 0, Math.PI * 2, true);
195 |         ctx.fill();
196 | 
197 |         ctx.beginPath();
198 |         ctx.strokeStyle = detector.colors.lightRingLine;
199 |         ctx.fillStyle = detector.colors.lightRing;
200 |         ctx.arc(cx, cy, detector.radius.lightRing * detector.ratio, 0, Math.PI * 2, true);
201 |         ctx.fill();
202 |         ctx.stroke();
203 | 
204 |         ctx.beginPath();
205 |         ctx.fillStyle = '#FFFFFF';
206 |         ctx.arc(cx, cy, detector.radius.darkRing1Space * detector.ratio, 0, Math.PI * 2, true);
207 |         ctx.fill();
208 | 
209 |         ctx.beginPath();
210 |         ctx.strokeStyle = detector.colors.darkRingLine
211 |         ctx.fillStyle = detector.colors.darkRing;
212 |         ctx.arc(cx, cy, detector.radius.darkRing1 * detector.ratio, 0, Math.PI * 2, true);
213 |         ctx.fill();
214 |         ctx.stroke();
215 | 
216 |         ctx.beginPath();
217 |         ctx.fillStyle = '#FFFFFF';
218 |         ctx.arc(cx, cy, detector.radius.ecal * detector.ratio, 0, Math.PI * 2, true);
219 |         ctx.fill();
220 | 
221 | 
222 |         ctx.strokeStyle = detector.colors.hcalLine;
223 |         ctx.fillStyle = detector.colors.hcal;
224 |         var calSplit = 20/2;
225 |         for (var i = 0; i < 20; i++) {
226 |             ctx.beginPath();
227 |             ctx.moveTo(cx + detector.radius.ecal * Math.cos(Math.PI * i / calSplit) * detector.ratio, cy + detector.radius.ecal * Math.sin(Math.PI * i / calSplit) * detector.ratio);
228 |             ctx.lineTo(cx + detector.radius.hcal * Math.cos(Math.PI * i / calSplit) * detector.ratio, cy + detector.radius.hcal * Math.sin(Math.PI * i / calSplit) * detector.ratio);
229 |             ctx.arc(cx, cy, detector.radius.hcal * detector.ratio, Math.PI * i / calSplit, Math.PI * (i+1) / calSplit, false);
230 |             ctx.lineTo(cx + detector.radius.ecal * Math.cos(Math.PI * (i+1) / calSplit) * detector.ratio, cy + detector.radius.ecal * Math.sin(Math.PI * (i+1) / calSplit) * detector.ratio);
231 |             ctx.lineTo(cx + detector.radius.ecal * Math.cos(Math.PI * i / calSplit) * detector.ratio, cy + detector.radius.ecal * Math.sin(Math.PI * i / calSplit) * detector.ratio);
232 |             ctx.closePath();
233 |             ctx.fill();
234 |             ctx.stroke();
235 |         }
236 | 
237 |         ctx.strokeStyle = detector.colors.ecalLine;
238 |         ctx.fillStyle = detector.colors.ecal;
239 |         var calSplit = 20/2;
240 |         for (var i = 0; i < 20; i++) {
241 |             ctx.beginPath();
242 |             ctx.moveTo(cx + detector.radius.siliconSpace * Math.cos(Math.PI * i / calSplit) * detector.ratio, cy + detector.radius.siliconSpace * Math.sin(Math.PI * i / calSplit) * detector.ratio);
243 |             ctx.lineTo(cx + detector.radius.ecal * Math.cos(Math.PI * i / calSplit) * detector.ratio, cy + detector.radius.ecal * Math.sin(Math.PI * i / calSplit) * detector.ratio);
244 |             ctx.lineTo(cx + detector.radius.ecal * Math.cos(Math.PI * (i+1) / calSplit) * detector.ratio, cy + detector.radius.ecal * Math.sin(Math.PI * (i+1) / calSplit) * detector.ratio);
245 |             ctx.lineTo(cx + detector.radius.siliconSpace * Math.cos(Math.PI * (i+1) / calSplit) * detector.ratio, cy + detector.radius.siliconSpace * Math.sin(Math.PI * (i+1) / calSplit) * detector.ratio);
246 |             ctx.closePath();
247 |             ctx.fill();
248 |             ctx.stroke();
249 |         }
250 | 
251 |         ctx.beginPath();
252 |         ctx.strokeStyle = detector.colors.siliconRingLine;
253 |         ctx.fillStyle = detector.colors.siliconRing;
254 |         ctx.arc(cx, cy, detector.radius.silicon * detector.ratio, 0, Math.PI * 2, true);
255 |         ctx.fill();
256 |         ctx.stroke();
257 | 
258 |         ctx.beginPath();
259 |         ctx.strokeStyle = detector.colors.siliconRingLine;
260 |         ctx.fillStyle = detector.colors.siliconRing;
261 |         ctx.arc(cx, cy, detector.radius.siliconInner * detector.ratio, 0, Math.PI * 2, true);
262 |         ctx.fill();
263 |         ctx.stroke();
264 |     },
265 | 
266 |     addEvent: function()
267 |     {
268 |         var num = Math.max(3, Math.ceil(15 * Math.random()));
269 | 
270 |         for (var i = 0; i < num; i++) {
271 |             var index = Math.round(Math.random() * (detector.tracks.length - 1));
272 |             var event = new ParticleEvent(detector.tracks[index], num);
273 |             detector.events.list.push(event);
274 |         }
275 |     },
276 | 
277 |     addEventExternal: function(numWorkers)
278 |     {
279 |         if (!detector.visible) {
280 |             return;
281 |         }
282 | 
283 |         var num = Math.min(20 * numWorkers / 10, 20);
284 | 
285 |         for (var i = 0; i < num; i++) {
286 |             var index = Math.round(Math.random() * (detector.tracks.length - 1));
287 |             var event = new ParticleEvent(detector.tracks[index], num, true);
288 |             detector.events.list.push(event);
289 |         }
290 |     },
291 | 
292 |     draw: function(duration)
293 |     {
294 |         detector.events.ctx.clearRect(0, 0, detector.width, detector.height);
295 | 
296 |         var del = -1;
297 |         for (var e in detector.events.list) {
298 |             if (detector.events.list[e].alpha > 0) {
299 |                 detector.events.list[e].draw(duration);
300 |             } else {
301 |                 del = e;
302 |             }
303 |         }
304 | 
305 |         if (del > 0) {
306 |             detector.events.list.splice(0, del);
307 |         }
308 |     }
309 | };
310 | 
311 | window.requestAnimFrame = (function(){
312 |     return window.requestAnimationFrame       || 
313 |            window.webkitRequestAnimationFrame || 
314 |            window.mozRequestAnimationFrame    || 
315 |            window.oRequestAnimationFrame      || 
316 |            window.msRequestAnimationFrame     || 
317 |            function(/* function */ callback, /* DOMElement */ element){
318 |                window.setTimeout(callback, 1000 / 60);
319 |            };
320 | })();
321 | 
322 | (function() { detector.init(400); $('#detector').width(400).height(400); })();

# File: js/event.js

 1 | function ParticleEvent(type, count, external)
 2 | {
 3 |     this.work = typeof external !== 'undefined' ? external : false;
 4 |     this.type = type;
 5 |     this.length = 0;
 6 |     this.radius = 0;
 7 |     this.direction = 0;
 8 |     this.sign = (Math.random() - 0.5 >= 0) ? 1 : -1;
 9 |     this.alpha = this.work ? 0.5 : 1;
10 |     this.count = count;
11 | 
12 |     switch (this.type.name)
13 |     {
14 |         case 'electron':
15 |             this.length = detector.radius.siliconSpace * detector.ratio + Math.round((detector.radius.ecal * detector.ratio + 10 - detector.radius.siliconSpace * detector.ratio) * Math.random());
16 |             this.direction = Math.random() * Math.PI * 2;
17 |             this.radius = 20 + Math.round((100 - 20) * Math.random());
18 |             break;
19 |         case 'jet':
20 |             this.length = detector.radius.ecal * detector.ratio + Math.round((detector.radius.mucal * detector.ratio - detector.radius.ecal * detector.ratio) * Math.random());
21 |             this.direction = Math.random() * Math.PI * 2;
22 |             this.radius = 40 + Math.round((200 - 40) * Math.random());
23 |             break;
24 |         case 'muon':
25 |             this.length = detector.radius.mucal * detector.ratio + 3 * detector.radius.mucalDark * detector.ratio + Math.round((4 * detector.radius.mucalLight * detector.ratio + 2 * detector.radius.mucalDark * detector.ratio) * Math.random());
26 |             this.direction = Math.random() * Math.PI * 2;
27 |             this.radius = 200 + Math.round((600 - 200) * Math.random());
28 |             break;
29 |     }
30 | 
31 |     this.draw(16, true);
32 | };
33 | 
34 | ParticleEvent.prototype.draw = function(duration, init)
35 | {
36 |     init = typeof init !== 'undefined' ? init : false;
37 | 
38 |     var ctx = detector.events.ctx;
39 |     var cx = detector.width / 2;
40 |     var cy = detector.height / 2;
41 | 
42 |     ctx.save();
43 | 
44 |     ctx.globalAlpha = this.alpha;
45 |     ctx.strokeStyle = this.type.color;
46 |     ctx.fillStyle = this.type.color;
47 |     ctx.lineWidth = 2;
48 | 
49 |     ctx.translate(cx, cy);
50 |     ctx.rotate(this.direction);
51 |     ctx.translate(-cx, -cy);
52 | 
53 |     ctx.beginPath();
54 |     ctx.arc(cx + this.length / 2, cy + this.sign * Math.round(Math.sqrt(Math.abs(this.radius * this.radius - this.length * this.length / 4))), this.radius, - this.sign * Math.PI / 2 - Math.asin(this.length / (2 * this.radius)), - this.sign * Math.PI / 2 +  Math.asin(this.length / (2 * this.radius)), false);
55 |     ctx.stroke();
56 | 
57 |     ctx.restore();
58 | 
59 |     if (!init) {
60 |         this.alpha -= 0.03 / 16 * duration;
61 |     }
62 | };
63 | 

# File: js/game.js

 1 | var Game = (function() {
 2 |   'use strict';
 3 | 
 4 |   var Game = function() {
 5 |     this.lab = new GameObjects.Lab();
 6 |     this.research = null;
 7 |     this.workers = null;
 8 |     this.upgrades = null;
 9 |     this.achievements = null;
10 |     this.allObjects = {lab : this.lab};
11 |     this.loaded = false;
12 |   };
13 | 
14 |   Game.prototype.load = function() {
15 |     if (this.loaded) {
16 |       return;
17 |     }
18 | 
19 |     // I know synchronous requests are bad as they will block the browser.
20 |     // However, I don't see any other reasonable way to do this in order to
21 |     // make it work with Angular. If you know a way, let me know, and I'll
22 |     // give you a beer. - Kevin
23 |     this.research = Helpers.loadFile('json/research.json');
24 |     this.workers = Helpers.loadFile('json/workers.json');
25 |     this.upgrades = Helpers.loadFile('json/upgrades.json');
26 |     this.achievements = Helpers.loadFile('json/achievements.json');
27 | 
28 |     // Turn JSON files into actual game objects and fill map of all objects
29 |     var _this = this;
30 |     var makeGameObject = function(type, object) {
31 |       // It's okay to define this function here since load is only called
32 |       // once anyway...
33 |       var o = new type(object);
34 |       _this.allObjects[o.key] = o;
35 |       return o;
36 |     };
37 |     this.research = this.research.map(
38 |         function(r) { return makeGameObject(GameObjects.Research, r); });
39 |     this.workers = this.workers.map(
40 |         function(w) { return makeGameObject(GameObjects.Worker, w); });
41 |     this.upgrades = this.upgrades.map(
42 |         function(u) { return makeGameObject(GameObjects.Upgrade, u); });
43 |     this.achievements = this.achievements.map(
44 |         function(a) { return makeGameObject(GameObjects.Achievement, a); });
45 |     // Load states from local store
46 |     for (var key in this.allObjects) {
47 |       var o = this.allObjects[key];
48 |       o.loadState(ObjectStorage.load(key));
49 |     }
50 |     this.loaded = true;
51 |   };
52 | 
53 |   Game.prototype.save = function() {
54 |     // Save every object's state to local storage
55 |     for (var key in this.allObjects) {
56 |       ObjectStorage.save(key, this.allObjects[key].state);
57 |     }
58 |   };
59 | 
60 |   return {Game : Game};
61 | }());

# File: js/gameobjects.js

  1 | var GameObjects = (function() {
  2 |   'use strict';
  3 |   var GLOBAL_VISIBILITY_THRESHOLD = 0.5;
  4 | 
  5 |   /** @class GameObject
  6 |    * Base class for all objects in the game. This works together with the
  7 |    * saving mechanism.
  8 |    */
  9 |   var GameObject = function(obj) {
 10 |     this.state = {};
 11 |     $.extend(this, obj);
 12 |     if (!this.key) {
 13 |       throw 'Error: GameObject has to have a key!';
 14 |     }
 15 |   };
 16 |   GameObject.prototype.loadState =
 17 |       function(state) { $.extend(this.state, state); };
 18 | 
 19 |   /** @class Lab
 20 |    */
 21 |   var Lab = function() {
 22 |     GameObject.apply(this, [{
 23 |                              key : 'lab',
 24 |                              state : {
 25 |                                name : 'Give your lab an awesome name!',
 26 |                                detector : 1,
 27 |                                factor : 5,
 28 |                                data : 0,
 29 |                                money : 0,
 30 |                                reputation : 0,
 31 |                                clicks : 0,
 32 |                                moneyCollected : 0,
 33 |                                moneySpent : 0,
 34 |                                dataCollected : 0,
 35 |                                dataSpent : 0,
 36 |                                time: 0
 37 |                              }
 38 |                            }]);
 39 |   };
 40 | 
 41 |   Lab.prototype = Object.create(GameObject.prototype);
 42 | 
 43 |   Lab.prototype.constructor = Lab;
 44 | 
 45 |   Lab.prototype.getGrant = function() {
 46 |     var addition = this.state.reputation * this.state.factor;
 47 |     this.state.money += addition;
 48 |     this.state.moneyCollected += addition;
 49 |     return addition;
 50 |   };
 51 | 
 52 |   Lab.prototype.acquireData = function(amount) {
 53 |     this.state.data += amount;
 54 |     this.state.dataCollected += amount;
 55 |   };
 56 | 
 57 |   Lab.prototype.clickDetector = function() {
 58 |     this.state.clicks += 1;
 59 |     this.acquireData(this.state.detector);
 60 |   };
 61 | 
 62 |   Lab.prototype.research = function(cost, reputation) {
 63 |     if (this.state.data >= cost) {
 64 |       this.state.data -= cost;
 65 |       this.state.dataSpent += cost;
 66 |       this.state.reputation += reputation;
 67 |       return true;
 68 |     }
 69 |     return false;
 70 |   };
 71 | 
 72 |   Lab.prototype.buy = function(cost) {
 73 |     if (this.state.money >= cost) {
 74 |       this.state.money -= cost;
 75 |       this.state.moneySpent += cost;
 76 |       return true;
 77 |     }
 78 |     return false;
 79 |   };
 80 | 
 81 |   /** @class Research
 82 |    */
 83 |   var Research = function(obj) {
 84 |     GameObject.apply(this, [obj]);
 85 |     this.state.level = 0;
 86 |     this.state.interesting = false;
 87 |   };
 88 | 
 89 |   Research.prototype = Object.create(GameObject.prototype);
 90 | 
 91 |   Research.prototype.constructor = Research;
 92 | 
 93 |   Research.prototype.isVisible = function(lab) {
 94 |     if (!lab) {
 95 |       return false;
 96 |     }
 97 |     return this.state.level > 0 ||
 98 |            lab.state.data >= this.state.cost * GLOBAL_VISIBILITY_THRESHOLD;
 99 |   };
100 | 
101 |   Research.prototype.isAvailable = function(lab) {
102 |     if (!lab) {
103 |       return false;
104 |     }
105 |     return lab.state.data >= this.state.cost;
106 |   };
107 | 
108 |   Research.prototype.research = function(lab) {
109 |     if (lab && lab.research(this.state.cost, this.state.reputation)) {
110 |       this.state.level++;
111 |       if (this.state.info_levels.length > 0 &&
112 |           this.state.level === this.state.info_levels[0]) {
113 |         this.state.interesting = true;
114 |         this.state.info_levels.splice(0, 1);
115 |       }
116 |       var old_cost = this.state.cost;
117 |       this.state.cost = Math.floor(this.state.cost * this.cost_increase);
118 |       return old_cost;
119 |     }
120 |     return -1;
121 |   };
122 | 
123 |   Research.prototype.getInfo = function() {
124 |     if (!this._info) {
125 |       this._info = Helpers.loadFile(this.info);
126 |     }
127 |     this.state.interesting = false;
128 |     return this._info;
129 |   };
130 | 
131 |   /** @class Worker
132 |    * Implement an auto-clicker in the game.
133 |    */
134 |   var Worker = function(obj) {
135 |     GameObject.apply(this, [obj]);
136 |     this.state.hired = 0;
137 |   };
138 | 
139 |   Worker.prototype = Object.create(GameObject.prototype);
140 | 
141 |   Worker.prototype.constructor = Worker;
142 | 
143 |   Worker.prototype.isVisible = function(lab) {
144 |     if (!lab) {
145 |       return false;
146 |     }
147 |     return this.state.hired > 0 ||
148 |            lab.state.money >= this.state.cost * GLOBAL_VISIBILITY_THRESHOLD;
149 |   };
150 | 
151 |   Worker.prototype.isAvailable = function(lab) {
152 |     if (!lab) {
153 |       return false;
154 |     }
155 |     return lab.state.money >= this.state.cost;
156 |   };
157 | 
158 |   Worker.prototype.hire = function(lab) {
159 |     if (lab && lab.buy(this.state.cost)) {
160 |       this.state.hired++;
161 |       var cost = this.state.cost;
162 |       this.state.cost = Math.floor(cost * this.cost_increase);
163 |       return cost;
164 |     }
165 |     return -1;  // not enough money
166 |   };
167 | 
168 |   Worker.prototype.getTotal =
169 |       function() { return this.state.hired * this.state.rate; };
170 | 
171 |   /** @class Upgrade
172 |    */
173 |   var Upgrade = function(obj) {
174 |     GameObject.apply(this, [obj]);
175 |     this.state.visible = false;
176 |     this.state.used = false;
177 |   };
178 | 
179 |   Upgrade.prototype = Object.create(GameObject.prototype);
180 | 
181 |   Upgrade.prototype.constructor = Upgrade;
182 | 
183 |   Upgrade.prototype.meetsRequirements = function(allObjects) {
184 |     if (!allObjects) {
185 |       return false;
186 |     }
187 |     for (var i = 0; i < this.requirements.length; i++) {
188 |       var req = this.requirements[i];
189 |       if (allObjects[req.key].state[req.property] < req.threshold) {
190 |         return false;
191 |       }
192 |     }
193 |     return true;
194 |   };
195 | 
196 |   Upgrade.prototype.isAvailable = function(lab, allObjects) {
197 |     if (!lab || !allObjects) {
198 |       return false;
199 |     }
200 |     return !this.state.used && lab.state.money >= this.cost &&
201 |            this.meetsRequirements(allObjects);
202 |   };
203 | 
204 |   Upgrade.prototype.isVisible = function(lab, allObjects) {
205 |     if (!lab || !allObjects) {
206 |       return false;
207 |     }
208 |     if (!this.state.used &&
209 |         (this.state.visible ||
210 |          lab.state.money >= this.cost * GLOBAL_VISIBILITY_THRESHOLD &&
211 |              this.meetsRequirements(allObjects))) {
212 |       this._visible = true;
213 |       return true;
214 |     }
215 |     return false;
216 |   };
217 | 
218 |   Upgrade.prototype.buy = function(lab, allObjects) {
219 |     if (lab && allObjects && !this.state.used && lab.buy(this.cost)) {
220 |       for (var i = 0; i < this.targets.length; i++) {
221 |         var t = this.targets[i];
222 |         allObjects[t.key].state[t.property] *= this.factor || 1;
223 |         allObjects[t.key].state[t.property] += this.constant || 0;
224 |       }
225 |       this.state.used = true;  // How about actually REMOVING used upgrades?
226 |       this.state.visible = false;
227 |       return this.cost;
228 |     }
229 |     return -1;
230 |   };
231 | 
232 | 
233 |   /** @class Achievement
234 |    */
235 |   var Achievement = function(obj) {
236 |     GameObject.apply(this, [obj]);
237 |     this.state.timeAchieved = null;
238 |   };
239 | 
240 |   Achievement.prototype = Object.create(GameObject.prototype);
241 | 
242 |   Achievement.prototype.validate = function(lab, allObjects, saveTime) {
243 |     if (this.state.timeAchieved) {
244 |       return true;
245 |     }
246 |     if (allObjects.hasOwnProperty(this.targetKey) &&
247 |         allObjects[this.targetKey].state.hasOwnProperty(this.targetProperty) &&
248 |         allObjects[this.targetKey].state[this.targetProperty] >= this.threshold) {
249 |       this.state.timeAchieved = lab.state.time + new Date().getTime() - saveTime;
250 |       UI.showAchievement(this);
251 |       return true;
252 |     }
253 |     return false;
254 |   };
255 | 
256 |   Achievement.prototype.isAchieved = function() {
257 |     if (this.state.timeAchieved) {
258 |       return true;
259 |     } else {
260 |       return false;
261 |     }
262 |   };
263 | 
264 | 
265 |   // Expose classes in module.
266 |   return {
267 |     Lab: Lab,
268 |     Research: Research,
269 |     Worker: Worker,
270 |     Upgrade: Upgrade,
271 |     Achievement: Achievement
272 |   };
273 | }());

# File: js/helpers.js

 1 | /** @module Helpers
 2 |  * Define some useful helpers that are used throughout the game.
 3 |  */
 4 | var Helpers = (function () {
 5 |   'use strict';
 6 |   /** Load a file (usually JSON).
 7 |    */
 8 |   var loadFile = function (filename) {
 9 |     var res;
10 |     $.ajax({
11 |       async: false,
12 |       url : filename,
13 |       success : function(data) {
14 |         res = data;
15 |       }
16 |     });
17 |     return res;
18 |   };
19 | 
20 |   /** Format a number with proper postfix.
21 |    */
22 |   var formatNumberPostfix = function (number) {
23 |     if (typeof number !== "number") {
24 |       return 0;
25 |     }
26 | 
27 |     var prefixes = [
28 |       { magnitude: 1e24, label: 'Y' },
29 |       { magnitude: 1e21, label: 'Z' },
30 |       { magnitude: 1e18, label: 'E' },
31 |       { magnitude: 1e15, label: 'P' },
32 |       { magnitude: 1e12, label: 'T' },
33 |       { magnitude:  1e9, label: 'B' },
34 |       { magnitude:  1e6, label: 'M' },
35 |       { magnitude:  1e3, label: 'k' }
36 |     ];
37 | 
38 |     var abs = Math.abs(number);
39 |     for (var i = 0; i < prefixes.length; i++) {
40 |       if (abs >= prefixes[i].magnitude) {
41 |         return (number / prefixes[i].magnitude).toFixed(1) + prefixes[i].label;
42 |       }
43 |     }
44 |     return number; 
45 |   }
46 | 
47 |   var formatTime = function (msec) {
48 |     var totals = Math.ceil(msec / 1000);
49 |     var days = Math.floor(totals / (24 * 60 * 60));
50 |     var hours = Math.floor((totals % (24 * 60 * 60)) / (60 * 60));
51 |     var totalmin = (totals % (24 * 60 * 60)) % (60 * 60);
52 |     var mins = Math.floor(totalmin / 60);
53 |     var secs = totalmin % 60;
54 | 
55 |     var str = [];
56 |     if (days > 0) {
57 |       str.push(days + ' day' + (days % 100 == 1 ? '' : 's'));
58 |     }
59 |     if (hours > 0) {
60 |       str.push(hours + ' h');
61 |     }
62 |     if (mins > 0) {
63 |       str.push(mins + ' min');
64 |     }
65 |     if (secs > 0) {
66 |       str.push(secs + ' s');
67 |     }
68 | 
69 |     return str.join(', ');
70 |   };
71 | 
72 |   var saveVersion =  '1.0';
73 |   var validateSaveVersion = function () {
74 |     var ver = ObjectStorage.load('saveVersion');
75 |     if (typeof ver === 'undefined' || ver != saveVersion) {
76 |       ObjectStorage.clear();
77 |       ObjectStorage.save('saveVersion', saveVersion);
78 |     }
79 |   };
80 |  
81 |   return {
82 |     loadFile: loadFile,
83 |     formatNumberPostfix: formatNumberPostfix,
84 |     formatTime: formatTime,
85 |     validateSaveVersion: validateSaveVersion,
86 |     analytics: ''
87 |   };
88 | })();

# File: js/histogram.js

  1 | 
  2 | function draw_hist(ident, vals) {
  3 | 
  4 |     // A formatter for counts.
  5 |     var formatCount = d3.format(",0d");
  6 | 
  7 |     var margin = {top: 10, right: 30, bottom: 30, left: 30},
  8 |         width = 400 - margin.left - margin.right,
  9 |         height = 200 - margin.top - margin.bottom;
 10 | 
 11 |     var x = d3.scale.linear()
 12 |         .domain([-5, 5])
 13 |         .range([0, width]);
 14 | 
 15 |     // Generate a histogram using twenty uniformly-spaced bins.
 16 |     var data = d3.layout.histogram()
 17 |         .bins(x.ticks(20))
 18 |         (vals);
 19 | 
 20 |     var y = d3.scale.linear()
 21 |         .domain([0, d3.max(data, function(d) { return d.y + Math.sqrt(d.y); })])
 22 |         .range([height, 0]);
 23 | 
 24 |     correction = y(0);
 25 | 
 26 |     var xAxis = d3.svg.axis()
 27 |         .scale(x)
 28 |         .ticks(3)
 29 |         .tickFormat(function(d) { return '';})
 30 |         .orient("bottom");
 31 | 
 32 |     var yAxis = d3.svg.axis()
 33 |         .scale(y)
 34 |         .ticks(4)
 35 |         //.tickFormat(function(d) { return ''; })
 36 |         .orient("left");
 37 | 
 38 |     var svg = d3.select(ident).append("svg")
 39 |         .attr("width", width + margin.left + margin.right)
 40 |         .attr("height", height + margin.top + margin.bottom)
 41 |       .append("g")
 42 |         .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
 43 | 
 44 |     var bar = svg.selectAll(".bar")
 45 |         .data(data)
 46 |         .enter().append("svg:circle")
 47 |         .attr("stroke", "black")
 48 |         .attr("fill", function(d, i) { return "black" })
 49 |         .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; })
 50 |         .attr("r", function(d, i) { return 1 });
 51 | 
 52 |     svg.selectAll(".bar")
 53 |         .data(data)
 54 |         .enter().append("svg:line")
 55 |         .attr("x1", 0)
 56 |         .attr("x2", 0)
 57 |         .attr("y1", function(d) { return y(Math.sqrt(d.y))-correction; })
 58 |         .attr("y2", function(d) { return -y(Math.sqrt(d.y))+correction; })
 59 |         .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; })
 60 |         .attr("stroke", "black")
 61 |         .attr("stroke-width", 1)
 62 | 
 63 |     svg.selectAll(".bar")
 64 |         .data(data)
 65 |         .enter().append("svg:line")
 66 |         .attr("x1", -2)
 67 |         .attr("x2", 2)
 68 |         .attr("y1", function(d) { return y(Math.sqrt(d.y))-correction; })
 69 |         .attr("y2", function(d) { return y(Math.sqrt(d.y))-correction; })
 70 |         .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; })
 71 |         .attr("stroke", "black")
 72 |         .attr("stroke-width", 1)
 73 | 
 74 |     svg.selectAll(".bar")
 75 |         .data(data)
 76 |         .enter().append("svg:line")
 77 |         .attr("x1", -2)
 78 |         .attr("x2", 2)
 79 |         .attr("y1", function(d) { return -y(Math.sqrt(d.y))+correction; })
 80 |         .attr("y2", function(d) { return -y(Math.sqrt(d.y))+correction; })
 81 |         .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; })
 82 |         .attr("stroke", "black")
 83 |         .attr("stroke-width", 1)
 84 | 
 85 |     bar.append("rect")
 86 |         .attr("x", 1)
 87 |         .attr("width", x(data[0].dx))
 88 |         .attr("height", function(d) { return height - y(d.y); });
 89 | 
 90 |     svg.append("g")
 91 |         .attr("class", "x axis")
 92 |         .attr("transform", "translate(0," + (height ) + ")")
 93 |         .call(xAxis);
 94 | 
 95 |     svg.append("text")
 96 |         .attr("class", "x label")
 97 |         .attr("text-anchor", "end")
 98 |         .attr("x", width)
 99 |         .attr("y", height + 20)
100 |         .text("m (GeV)");
101 | 
102 |     svg.append("g")
103 |         .attr("class", "y axis")
104 |         .attr("transform", "translate(0, 0)")
105 |         .call(yAxis);
106 | 
107 |     svg.append("text")
108 |         .attr("class", "y label")
109 |         .attr("text-anchor", "end")
110 |         .attr("y", -20)
111 |         .attr("dy", "-1em")
112 |         .attr("dx", "-0.5em")
113 |         .attr("transform", "rotate(-90)")
114 |         .text("events");
115 | 
116 |     return svg;
117 | }
118 | 
119 | function Histogram(ident) {
120 |     // TODO: Allow for arbitrary numbers of events
121 |     this.values = [];
122 |     draw_hist(ident, []);
123 | 
124 |     this.add_events = function(num) {
125 |         var new_vals = d3.range(num).map(d3.random.normal(0, 1));
126 |         this.values = $.merge(this.values, new_vals);
127 |         d3.select(ident).select("svg").remove();
128 |         draw_hist(ident, this.values);
129 |     }
130 | 
131 |     this.clear = function() {
132 |         d3.select(ident).select("svg").remove();
133 |         this.values = [];
134 |         draw_hist(ident, []);
135 |     }
136 | }
137 | 

# File: js/storage.js

 1 | /** Allows to save objects to HTML5 local storage.
 2 |  * However, it can only save properties, not functions.
 3 |  */
 4 | var ObjectStorage = (function() {
 5 |   'use strict';
 6 |   try {
 7 |     var _s = localStorage;
 8 |     return {
 9 |       save :
10 |           function(key, item) {
11 |             _s.setItem(key, JSON.stringify(item, function(key, val) {
12 |                               if (key == '$$hashKey') {
13 |                                 return undefined;
14 |                               }
15 |                               return val;
16 |                             }));
17 |           },
18 |       load : function(key) { return JSON.parse(_s.getItem(key)); },
19 |       clear : function() { _s.clear(); }
20 |     };
21 |   } catch (e) {
22 |     alert('There is no local storage for you.' +
23 |           ' If you refresh the page, all progress will be lost');
24 |     return {
25 |       save : function(key, item) {},
26 |       load : function(key) { return null; },
27 |       clear : function() {}
28 |     };
29 |   };
30 | }());

# File: js/ui.js

  1 | 'use strict';
  2 | 
  3 | /** Define UI specific stuff.
  4 |  */
  5 | var UI = (function () {
  6 |   /** Resize the scrollable containers and make sure they are resized whenever
  7 |    * the window is resized.
  8 |    * Also introduce FastClick for faster clicking on mobile.
  9 |    */
 10 |   $(function() {
 11 |     FastClick.attach(document.body);    
 12 |     
 13 |     var resize = function() {
 14 |       var h = $(window).height();
 15 |       var offset = 111;
 16 |       if ($(window).width() < 992) {
 17 |         offset = 112;
 18 |       }
 19 |       $('.scrollable').height(h - offset + 'px');
 20 | 
 21 |       var types = ['research', 'hr', 'upgrades'];
 22 | 
 23 |       if ($(window).width() < 992) {
 24 |         for (var i = 0; i < types.length; i++) {
 25 |           if ($('#' + types[i] + 'Content').parent().attr('id') == types[i] + 'Large') {
 26 |             $('#' + types[i] + 'Content').detach().appendTo('#' + types[i]);
 27 |           }
 28 |         }
 29 |       } else {
 30 |         for (var i = 0; i < types.length; i++) {
 31 |           if ($('#' + types[i] + 'Content').parent().attr('id') != types[i] + 'Large') {
 32 |             $('#' + types[i] + 'Content').detach().appendTo('#' + types[i] + 'Large');
 33 |           }
 34 |         }
 35 |       }
 36 | 
 37 |       if ($(window).width() < 600) {
 38 |         var newWidth = Math.max($(window).width() - ($(window).height() - 90 + 10), 300);
 39 |         $('#column-lab').width($(window).width() - newWidth);
 40 |         $('#column-tabs').width(newWidth);
 41 |       } else {
 42 |         $('#column-lab').removeAttr('style');
 43 |         $('#column-tabs').removeAttr('style');
 44 |       }
 45 | 
 46 |       if ($(window).width() >= 1200) {
 47 |         if (detector.width != 500) {
 48 |           $('#detector').width(500).height(500);
 49 |           detector.init(500);
 50 |         }
 51 |       } else if ($(window).width() < 768 && $(window).height() - 90 < 300) {
 52 |         var newWidth = $(window).width() - Math.max($(window).width() - ($(window).height() - 90 + 10), 300) - 10;
 53 |         if (detector.width != newWidth) {
 54 |           $('#detector').width(newWidth).height(newWidth);
 55 |           detector.init(newWidth);
 56 |         }
 57 |       } else if ($(window).width() < 992) {
 58 |         if (detector.width != 300) {
 59 |           $('#detector').width(300).height(300);
 60 |           detector.init(300);
 61 |         }
 62 |       } else {
 63 |         if (detector.width != 400) {
 64 |           $('#detector').width(400).height(400);
 65 |           detector.init(400);
 66 |         }
 67 |       }
 68 |     }
 69 |     
 70 |     $(window).resize(resize);
 71 |     resize();
 72 |   });
 73 | 
 74 |   /** Show a bootstrap modal with dynamic content. */
 75 |   var showModal = function(title, text, level) {
 76 |     var $modal = $('#infoBox');
 77 |     $modal.find('#infoBoxLabel').html(title);
 78 |     $modal.find('.modal-body').html(text);
 79 |     $modal.modal({show: true});
 80 |   };
 81 | 
 82 |   /** Display only the elements with data-min-level above a certain
 83 |    * threshold.
 84 |    */
 85 |   var showLevels = function(level) {
 86 |     $('#infoBox').find('[data-min-level]').each(function() {
 87 |       if (level >= $(this).data('min-level')) {
 88 |         $(this).show();
 89 |       } else {
 90 |         $(this).hide();
 91 |       }
 92 |     });
 93 |   };
 94 | 
 95 |   var showUpdateValue = function(ident, num) {
 96 |     if (num != 0) {
 97 |       var formatted = Helpers.formatNumberPostfix(num);
 98 |       var insert;
 99 |       if (num > 0) {
100 |         insert = $("<div></div>")
101 |                   .attr("class", "update-plus")
102 |                   .html("+" + formatted);
103 |       } else {
104 |         insert = $("<div></div>")
105 |                   .attr("class", "update-minus")
106 |                   .html(formatted);
107 |       }
108 |       showUpdate(ident, insert);
109 |     }
110 |   }
111 | 
112 |   var showUpdate = function(ident, insert) {
113 |     var elem = $(ident);
114 |     elem.append(insert);
115 |     insert.animate({
116 |       "bottom":"+=30px",
117 |       "opacity": 0
118 |     }, { duration: 500, complete: function() {
119 |       $(this).remove();
120 |     }});
121 |   }
122 | 
123 |   var showAchievement = function(obj) {
124 |     var alert = '<div class="alert alert-success alert-dismissible" role="alert">';
125 |     alert += '<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>';
126 |     alert += '<span class="fa ' + obj.icon + ' alert-glyph"></span> <span class="alert-text">' + obj.description + '</span>';
127 |     alert += '</div>';
128 | 
129 |     alert = $(alert);
130 | 
131 |     $('#achievements-container').prepend(alert);
132 |     var remove = function(a)
133 |     {
134 |       return function()
135 |       {
136 |         a.slideUp(300, function() { a.remove(); });
137 |       };
138 |     };
139 | 
140 |     window.setTimeout(remove(alert), 2000);
141 |   }
142 | 
143 |   if (typeof $.cookie('cookielaw') === 'undefined') {
144 |     var alert = '<div id="cookielaw" class="alert alert-info" role="alert">';
145 |     alert += '<button type="button" class="btn btn-primary">OK</button>';
146 |     alert += '<i class="fa fa-info-circle alert-glyph"></i> <span class="alert-text">Particle Clicker uses local storage to store your current progress.</span>';
147 |     alert += '</div>';
148 |     alert = $(alert);
149 |     alert.find('button').click(function ()
150 |     {
151 |       $.cookie('cookielaw', 'informed', { expires: 365 });
152 |       $('#cookielaw').slideUp(300, function() { $('#cookielaw').remove(); });
153 |     })
154 | 
155 |     $('#messages-container').append(alert);
156 |   }
157 | 
158 |   if (typeof $.cookie('cern60') === 'undefined') {
159 |     var alert = '<div id="cern60" class="alert alert-info" role="alert">';
160 |     alert += '<button type="button" class="btn btn-primary">Close</button>';
161 |     alert += '<i class="fa fa-area-chart alert-glyph"></i> <span class="alert-text"><a class="alert-link" href="http://home.web.cern.ch/about/updates/2014/12/take-part-cern-60-public-computing-challenge" target="_blank">Join the CERN 60 computing challenge!</a></span>';
162 |     alert += '</div>';
163 |     alert = $(alert);
164 |     alert.find('button').click(function ()
165 |     {
166 |       $.cookie('cern60', 'closed', { expires: 365 });
167 |       $('#cern60').slideUp(300, function() { $('#cern60').remove(); });
168 |     })
169 | 
170 |     $('#messages-container').append(alert);
171 |   }
172 | 
173 |   return {
174 |     showAchievement: showAchievement,
175 |     showModal: showModal,
176 |     showLevels: showLevels,
177 |     showUpdateValue: showUpdateValue
178 |   }
179 | })();
180 | 
181 | 
182 | // I don't know what this is for, so I leave it here for the moment...
183 | (function() {
184 |     var hidden = "hidden";
185 | 
186 |     // Standards:
187 |     if (hidden in document)
188 |         document.addEventListener("visibilitychange", onchange);
189 |     else if ((hidden = "mozHidden") in document)
190 |         document.addEventListener("mozvisibilitychange", onchange);
191 |     else if ((hidden = "webkitHidden") in document)
192 |         document.addEventListener("webkitvisibilitychange", onchange);
193 |     else if ((hidden = "msHidden") in document)
194 |         document.addEventListener("msvisibilitychange", onchange);
195 |     // IE 9 and lower:
196 |     else if ('onfocusin' in document)
197 |         document.onfocusin = document.onfocusout = onchange;
198 |     // All others:
199 |     else
200 |         window.onpageshow = window.onpagehide 
201 |             = window.onfocus = window.onblur = onchange;
202 | 
203 |     function onchange (evt) {
204 |         var v = 'visible', h = 'hidden',
205 |             evtMap = { 
206 |                 focus:v, focusin:v, pageshow:v, blur:h, focusout:h, pagehide:h 
207 |             };
208 | 
209 |         evt = evt || window.event;
210 |         if (evt.type in evtMap)
211 |             detector.visible = evtMap[evt.type] == 'visible';
212 |         else        
213 |             detector.visible = !this[hidden];
214 |     }
215 | })();

# File: json/achievements.json

  1 | [
  2 |   {
  3 |     "description": "CP violation discovery!",
  4 |     "icon": "fa-cogs",
  5 |     "key": "achievement-research-cpv-1",
  6 |     "threshold": 1,
  7 |     "targetKey": "research-cpv",
  8 |     "targetProperty": "level"
  9 |   },
 10 |   {
 11 |     "description": "J/\u03c8 discovery!",
 12 |     "icon": "fa-cogs",
 13 |     "key": "achievement-research-jpsi-1",
 14 |     "threshold": 1,
 15 |     "targetKey": "research-jpsi",
 16 |     "targetProperty": "level"
 17 |   },
 18 |   {
 19 |     "description": "\u03c4 lepton discovery!",
 20 |     "icon": "fa-cogs",
 21 |     "key": "achievement-research-tau-1",
 22 |     "threshold": 1,
 23 |     "targetKey": "research-tau",
 24 |     "targetProperty": "level"
 25 |   },
 26 |   {
 27 |     "description": "Beauty quark discovery!",
 28 |     "icon": "fa-cogs",
 29 |     "key": "achievement-research-beauty-1",
 30 |     "threshold": 1,
 31 |     "targetKey": "research-beauty",
 32 |     "targetProperty": "level"
 33 |   },
 34 |   {
 35 |     "description": "Gluons discovery!",
 36 |     "icon": "fa-cogs",
 37 |     "key": "achievement-research-gluons-1",
 38 |     "threshold": 1,
 39 |     "targetKey": "research-gluons",
 40 |     "targetProperty": "level"
 41 |   },
 42 |   {
 43 |     "description": "W and Z boson discovery!",
 44 |     "icon": "fa-cogs",
 45 |     "key": "achievement-research-weak-1",
 46 |     "threshold": 1,
 47 |     "targetKey": "research-weak",
 48 |     "targetProperty": "level"
 49 |   },
 50 |   {
 51 |     "description": "Top quark discovery!",
 52 |     "icon": "fa-cogs",
 53 |     "key": "achievement-research-top-1",
 54 |     "threshold": 1,
 55 |     "targetKey": "research-top",
 56 |     "targetProperty": "level"
 57 |   },
 58 |   {
 59 |     "description": "B oscillation discovery!",
 60 |     "icon": "fa-cogs",
 61 |     "key": "achievement-research-boscillations-1",
 62 |     "threshold": 1,
 63 |     "targetKey": "research-boscillations",
 64 |     "targetProperty": "level"
 65 |   },
 66 |   {
 67 |     "description": "Higgs boson discovery!",
 68 |     "icon": "fa-cogs",
 69 |     "key": "achievement-research-higgs-1",
 70 |     "threshold": 1,
 71 |     "targetKey": "research-higgs",
 72 |     "targetProperty": "level"
 73 |   },
 74 |   {
 75 |     "description": "D*s\u207b discovery!",
 76 |     "icon": "fa-cogs",
 77 |     "key": "achievement-research-dstars-1",
 78 |     "threshold": 1,
 79 |     "targetKey": "research-dstars",
 80 |     "targetProperty": "level"
 81 |   },
 82 |   {
 83 |     "description": "\u039eb'- and \u039eb*- discovery!",
 84 |     "icon": "fa-cogs",
 85 |     "key": "achievement-research-xib-1",
 86 |     "threshold": 1,
 87 |     "targetKey": "research-xib",
 88 |     "targetProperty": "level"
 89 |   },
 90 |   {
 91 |     "description": "CP violation research level 5!",
 92 |     "icon": "fa-cogs",
 93 |     "key": "achievement-research-cpv-5",
 94 |     "targetProperty": "level",
 95 |     "targetKey": "research-cpv",
 96 |     "threshold": 5
 97 |   },
 98 |   {
 99 |     "description": "CP violation research level 25!",
100 |     "icon": "fa-cogs",
101 |     "key": "achievement-research-cpv-25",
102 |     "targetProperty": "level",
103 |     "targetKey": "research-cpv",
104 |     "threshold": 25
105 |   },
106 |   {
107 |     "description": "CP violation research level 50!",
108 |     "icon": "fa-cogs",
109 |     "key": "achievement-research-cpv-50",
110 |     "targetProperty": "level",
111 |     "targetKey": "research-cpv",
112 |     "threshold": 50
113 |   },
114 |   {
115 |     "description": "CP violation research level 100!",
116 |     "icon": "fa-cogs",
117 |     "key": "achievement-research-cpv-100",
118 |     "targetProperty": "level",
119 |     "targetKey": "research-cpv",
120 |     "threshold": 100
121 |   },
122 |   {
123 |     "description": "J/\u03c8 research level 5!",
124 |     "icon": "fa-cogs",
125 |     "key": "achievement-research-jpsi-5",
126 |     "targetProperty": "level",
127 |     "targetKey": "research-jpsi",
128 |     "threshold": 5
129 |   },
130 |   {
131 |     "description": "J/\u03c8 research level 25!",
132 |     "icon": "fa-cogs",
133 |     "key": "achievement-research-jpsi-25",
134 |     "targetProperty": "level",
135 |     "targetKey": "research-jpsi",
136 |     "threshold": 25
137 |   },
138 |   {
139 |     "description": "J/\u03c8 research level 50!",
140 |     "icon": "fa-cogs",
141 |     "key": "achievement-research-jpsi-50",
142 |     "targetProperty": "level",
143 |     "targetKey": "research-jpsi",
144 |     "threshold": 50
145 |   },
146 |   {
147 |     "description": "J/\u03c8 research level 100!",
148 |     "icon": "fa-cogs",
149 |     "key": "achievement-research-jpsi-100",
150 |     "targetProperty": "level",
151 |     "targetKey": "research-jpsi",
152 |     "threshold": 100
153 |   },
154 |   {
155 |     "description": "\u03c4 lepton research level 5!",
156 |     "icon": "fa-cogs",
157 |     "key": "achievement-research-tau-5",
158 |     "targetProperty": "level",
159 |     "targetKey": "research-tau",
160 |     "threshold": 5
161 |   },
162 |   {
163 |     "description": "\u03c4 lepton research level 25!",
164 |     "icon": "fa-cogs",
165 |     "key": "achievement-research-tau-25",
166 |     "targetProperty": "level",
167 |     "targetKey": "research-tau",
168 |     "threshold": 25
169 |   },
170 |   {
171 |     "description": "\u03c4 lepton research level 50!",
172 |     "icon": "fa-cogs",
173 |     "key": "achievement-research-tau-50",
174 |     "targetProperty": "level",
175 |     "targetKey": "research-tau",
176 |     "threshold": 50
177 |   },
178 |   {
179 |     "description": "\u03c4 lepton research level 100!",
180 |     "icon": "fa-cogs",
181 |     "key": "achievement-research-tau-100",
182 |     "targetProperty": "level",
183 |     "targetKey": "research-tau",
184 |     "threshold": 100
185 |   },
186 |   {
187 |     "description": "Beauty quark research level 5!",
188 |     "icon": "fa-cogs",
189 |     "key": "achievement-research-beauty-5",
190 |     "targetProperty": "level",
191 |     "targetKey": "research-beauty",
192 |     "threshold": 5
193 |   },
194 |   {
195 |     "description": "Beauty quark research level 25!",
196 |     "icon": "fa-cogs",
197 |     "key": "achievement-research-beauty-25",
198 |     "targetProperty": "level",
199 |     "targetKey": "research-beauty",
200 |     "threshold": 25
201 |   },
202 |   {
203 |     "description": "Beauty quark research level 50!",
204 |     "icon": "fa-cogs",
205 |     "key": "achievement-research-beauty-50",
206 |     "targetProperty": "level",
207 |     "targetKey": "research-beauty",
208 |     "threshold": 50
209 |   },
210 |   {
211 |     "description": "Beauty quark research level 100!",
212 |     "icon": "fa-cogs",
213 |     "key": "achievement-research-beauty-100",
214 |     "targetProperty": "level",
215 |     "targetKey": "research-beauty",
216 |     "threshold": 100
217 |   },
218 |   {
219 |     "description": "Gluons research level 5!",
220 |     "icon": "fa-cogs",
221 |     "key": "achievement-research-gluons-5",
222 |     "targetProperty": "level",
223 |     "targetKey": "research-gluons",
224 |     "threshold": 5
225 |   },
226 |   {
227 |     "description": "Gluons research level 25!",
228 |     "icon": "fa-cogs",
229 |     "key": "achievement-research-gluons-25",
230 |     "targetProperty": "level",
231 |     "targetKey": "research-gluons",
232 |     "threshold": 25
233 |   },
234 |   {
235 |     "description": "Gluons research level 50!",
236 |     "icon": "fa-cogs",
237 |     "key": "achievement-research-gluons-50",
238 |     "targetProperty": "level",
239 |     "targetKey": "research-gluons",
240 |     "threshold": 50
241 |   },
242 |   {
243 |     "description": "Gluons research level 100!",
244 |     "icon": "fa-cogs",
245 |     "key": "achievement-research-gluons-100",
246 |     "targetProperty": "level",
247 |     "targetKey": "research-gluons",
248 |     "threshold": 100
249 |   },
250 |   {
251 |     "description": "W and Z boson research level 5!",
252 |     "icon": "fa-cogs",
253 |     "key": "achievement-research-weak-5",
254 |     "targetProperty": "level",
255 |     "targetKey": "research-weak",
256 |     "threshold": 5
257 |   },
258 |   {
259 |     "description": "W and Z boson research level 25!",
260 |     "icon": "fa-cogs",
261 |     "key": "achievement-research-weak-25",
262 |     "targetProperty": "level",
263 |     "targetKey": "research-weak",
264 |     "threshold": 25
265 |   },
266 |   {
267 |     "description": "W and Z boson research level 50!",
268 |     "icon": "fa-cogs",
269 |     "key": "achievement-research-weak-50",
270 |     "targetProperty": "level",
271 |     "targetKey": "research-weak",
272 |     "threshold": 50
273 |   },
274 |   {
275 |     "description": "W and Z boson research level 100!",
276 |     "icon": "fa-cogs",
277 |     "key": "achievement-research-weak-100",
278 |     "targetProperty": "level",
279 |     "targetKey": "research-weak",
280 |     "threshold": 100
281 |   },
282 |   {
283 |     "description": "Top quark research level 5!",
284 |     "icon": "fa-cogs",
285 |     "key": "achievement-research-top-5",
286 |     "targetProperty": "level",
287 |     "targetKey": "research-top",
288 |     "threshold": 5
289 |   },
290 |   {
291 |     "description": "Top quark research level 25!",
292 |     "icon": "fa-cogs",
293 |     "key": "achievement-research-top-25",
294 |     "targetProperty": "level",
295 |     "targetKey": "research-top",
296 |     "threshold": 25
297 |   },
298 |   {
299 |     "description": "Top quark research level 50!",
300 |     "icon": "fa-cogs",
301 |     "key": "achievement-research-top-50",
302 |     "targetProperty": "level",
303 |     "targetKey": "research-top",
304 |     "threshold": 50
305 |   },
306 |   {
307 |     "description": "Top quark research level 100!",
308 |     "icon": "fa-cogs",
309 |     "key": "achievement-research-top-100",
310 |     "targetProperty": "level",
311 |     "targetKey": "research-top",
312 |     "threshold": 100
313 |   },
314 |   {
315 |     "description": "B oscillation research level 5!",
316 |     "icon": "fa-cogs",
317 |     "key": "achievement-research-boscillations-5",
318 |     "targetProperty": "level",
319 |     "targetKey": "research-boscillations",
320 |     "threshold": 5
321 |   },
322 |   {
323 |     "description": "B oscillation research level 25!",
324 |     "icon": "fa-cogs",
325 |     "key": "achievement-research-boscillations-25",
326 |     "targetProperty": "level",
327 |     "targetKey": "research-boscillations",
328 |     "threshold": 25
329 |   },
330 |   {
331 |     "description": "B oscillation research level 50!",
332 |     "icon": "fa-cogs",
333 |     "key": "achievement-research-boscillations-50",
334 |     "targetProperty": "level",
335 |     "targetKey": "research-boscillations",
336 |     "threshold": 50
337 |   },
338 |   {
339 |     "description": "B oscillation research level 100!",
340 |     "icon": "fa-cogs",
341 |     "key": "achievement-research-boscillations-100",
342 |     "targetProperty": "level",
343 |     "targetKey": "research-boscillations",
344 |     "threshold": 100
345 |   },
346 |   {
347 |     "description": "Higgs boson research level 5!",
348 |     "icon": "fa-cogs",
349 |     "key": "achievement-research-higgs-5",
350 |     "targetProperty": "level",
351 |     "targetKey": "research-higgs",
352 |     "threshold": 5
353 |   },
354 |   {
355 |     "description": "Higgs boson research level 25!",
356 |     "icon": "fa-cogs",
357 |     "key": "achievement-research-higgs-25",
358 |     "targetProperty": "level",
359 |     "targetKey": "research-higgs",
360 |     "threshold": 25
361 |   },
362 |   {
363 |     "description": "Higgs boson research level 50!",
364 |     "icon": "fa-cogs",
365 |     "key": "achievement-research-higgs-50",
366 |     "targetProperty": "level",
367 |     "targetKey": "research-higgs",
368 |     "threshold": 50
369 |   },
370 |   {
371 |     "description": "Higgs boson research level 100!",
372 |     "icon": "fa-cogs",
373 |     "key": "achievement-research-higgs-100",
374 |     "targetProperty": "level",
375 |     "targetKey": "research-higgs",
376 |     "threshold": 100
377 |   },
378 |   {
379 |     "description": "D*s\u207b research level 5!",
380 |     "icon": "fa-cogs",
381 |     "key": "achievement-research-dstars-5",
382 |     "targetProperty": "level",
383 |     "targetKey": "research-dstars",
384 |     "threshold": 5
385 |   },
386 |   {
387 |     "description": "D*s\u207b research level 25!",
388 |     "icon": "fa-cogs",
389 |     "key": "achievement-research-dstars-25",
390 |     "targetProperty": "level",
391 |     "targetKey": "research-dstars",
392 |     "threshold": 25
393 |   },
394 |   {
395 |     "description": "D*s\u207b research level 50!",
396 |     "icon": "fa-cogs",
397 |     "key": "achievement-research-dstars-50",
398 |     "targetProperty": "level",
399 |     "targetKey": "research-dstars",
400 |     "threshold": 50
401 |   },
402 |   {
403 |     "description": "D*s\u207b research level 100!",
404 |     "icon": "fa-cogs",
405 |     "key": "achievement-research-dstars-100",
406 |     "targetProperty": "level",
407 |     "targetKey": "research-dstars",
408 |     "threshold": 100
409 |   },
410 |   {
411 |     "description": "\u039eb'- and \u039eb*- research level 5!",
412 |     "icon": "fa-cogs",
413 |     "key": "achievement-research-xib-5",
414 |     "targetProperty": "level",
415 |     "targetKey": "research-xib",
416 |     "threshold": 5
417 |   },
418 |   {
419 |     "description": "\u039eb'- and \u039eb*- research level 25!",
420 |     "icon": "fa-cogs",
421 |     "key": "achievement-research-xib-25",
422 |     "targetProperty": "level",
423 |     "targetKey": "research-xib",
424 |     "threshold": 25
425 |   },
426 |   {
427 |     "description": "\u039eb'- and \u039eb*- research level 50!",
428 |     "icon": "fa-cogs",
429 |     "key": "achievement-research-xib-50",
430 |     "targetProperty": "level",
431 |     "targetKey": "research-xib",
432 |     "threshold": 50
433 |   },
434 |   {
435 |     "description": "\u039eb'- and \u039eb*- research level 100!",
436 |     "icon": "fa-cogs",
437 |     "key": "achievement-research-xib-100",
438 |     "targetProperty": "level",
439 |     "targetKey": "research-xib",
440 |     "threshold": 100
441 |   },
442 |   {
443 |     "description": "The first Master Students hired!",
444 |     "icon": "fa-user",
445 |     "key": "achievement-workers-masterstudents-1",
446 |     "threshold": 1,
447 |     "targetKey": "workers-masterstudents",
448 |     "targetProperty": "hired"
449 |   },
450 |   {
451 |     "description": "The first PhD Students hired!",
452 |     "icon": "fa-user",
453 |     "key": "achievement-workers-phdstudents-1",
454 |     "threshold": 1,
455 |     "targetKey": "workers-phdstudents",
456 |     "targetProperty": "hired"
457 |   },
458 |   {
459 |     "description": "The first Postdocs hired!",
460 |     "icon": "fa-user",
461 |     "key": "achievement-workers-postdocs-1",
462 |     "threshold": 1,
463 |     "targetKey": "workers-postdocs",
464 |     "targetProperty": "hired"
465 |   },
466 |   {
467 |     "description": "The first Research Fellows hired!",
468 |     "icon": "fa-user",
469 |     "key": "achievement-workers-fellows-1",
470 |     "threshold": 1,
471 |     "targetKey": "workers-fellows",
472 |     "targetProperty": "hired"
473 |   },
474 |   {
475 |     "description": "The first Permanent Staff hired!",
476 |     "icon": "fa-user",
477 |     "key": "achievement-workers-permanent-1",
478 |     "threshold": 1,
479 |     "targetKey": "workers-permanent",
480 |     "targetProperty": "hired"
481 |   },
482 |   {
483 |     "description": "The first Tenured Professors hired!",
484 |     "icon": "fa-user",
485 |     "key": "achievement-workers-profs-1",
486 |     "threshold": 1,
487 |     "targetKey": "workers-profs",
488 |     "targetProperty": "hired"
489 |   },
490 |   {
491 |     "description": "The first Nobel Laureates hired!",
492 |     "icon": "fa-user",
493 |     "key": "achievement-workers-nobel-1",
494 |     "threshold": 1,
495 |     "targetKey": "workers-nobel",
496 |     "targetProperty": "hired"
497 |   },
498 |   {
499 |     "description": "The first Summer Students hired!",
500 |     "icon": "fa-user",
501 |     "key": "achievement-workers-summies-1",
502 |     "threshold": 1,
503 |     "targetKey": "workers-summies",
504 |     "targetProperty": "hired"
505 |   },
506 |   {
507 |     "description": "5 Master Students working for you!",
508 |     "icon": "fa-users",
509 |     "key": "achievement-workers-masterstudents-5",
510 |     "targetProperty": "hired",
511 |     "targetKey": "workers-masterstudents",
512 |     "threshold": 5
513 |   },
514 |   {
515 |     "description": "25 Master Students working for you!",
516 |     "icon": "fa-users",
517 |     "key": "achievement-workers-masterstudents-25",
518 |     "targetProperty": "hired",
519 |     "targetKey": "workers-masterstudents",
520 |     "threshold": 25
521 |   },
522 |   {
523 |     "description": "50 Master Students working for you!",
524 |     "icon": "fa-users",
525 |     "key": "achievement-workers-masterstudents-50",
526 |     "targetProperty": "hired",
527 |     "targetKey": "workers-masterstudents",
528 |     "threshold": 50
529 |   },
530 |   {
531 |     "description": "100 Master Students working for you!",
532 |     "icon": "fa-users",
533 |     "key": "achievement-workers-masterstudents-100",
534 |     "targetProperty": "hired",
535 |     "targetKey": "workers-masterstudents",
536 |     "threshold": 100
537 |   },
538 |   {
539 |     "description": "5 PhD Students working for you!",
540 |     "icon": "fa-users",
541 |     "key": "achievement-workers-phdstudents-5",
542 |     "targetProperty": "hired",
543 |     "targetKey": "workers-phdstudents",
544 |     "threshold": 5
545 |   },
546 |   {
547 |     "description": "25 PhD Students working for you!",
548 |     "icon": "fa-users",
549 |     "key": "achievement-workers-phdstudents-25",
550 |     "targetProperty": "hired",
551 |     "targetKey": "workers-phdstudents",
552 |     "threshold": 25
553 |   },
554 |   {
555 |     "description": "50 PhD Students working for you!",
556 |     "icon": "fa-users",
557 |     "key": "achievement-workers-phdstudents-50",
558 |     "targetProperty": "hired",
559 |     "targetKey": "workers-phdstudents",
560 |     "threshold": 50
561 |   },
562 |   {
563 |     "description": "100 PhD Students working for you!",
564 |     "icon": "fa-users",
565 |     "key": "achievement-workers-phdstudents-100",
566 |     "targetProperty": "hired",
567 |     "targetKey": "workers-phdstudents",
568 |     "threshold": 100
569 |   },
570 |   {
571 |     "description": "5 Postdocs working for you!",
572 |     "icon": "fa-users",
573 |     "key": "achievement-workers-postdocs-5",
574 |     "targetProperty": "hired",
575 |     "targetKey": "workers-postdocs",
576 |     "threshold": 5
577 |   },
578 |   {
579 |     "description": "25 Postdocs working for you!",
580 |     "icon": "fa-users",
581 |     "key": "achievement-workers-postdocs-25",
582 |     "targetProperty": "hired",
583 |     "targetKey": "workers-postdocs",
584 |     "threshold": 25
585 |   },
586 |   {
587 |     "description": "50 Postdocs working for you!",
588 |     "icon": "fa-users",
589 |     "key": "achievement-workers-postdocs-50",
590 |     "targetProperty": "hired",
591 |     "targetKey": "workers-postdocs",
592 |     "threshold": 50
593 |   },
594 |   {
595 |     "description": "100 Postdocs working for you!",
596 |     "icon": "fa-users",
597 |     "key": "achievement-workers-postdocs-100",
598 |     "targetProperty": "hired",
599 |     "targetKey": "workers-postdocs",
600 |     "threshold": 100
601 |   },
602 |   {
603 |     "description": "5 Research Fellows working for you!",
604 |     "icon": "fa-users",
605 |     "key": "achievement-workers-fellows-5",
606 |     "targetProperty": "hired",
607 |     "targetKey": "workers-fellows",
608 |     "threshold": 5
609 |   },
610 |   {
611 |     "description": "25 Research Fellows working for you!",
612 |     "icon": "fa-users",
613 |     "key": "achievement-workers-fellows-25",
614 |     "targetProperty": "hired",
615 |     "targetKey": "workers-fellows",
616 |     "threshold": 25
617 |   },
618 |   {
619 |     "description": "50 Research Fellows working for you!",
620 |     "icon": "fa-users",
621 |     "key": "achievement-workers-fellows-50",
622 |     "targetProperty": "hired",
623 |     "targetKey": "workers-fellows",
624 |     "threshold": 50
625 |   },
626 |   {
627 |     "description": "100 Research Fellows working for you!",
628 |     "icon": "fa-users",
629 |     "key": "achievement-workers-fellows-100",
630 |     "targetProperty": "hired",
631 |     "targetKey": "workers-fellows",
632 |     "threshold": 100
633 |   },
634 |   {
635 |     "description": "5 Permanent Staff working for you!",
636 |     "icon": "fa-users",
637 |     "key": "achievement-workers-permanent-5",
638 |     "targetProperty": "hired",
639 |     "targetKey": "workers-permanent",
640 |     "threshold": 5
641 |   },
642 |   {
643 |     "description": "25 Permanent Staff working for you!",
644 |     "icon": "fa-users",
645 |     "key": "achievement-workers-permanent-25",
646 |     "targetProperty": "hired",
647 |     "targetKey": "workers-permanent",
648 |     "threshold": 25
649 |   },
650 |   {
651 |     "description": "50 Permanent Staff working for you!",
652 |     "icon": "fa-users",
653 |     "key": "achievement-workers-permanent-50",
654 |     "targetProperty": "hired",
655 |     "targetKey": "workers-permanent",
656 |     "threshold": 50
657 |   },
658 |   {
659 |     "description": "100 Permanent Staff working for you!",
660 |     "icon": "fa-users",
661 |     "key": "achievement-workers-permanent-100",
662 |     "targetProperty": "hired",
663 |     "targetKey": "workers-permanent",
664 |     "threshold": 100
665 |   },
666 |   {
667 |     "description": "5 Tenured Professors working for you!",
668 |     "icon": "fa-users",
669 |     "key": "achievement-workers-profs-5",
670 |     "targetProperty": "hired",
671 |     "targetKey": "workers-profs",
672 |     "threshold": 5
673 |   },
674 |   {
675 |     "description": "25 Tenured Professors working for you!",
676 |     "icon": "fa-users",
677 |     "key": "achievement-workers-profs-25",
678 |     "targetProperty": "hired",
679 |     "targetKey": "workers-profs",
680 |     "threshold": 25
681 |   },
682 |   {
683 |     "description": "50 Tenured Professors working for you!",
684 |     "icon": "fa-users",
685 |     "key": "achievement-workers-profs-50",
686 |     "targetProperty": "hired",
687 |     "targetKey": "workers-profs",
688 |     "threshold": 50
689 |   },
690 |   {
691 |     "description": "100 Tenured Professors working for you!",
692 |     "icon": "fa-users",
693 |     "key": "achievement-workers-profs-100",
694 |     "targetProperty": "hired",
695 |     "targetKey": "workers-profs",
696 |     "threshold": 100
697 |   },
698 |   {
699 |     "description": "5 Nobel Laureates working for you!",
700 |     "icon": "fa-users",
701 |     "key": "achievement-workers-nobel-5",
702 |     "targetProperty": "hired",
703 |     "targetKey": "workers-nobel",
704 |     "threshold": 5
705 |   },
706 |   {
707 |     "description": "25 Nobel Laureates working for you!",
708 |     "icon": "fa-users",
709 |     "key": "achievement-workers-nobel-25",
710 |     "targetProperty": "hired",
711 |     "targetKey": "workers-nobel",
712 |     "threshold": 25
713 |   },
714 |   {
715 |     "description": "50 Nobel Laureates working for you!",
716 |     "icon": "fa-users",
717 |     "key": "achievement-workers-nobel-50",
718 |     "targetProperty": "hired",
719 |     "targetKey": "workers-nobel",
720 |     "threshold": 50
721 |   },
722 |   {
723 |     "description": "100 Nobel Laureates working for you!",
724 |     "icon": "fa-users",
725 |     "key": "achievement-workers-nobel-100",
726 |     "targetProperty": "hired",
727 |     "targetKey": "workers-nobel",
728 |     "threshold": 100
729 |   },
730 |   {
731 |     "description": "5 Summer Students working for you!",
732 |     "icon": "fa-users",
733 |     "key": "achievement-workers-summies-5",
734 |     "targetProperty": "hired",
735 |     "targetKey": "workers-summies",
736 |     "threshold": 5
737 |   },
738 |   {
739 |     "description": "25 Summer Students working for you!",
740 |     "icon": "fa-users",
741 |     "key": "achievement-workers-summies-25",
742 |     "targetProperty": "hired",
743 |     "targetKey": "workers-summies",
744 |     "threshold": 25
745 |   },
746 |   {
747 |     "description": "50 Summer Students working for you!",
748 |     "icon": "fa-users",
749 |     "key": "achievement-workers-summies-50",
750 |     "targetProperty": "hired",
751 |     "targetKey": "workers-summies",
752 |     "threshold": 50
753 |   },
754 |   {
755 |     "description": "100 Summer Students working for you!",
756 |     "icon": "fa-users",
757 |     "key": "achievement-workers-summies-100",
758 |     "targetProperty": "hired",
759 |     "targetKey": "workers-summies",
760 |     "threshold": 100
761 |   },
762 |   {
763 |     "description": "Your first click!",
764 |     "icon": "fa-hand-o-up",
765 |     "key": "achievement-clicks-1",
766 |     "threshold": 1,
767 |     "targetKey": "lab",
768 |     "targetProperty": "clicks"
769 |   },
770 |   {
771 |     "description": "100 clicks!",
772 |     "icon": "fa-hand-o-up",
773 |     "key": "achievement-clicks-100",
774 |     "targetProperty": "clicks",
775 |     "targetKey": "lab",
776 |     "threshold": 100
777 |   },
778 |   {
779 |     "description": "1k clicks!",
780 |     "icon": "fa-hand-o-up",
781 |     "key": "achievement-clicks-1k",
782 |     "targetProperty": "clicks",
783 |     "targetKey": "lab",
784 |     "threshold": 1000
785 |   },
786 |   {
787 |     "description": "10k clicks!",
788 |     "icon": "fa-hand-o-up",
789 |     "key": "achievement-clicks-10k",
790 |     "targetProperty": "clicks",
791 |     "targetKey": "lab",
792 |     "threshold": 10000
793 |   },
794 |   {
795 |     "description": "100k clicks!",
796 |     "icon": "fa-hand-o-up",
797 |     "key": "achievement-clicks-100k",
798 |     "targetProperty": "clicks",
799 |     "targetKey": "lab",
800 |     "threshold": 100000
801 |   },
802 |   {
803 |     "description": "1M clicks!",
804 |     "icon": "fa-hand-o-up",
805 |     "key": "achievement-clicks-1M",
806 |     "targetProperty": "clicks",
807 |     "targetKey": "lab",
808 |     "threshold": 1000000
809 |   },
810 |   {
811 |     "description": "100 data collected!",
812 |     "icon": "fa-database",
813 |     "key": "achievement-data-collected-100",
814 |     "targetProperty": "dataCollected",
815 |     "targetKey": "lab",
816 |     "threshold": 100
817 |   },
818 |   {
819 |     "description": "10k data collected!",
820 |     "icon": "fa-database",
821 |     "key": "achievement-data-collected-10k",
822 |     "targetProperty": "dataCollected",
823 |     "targetKey": "lab",
824 |     "threshold": 10000
825 |   },
826 |   {
827 |     "description": "1M data collected!",
828 |     "icon": "fa-database",
829 |     "key": "achievement-data-collected-1M",
830 |     "targetProperty": "dataCollected",
831 |     "targetKey": "lab",
832 |     "threshold": 1000000
833 |   },
834 |   {
835 |     "description": "100M data collected!",
836 |     "icon": "fa-database",
837 |     "key": "achievement-data-collected-100M",
838 |     "targetProperty": "dataCollected",
839 |     "targetKey": "lab",
840 |     "threshold": 100000000
841 |   },
842 |   {
843 |     "description": "10G data collected!",
844 |     "icon": "fa-database",
845 |     "key": "achievement-data-collected-10G",
846 |     "targetProperty": "dataCollected",
847 |     "targetKey": "lab",
848 |     "threshold": 10000000000
849 |   },
850 |   {
851 |     "description": "JTN 100 funding gathered!",
852 |     "icon": "fa-money",
853 |     "key": "achievement-funding-collected-100",
854 |     "targetProperty": "moneyCollected",
855 |     "targetKey": "lab",
856 |     "threshold": 100
857 |   },
858 |   {
859 |     "description": "JTN 10k funding gathered!",
860 |     "icon": "fa-money",
861 |     "key": "achievement-funding-collected-10k",
862 |     "targetProperty": "moneyCollected",
863 |     "targetKey": "lab",
864 |     "threshold": 10000
865 |   },
866 |   {
867 |     "description": "JTN 1M funding gathered!",
868 |     "icon": "fa-money",
869 |     "key": "achievement-funding-collected-1M",
870 |     "targetProperty": "moneyCollected",
871 |     "targetKey": "lab",
872 |     "threshold": 1000000
873 |   },
874 |   {
875 |     "description": "JTN 100M funding gathered!",
876 |     "icon": "fa-money",
877 |     "key": "achievement-funding-collected-100M",
878 |     "targetProperty": "moneyCollected",
879 |     "targetKey": "lab",
880 |     "threshold": 100000000
881 |   },
882 |   {
883 |     "description": "JTN 10G funding gathered!",
884 |     "icon": "fa-money",
885 |     "key": "achievement-funding-collected-10G",
886 |     "targetProperty": "moneyCollected",
887 |     "targetKey": "lab",
888 |     "threshold": 10000000000
889 |   },
890 |   {
891 |     "description": "100 data processed!",
892 |     "icon": "fa-hdd",
893 |     "key": "achievement-data-processed-100",
894 |     "targetProperty": "dataSpent",
895 |     "targetKey": "lab",
896 |     "threshold": 100
897 |   },
898 |   {
899 |     "description": "10k data processed!",
900 |     "icon": "fa-hdd",
901 |     "key": "achievement-data-processed-10k",
902 |     "targetProperty": "dataSpent",
903 |     "targetKey": "lab",
904 |     "threshold": 10000
905 |   },
906 |   {
907 |     "description": "1M data processed!",
908 |     "icon": "fa-hdd",
909 |     "key": "achievement-data-processed-1M",
910 |     "targetProperty": "dataSpent",
911 |     "targetKey": "lab",
912 |     "threshold": 1000000
913 |   },
914 |   {
915 |     "description": "100M data processed!",
916 |     "icon": "fa-hdd",
917 |     "key": "achievement-data-processed-100M",
918 |     "targetProperty": "dataSpent",
919 |     "targetKey": "lab",
920 |     "threshold": 100000000
921 |   },
922 |   {
923 |     "description": "10G data processed!",
924 |     "icon": "fa-hdd",
925 |     "key": "achievement-data-processed-10G",
926 |     "targetProperty": "dataSpent",
927 |     "targetKey": "lab",
928 |     "threshold": 10000000000
929 |   },
930 |   {
931 |     "description": "JTN 100 funding spent!",
932 |     "icon": "fa-money",
933 |     "key": "achievement-funding-spent-100",
934 |     "targetProperty": "moneySpent",
935 |     "targetKey": "lab",
936 |     "threshold": 100
937 |   },
938 |   {
939 |     "description": "JTN 10k funding spent!",
940 |     "icon": "fa-money",
941 |     "key": "achievement-funding-spent-10k",
942 |     "targetProperty": "moneySpent",
943 |     "targetKey": "lab",
944 |     "threshold": 10000
945 |   },
946 |   {
947 |     "description": "JTN 1M funding spent!",
948 |     "icon": "fa-money",
949 |     "key": "achievement-funding-spent-1M",
950 |     "targetProperty": "moneySpent",
951 |     "targetKey": "lab",
952 |     "threshold": 1000000
953 |   },
954 |   {
955 |     "description": "JTN 100M funding spent!",
956 |     "icon": "fa-money",
957 |     "key": "achievement-funding-spent-100M",
958 |     "targetProperty": "moneySpent",
959 |     "targetKey": "lab",
960 |     "threshold": 100000000
961 |   },
962 |   {
963 |     "description": "JTN 10G funding spent!",
964 |     "icon": "fa-money",
965 |     "key": "achievement-funding-spent-10G",
966 |     "targetProperty": "moneySpent",
967 |     "targetKey": "lab",
968 |     "threshold": 10000000000
969 |   }
970 | ]

# File: json/research.json

  1 | [
  2 |   {
  3 |     "key": "research-cpv",
  4 |     "name": "CP violation",
  5 |     "description": "CP symmetry is broken!",
  6 |     "cost_increase": 1.8,
  7 |     "image": "assets/icons/png/CPV.png",
  8 |     "info": "html/CPV.html",
  9 |     "state": {
 10 |       "reputation": 1e0,
 11 |       "cost": 1e1,
 12 |       "info_levels": [ 1, 5, 10, 15, 20 ]
 13 |     }
 14 |   },
 15 |   {
 16 |     "key": "research-jpsi",
 17 |     "name": "J/ψ",
 18 |     "description": "The J/ψ meson consists of a c and an anti-c quark.",
 19 |     "cost_increase": 1.7,
 20 |     "image": "assets/icons/png/Jpsi.png",
 21 |     "info": "html/Jpsi.html",
 22 |     "state": {
 23 |       "reputation": 6e0,
 24 |       "cost": 4e2,
 25 |       "info_levels": [ 1, 5 ]
 26 |     }
 27 |   },
 28 |   {
 29 |     "key": "research-tau",
 30 |     "name": "τ lepton",
 31 |     "description": "The third generation charged lepton.",
 32 |     "cost_increase": 1.6,
 33 |     "image": "assets/icons/png/tau.png",
 34 |     "info": "html/tau.html",
 35 |     "state": {
 36 |       "reputation": 3.3e1,
 37 |       "cost": 1e4,
 38 |       "info_levels": [ 1, 5 ]
 39 |     }
 40 |   },
 41 |   {
 42 |     "key": "research-beauty",
 43 |     "name": "Beauty quark",
 44 |     "description": "The third generation down-type quark.",
 45 |     "cost_increase": 1.5,
 46 |     "image": "assets/icons/png/b.png",
 47 |     "info": "html/b.html",
 48 |     "state": {
 49 |       "reputation": 1.85e2,
 50 |       "cost": 2e5,
 51 |       "info_levels": [ 1, 5 ]
 52 |     }
 53 |   },
 54 |     {
 55 |     "key": "research-gluons",
 56 |     "name": "Gluons",
 57 |     "description": "8 almost identical elementary particles that convey the strong force.",
 58 |     "cost_increase": 1.4,
 59 |     "image": "assets/icons/png/gluons.png",
 60 |     "info": "html/gluons.html",
 61 |     "state": {
 62 |       "reputation": 1e3,
 63 |       "cost": 3e6,
 64 |       "info_levels": [ 1 ]
 65 |     }
 66 |   },
 67 |   {
 68 |     "key": "research-weak",
 69 |     "name": "W and Z boson",
 70 |     "description": "The carriers of the weak force.",
 71 |     "cost_increase": 1.35,
 72 |     "image": "assets/icons/png/weak.png",
 73 |     "info": "html/weak.html",
 74 |     "state": {
 75 |       "reputation": 5.4e3,
 76 |       "cost": 3.2e7,
 77 |       "info_levels": [ 1 ]
 78 |     }
 79 |   },
 80 |   {
 81 |     "key": "research-top",
 82 |     "name": "Top quark",
 83 |     "description": "The heaviest of the quarks.",
 84 |     "cost_increase": 1.3,
 85 |     "image": "assets/icons/png/t.png",
 86 |     "info": "html/top.html",
 87 |     "state": {
 88 |       "reputation": 3e4,
 89 |       "cost": 1.28e8,
 90 |       "info_levels": [ 1 ]
 91 |     }
 92 |   },
 93 |   {
 94 |     "key": "research-boscillations",
 95 |     "name": "B oscillation",
 96 |     "description": "B mesons turn into their antiparticles and vice versa!",
 97 |     "cost_increase": 1.25,
 98 |     "image": "assets/icons/png/BBbar.png",
 99 |     "info": "html/BBbar.html",
100 |     "state": {
101 |       "reputation": 1.6e5,
102 |       "cost": 9e8,
103 |       "info_levels": [ 1 ]
104 |     }
105 |   },
106 |   {
107 |     "key": "research-higgs",
108 |     "name": "Higgs boson",
109 |     "description": "It only took us 48 years to find this one!",
110 |     "cost_increase": 1.2,
111 |     "image": "assets/icons/png/H.png",
112 |     "info": "html/H.html",
113 |     "state": {
114 |       "reputation": 9e5,
115 |       "cost": 5e9,
116 |       "info_levels": [ 1, 5, 10, 15, 20 ]
117 |     }
118 |   },
119 |   {
120 |     "key": "research-dstars",
121 |     "name": "D*s⁻",
122 |     "description": "The first ever observed heavy flavored spin-3 particle.",
123 |     "cost_increase": 1.15,
124 |     "image": "assets/icons/png/Dstar_s.png",
125 |     "info": "html/Dstar_s.html",
126 |     "state": {
127 |       "reputation": 4.75e6,
128 |       "cost": 2.4e10,
129 |       "info_levels": [ 1 ]
130 |     }
131 |   },
132 |   {
133 |     "key": "research-xib",
134 |     "name": "Ξb'- and Ξb*-",
135 |     "description": "Recently discovered strange beauty baryons. Both differ only in their spin configurations.",
136 |     "cost_increase": 1.15,
137 |     "image": "assets/icons/png/Xi_b.png",
138 |     "info": "html/Xi_b.html",
139 |     "state": {
140 |       "reputation": 2.5e7,
141 |       "cost": 9e10,
142 |       "info_levels": [ 1 ]
143 |     }
144 |   }
145 | ]

# File: json/upgrades.json

  1 | [
  2 |   {
  3 |     "key": "upgrade-masterstudents1",
  4 |     "name": "Kinderzimmer",
  5 |     "description": "A shared room for all your Master students. Used to be a server room.",
  6 |     "effect": "Master Students produce +2 data per second.",
  7 |     "icon": "fa-group",
  8 |     "cost": 4e2,
  9 |     "targets": [{ "key": "workers-masterstudents", "property": "rate" }],
 10 |     "requirements": [{ "key": "workers-masterstudents", "property": "hired", "threshold": 5 }],
 11 |     "constant": 2
 12 |   },
 13 |   {
 14 |     "key": "upgrade-masterstudents2",
 15 |     "name": "Own desk",
 16 |     "description": "Not having to share one is a blessing.",
 17 |     "effect": "Master Students produce twice as much data per second.",
 18 |     "icon": "fa-group",
 19 |     "cost": 4e3,
 20 |     "targets": [{ "key": "workers-masterstudents", "property": "rate" }],
 21 |     "requirements": [
 22 |       { "key": "upgrade-masterstudents1", "property": "used", "threshold": 1 },
 23 |       { "key": "workers-phdstudents", "property": "hired", "threshold": 1 }
 24 |     ],
 25 |     "factor": 2
 26 |   },
 27 |   {
 28 |     "key": "upgrade-masterstudents3",
 29 |     "name": "Grid Access",
 30 |     "description": "Give your Master students access to high performance computing resources.",
 31 |     "effect": "Master Students produce twice as much data per second.",
 32 |     "icon": "fa-group",
 33 |     "cost": 4e4,
 34 |     "targets": [{ "key": "workers-masterstudents", "property": "rate" }],
 35 |     "requirements": [{ "key": "upgrade-masterstudents2", "property": "used", "threshold": 1 }],
 36 |     "factor": 2
 37 |   },
 38 |   {
 39 |     "key": "upgrade-masterstudents4",
 40 |     "name": "Mentoring",
 41 |     "description": "Weekly counseling with a professional physicist.",
 42 |     "effect": "Master Students produce twice as much data per second.",
 43 |     "icon": "fa-group",
 44 |     "cost": 4e5,
 45 |     "targets": [{ "key": "workers-masterstudents", "property": "rate" }],
 46 |     "requirements": [{ "key": "upgrade-masterstudents3", "property": "used", "threshold": 1 }],
 47 |     "factor": 2
 48 |   },
 49 |   {
 50 |     "key": "upgrade-phdstudents1",
 51 |     "name": "Thesis supervision",
 52 |     "description": "Somebody takes care of your PhD Students.",
 53 |     "effect": "PhD Students produce +16 data per second.",
 54 |     "icon": "fa-group",
 55 |     "cost": 6e3,
 56 |     "targets": [{ "key": "workers-phdstudents", "property": "rate" }],
 57 |     "requirements": [{ "key": "workers-phdstudents", "property": "hired", "threshold": 5 }],
 58 |     "constant": 16
 59 |   },
 60 |   {
 61 |     "key": "upgrade-phdstudents2",
 62 |     "name": "Own office",
 63 |     "description": "Each PhD student gets a quiet place for themselves.",
 64 |     "effect": "PhD Students produce twice as much data per second.",
 65 |     "icon": "fa-group",
 66 |     "cost": 6e4,
 67 |     "targets": [{ "key": "workers-phdstudents", "property": "rate" }],
 68 |     "requirements": [{ "key": "upgrade-phdstudents1", "property": "used", "threshold": 1 }],
 69 |     "factor": 2
 70 |   },
 71 |   {
 72 |     "key": "upgrade-phdstudents3",
 73 |     "name": "Research Abroad",
 74 |     "description": "1 year of research stay abroad for your PhD students.",
 75 |     "effect": "PhD Students produce twice as much data per second.",
 76 |     "icon": "fa-group",
 77 |     "cost": 6e5,
 78 |     "targets": [{ "key": "workers-phdstudents", "property": "rate" }],
 79 |     "requirements": [{ "key": "upgrade-phdstudents2", "property": "used", "threshold": 1 }],
 80 |     "factor": 2
 81 |   },
 82 |   {
 83 |     "key": "upgrade-phdstudents4",
 84 |     "name": "Student Assistant",
 85 |     "description": "A personal assistant that takes care of boring tasks.",
 86 |     "effect": "PhD Students produce twice as much data per second.",
 87 |     "icon": "fa-group",
 88 |     "cost": 6e6,
 89 |     "targets": [{ "key": "workers-phdstudents", "property": "rate" }],
 90 |     "requirements": [{ "key": "upgrade-phdstudents3", "property": "used", "threshold": 1 }],
 91 |     "factor": 2
 92 |   },
 93 |   {
 94 |     "key": "upgrade-postdocs1",
 95 |     "name": "Project Management Seminar",
 96 |     "description": "Hard work also requires soft skills.",
 97 |     "effect": "Postdocs produce +50 data per second.",
 98 |     "icon": "fa-group",
 99 |     "cost": 7.5e4,
100 |     "targets": [{ "key": "workers-postdocs", "property": "rate" }],
101 |     "requirements": [{ "key": "workers-postdocs", "property": "hired", "threshold": 5 }],
102 |     "constant": 50
103 |   },
104 |   {
105 |     "key": "upgrade-postdocs2",
106 |     "name": "Higher Travel Allowances",
107 |     "description": "Let your Postdocs go to more conferences.",
108 |     "effect": "Postdocs produce twice as much data per second.",
109 |     "icon": "fa-group",
110 |     "cost": 7.5e5,
111 |     "targets": [{ "key": "workers-postdocs", "property": "rate" }],
112 |     "requirements": [{ "key": "upgrade-postdocs1", "property": "used", "threshold": 1 }],
113 |     "factor": 2
114 |   },
115 |   {
116 |     "key": "upgrade-postdocs3",
117 |     "name": "Teaching-free year",
118 |     "description": "A year without teaching means more productivity.",
119 |     "effect": "Postdocs produce twice as much data per second.",
120 |     "icon": "fa-group",
121 |     "cost": 7.5e6,
122 |     "targets": [{ "key": "workers-postdocs", "property": "rate" }],
123 |     "requirements": [{ "key": "upgrade-postdocs2", "property": "used", "threshold": 1 }],
124 |     "factor": 2
125 |   },
126 |   {
127 |     "key": "upgrade-postdocs4",
128 |     "name": "Job security",
129 |     "description": "You wish...",
130 |     "effect": "Postdocs produce twice as much data per second.",
131 |     "icon": "fa-group",
132 |     "cost": 7.5e7,
133 |     "targets": [{ "key": "workers-postdocs", "property": "rate" }],
134 |     "requirements": [{ "key": "upgrade-postdocs3", "property": "used", "threshold": 1 }],
135 |     "factor": 2
136 |   },
137 |   {
138 |     "key": "upgrade-fellows1",
139 |     "name": "Video Meetings",
140 |     "description": "Participate but also get work done.",
141 |     "effect": "Fellows produce +4k data per second.",
142 |     "icon": "fa-group",
143 |     "cost": 6e5,
144 |     "targets": [{ "key": "workers-fellows", "property": "rate" }],
145 |     "requirements": [{ "key": "workers-fellows", "property": "hired", "threshold": 5 }],
146 |     "constant": 4e3
147 |   },
148 |   {
149 |     "key": "upgrade-fellows2",
150 |     "name": "An Extra Year",
151 |     "description": "Extend your Fellow's contracts.",
152 |     "effect": "Fellows produce twice as much data per second.",
153 |     "icon": "fa-group",
154 |     "cost": 6e6,
155 |     "targets": [{ "key": "workers-fellows", "property": "rate" }],
156 |     "requirements": [{ "key": "upgrade-fellows1", "property": "used", "threshold": 1 }],
157 |     "factor": 2
158 |   },
159 |   {
160 |     "key": "upgrade-fellows3",
161 |     "name": "External Funding",
162 |     "description": "Your Fellows are happier and you don't have to pay for it. Excellent!",
163 |     "effect": "Fellows produce twice as much data per second.",
164 |     "icon": "fa-group",
165 |     "cost": 6e7,
166 |     "targets": [{ "key": "workers-fellows", "property": "rate" }],
167 |     "requirements": [{ "key": "upgrade-fellows2", "property": "used", "threshold": 1 }],
168 |     "factor": 2
169 |   },
170 |   {
171 |     "key": "upgrade-fellows4",
172 |     "name": "Pet Cat",
173 |     "description": "Makes sure your Fellows go home at one point and eventually get some rest.",
174 |     "effect": "Fellows produce twice as much data per second.",
175 |     "icon": "fa-group",
176 |     "cost": 6e8,
177 |     "targets": [{ "key": "workers-fellows", "property": "rate" }],
178 |     "requirements": [{ "key": "upgrade-fellows3", "property": "used", "threshold": 1 }],
179 |     "factor": 2
180 |   },
181 |   {
182 |     "key": "upgrade-permanent1",
183 |     "name": "Daycare",
184 |     "description": "Someone to take care of your staff's children.",
185 |     "effect": "Permanent staff produces +20k data per second.",
186 |     "icon": "fa-group",
187 |     "cost": 6.5e6,
188 |     "targets": [{ "key": "workers-permanent", "property": "rate" }],
189 |     "requirements": [{ "key": "workers-permanent", "property": "hired", "threshold": 5 }],
190 |     "constant": 2e4
191 |   },
192 |   {
193 |     "key": "upgrade-permanent2",
194 |     "name": "Company Car",
195 |     "description": "Let your Staff use cars you pay for.",
196 |     "effect": "Permanent staff produces twice as much data per second.",
197 |     "icon": "fa-group",
198 |     "cost": 6.5e7,
199 |     "targets": [{ "key": "workers-permanent", "property": "rate" }],
200 |     "requirements": [{ "key": "upgrade-permanent1", "property": "used", "threshold": 1 }],
201 |     "factor": 2
202 |   },
203 |   {
204 |     "key": "upgrade-permanent3",
205 |     "name": "Leadership Seminar",
206 |     "description": "Teach your Permanent Staff some people skills.",
207 |     "effect": "Permanent staff produces twice as much data per second.",
208 |     "icon": "fa-group",
209 |     "cost": 6.5e8,
210 |     "targets": [{ "key": "workers-permanent", "property": "rate" }],
211 |     "requirements": [{ "key": "upgrade-permanent2", "property": "used", "threshold": 1 }],
212 |     "factor": 2
213 |   },
214 |   {
215 |     "key": "upgrade-permanent4",
216 |     "name": "Office close to the Coffee Machine",
217 |     "description": "Coffee => Productivity. Simple.",
218 |     "effect": "Permanent staff produces twice as much data per second.",
219 |     "icon": "fa-group",
220 |     "cost": 6.5e9,
221 |     "targets": [{ "key": "workers-permanent", "property": "rate" }],
222 |     "requirements": [{ "key": "upgrade-permanent3", "property": "used", "threshold": 1 }],
223 |     "factor": 2
224 |   },
225 |   {
226 |     "key": "upgrade-profs1",
227 |     "name": "More TAs",
228 |     "description": "Hire extra teaching assistants to take work off your professors' shoulders.",
229 |     "effect": "Professors produce +300k data per second.",
230 |     "icon": "fa-group",
231 |     "cost": 5e7,
232 |     "targets": [{ "key": "workers-profs", "property": "rate" }],
233 |     "requirements": [{ "key": "workers-profs", "property": "hired", "threshold": 5 }],
234 |     "constant": 3e5
235 |   },
236 |   {
237 |     "key": "upgrade-profs2",
238 |     "name": "Extra Secretary",
239 |     "description": "Secretaries have to do a lot of work at University. It's good to have them!",
240 |     "effect": "Professors produce twice as much data per second.",
241 |     "icon": "fa-group",
242 |     "cost": 5e8,
243 |     "targets": [{ "key": "workers-profs", "property": "rate" }],
244 |     "requirements": [{ "key": "upgrade-profs1", "property": "used", "threshold": 1 }],
245 |     "factor": 2
246 |   },
247 |   {
248 |     "key": "upgrade-profs3",
249 |     "name": "Sabbatical",
250 |     "description": "Professors take a year off teaching to be more productive.",
251 |     "effect": "Professors produce twice as much data per second.",
252 |     "icon": "fa-group",
253 |     "cost": 5e9,
254 |     "targets": [{ "key": "workers-profs", "property": "rate" }],
255 |     "requirements": [{ "key": "upgrade-profs2", "property": "used", "threshold": 1 }],
256 |     "factor": 2
257 |   },
258 |   {
259 |     "key": "upgrade-profs4",
260 |     "name": "Online Courses",
261 |     "description": "Record once, use often. No more useless time spent in lectures.",
262 |     "effect": "Professors produce twice as much data per second.",
263 |     "icon": "fa-group",
264 |     "cost": 5e10,
265 |     "targets": [{ "key": "workers-profs", "property": "rate" }],
266 |     "requirements": [{ "key": "upgrade-profs3", "property": "used", "threshold": 1 }],
267 |     "factor": 2
268 |   },
269 |   {
270 |     "key": "upgrade-nobel1",
271 |     "name": "Kötbullar",
272 |     "description": "Delicious Swedish Meatballs that are (probably) served at the Nobel Prize ceremony.",
273 |     "effect": "Nobel Laureates produce +3M data per second.",
274 |     "icon": "fa-group",
275 |     "cost": 3e8,
276 |     "targets": [{ "key": "workers-nobel", "property": "rate" }],
277 |     "requirements": [{ "key": "workers-nobel", "property": "hired", "threshold": 5 }],
278 |     "constant": 3e6
279 |   },
280 |   {
281 |     "key": "upgrade-nobel2",
282 |     "name": "Street Names",
283 |     "description": "Name the streets at your facility after Nobel Laureates.",
284 |     "effect": "Nobel Laureates produce twice as much data per second.",
285 |     "icon": "fa-group",
286 |     "cost": 3e9,
287 |     "targets": [{ "key": "workers-nobel", "property": "rate" }],
288 |     "requirements": [{ "key": "upgrade-nobel1", "property": "used", "threshold": 1 }],
289 |     "factor": 2
290 |   },
291 |   {
292 |     "key": "upgrade-nobel3",
293 |     "name": "Summer Vacation",
294 |     "description": "At this point in their career your Nobel Laureates can afford to take a vacation once in a while.",
295 |     "effect": "Nobel Laureates produce twice as much data per second.",
296 |     "icon": "fa-group",
297 |     "cost": 3e10,
298 |     "targets": [{ "key": "workers-nobel", "property": "rate" }],
299 |     "requirements": [{ "key": "upgrade-nobel2", "property": "used", "threshold": 1 }],
300 |     "factor": 2
301 |   },
302 |   {
303 |     "key": "upgrade-nobel4",
304 |     "name": "Second Nobel Prize",
305 |     "description": "Only Marie Curie and John Bardeen received such high honours in Physics.",
306 |     "effect": "Nobel Laureates produce twice as much data per second.",
307 |     "icon": "fa-group",
308 |     "cost": 3e11,
309 |     "targets": [{ "key": "workers-nobel", "property": "rate" }],
310 |     "requirements": [{ "key": "upgrade-nobel3", "property": "used", "threshold": 1 }],
311 |     "factor": 2
312 |   },
313 |   {
314 |     "key": "upgrade-summies1",
315 |     "name": "Summer Lectures",
316 |     "description": "Interesting lectures given by the best in the field.",
317 |     "effect": "Summer Students produce +80M data per second.",
318 |     "icon": "fa-group",
319 |     "cost": 2e9,
320 |     "targets": [{ "key": "workers-summies", "property": "rate" }],
321 |     "requirements": [{ "key": "workers-summies", "property": "hired", "threshold": 5 }],
322 |     "constant": 8e7
323 |   },
324 |   {
325 |     "key": "upgrade-summies2",
326 |     "name": "Poster Sessions",
327 |     "description": "Have your Summies prepare interesting posters and explain them to their peers.",
328 |     "effect": "Summer Students produce twice as much data per second.",
329 |     "icon": "fa-group",
330 |     "cost": 2e10,
331 |     "targets": [{ "key": "workers-summies", "property": "rate" }],
332 |     "requirements": [{ "key": "upgrade-summies1", "property": "used", "threshold": 1 }],
333 |     "factor": 2
334 |   },
335 |   {
336 |     "key": "upgrade-summies3",
337 |     "name": "Barbecue",
338 |     "description": "A nice get-together to increase morale in the group.",
339 |     "effect": "Summer Students produce twice as much data per second.",
340 |     "icon": "fa-group",
341 |     "cost": 2e11,
342 |     "targets": [{ "key": "workers-summies", "property": "rate" }],
343 |     "requirements": [{ "key": "upgrade-summies2", "property": "used", "threshold": 1 }],
344 |     "factor": 2
345 |   },
346 |   {
347 |     "key": "upgrade-summies4",
348 |     "name": "Pump Hall Parties",
349 |     "description": "Awesome parties in the CERN pump hall. Sure the hangover does not increase productivity but your morale gets a huge boost.",
350 |     "effect": "Summer Students produce twice as much data per second.",
351 |     "icon": "fa-group",
352 |     "cost": 2e12,
353 |     "targets": [{ "key": "workers-summies", "property": "rate" }],
354 |     "requirements": [{ "key": "upgrade-summies3", "property": "used", "threshold": 1 }],
355 |     "factor": 2
356 |   },
357 |   {
358 |     "key": "upgrade-coffee",
359 |     "name": "Free coffee",
360 |     "description": "Addictively delicious. Also free.",
361 |     "effect": "All workers produce twice as much data per second.",
362 |     "icon": "fa-coffee",
363 |     "cost": 8e10,
364 |     "targets": [
365 |       { "key": "workers-phdstudents", "property": "rate" },
366 |       { "key": "workers-postdocs", "property": "rate" },
367 |       { "key": "workers-fellows", "property": "rate" },
368 |       { "key": "workers-permanent", "property": "rate" },
369 |       { "key": "workers-profs", "property": "rate" },
370 |       { "key": "workers-nobel", "property": "rate" },
371 |       { "key": "workers-summies", "property": "rate" }
372 |     ],
373 |     "requirements": [
374 |       { "key": "workers-phdstudents", "property": "hired", "threshold": 1 },
375 |       { "key": "workers-postdocs", "property": "hired", "threshold": 1 },
376 |       { "key": "workers-fellows", "property": "hired", "threshold": 1 },
377 |       { "key": "workers-permanent", "property": "hired", "threshold": 1 },
378 |       { "key": "workers-profs", "property": "hired", "threshold": 1 },
379 |       { "key": "workers-nobel", "property": "hired", "threshold": 1 },
380 |       { "key": "workers-summies", "property": "hired", "threshold": 1 }
381 |     ],
382 |     "factor": 2
383 |   },
384 |   {
385 |     "key": "upgrade-energy1",
386 |     "name": "√s = 1.4 GeV",
387 |     "description": "Increased centre-of-mass energy.",
388 |     "effect": "Double the amount of data per click.",
389 |     "icon": "fa-bolt",
390 |     "cost": 2e2,
391 |     "targets": [{ "key": "lab", "property": "detector" }],
392 |     "requirements": [],
393 |     "factor": 2
394 |   },
395 |   {
396 |     "key": "upgrade-energy2",
397 |     "name": "√s = 28 GeV",
398 |     "description": "Increased centre-of-mass energy.",
399 |     "effect": "Double the amount of data per click.",
400 |     "icon": "fa-bolt",
401 |     "cost": 2e3,
402 |     "targets": [{ "key": "lab", "property": "detector" }],
403 |     "requirements": [{ "key": "upgrade-energy1", "property": "used", "threshold": 1 }],
404 |     "factor": 2
405 |   },
406 |   {
407 |     "key": "upgrade-energy3",
408 |     "name": "√s = 45 GeV",
409 |     "description": "Increased centre-of-mass energy.",
410 |     "effect": "Double the amount of data per click.",
411 |     "icon": "fa-bolt",
412 |     "cost": 2e4,
413 |     "targets": [{ "key": "lab", "property": "detector" }],
414 |     "requirements": [{ "key": "upgrade-energy2", "property": "used", "threshold": 1 }],
415 |     "factor": 2
416 |   },
417 |   {
418 |     "key": "upgrade-energy4",
419 |     "name": "√s = 209 GeV",
420 |     "description": "Increased centre-of-mass energy.",
421 |     "effect": "Double the amount of data per click.",
422 |     "icon": "fa-bolt",
423 |     "cost": 2e5,
424 |     "targets": [{ "key": "lab", "property": "detector" }],
425 |     "requirements": [{ "key": "upgrade-energy3", "property": "used", "threshold": 1 }],
426 |     "factor": 2
427 |   },
428 |   {
429 |     "key": "upgrade-energy5",
430 |     "name": "√s = 450 GeV",
431 |     "description": "Increased centre-of-mass energy.",
432 |     "effect": "Double the amount of data per click.",
433 |     "icon": "fa-bolt",
434 |     "cost": 2e6,
435 |     "targets": [{ "key": "lab", "property": "detector" }],
436 |     "requirements": [{ "key": "upgrade-energy4", "property": "used", "threshold": 1 }],
437 |     "factor": 2
438 |   },
439 |   {
440 |     "key": "upgrade-energy6",
441 |     "name": "√s = 800 GeV",
442 |     "description": "Increased centre-of-mass energy.",
443 |     "effect": "Double the amount of data per click.",
444 |     "icon": "fa-bolt",
445 |     "cost": 2e7,
446 |     "targets": [{ "key": "lab", "property": "detector" }],
447 |     "requirements": [{ "key": "upgrade-energy5", "property": "used", "threshold": 1 }],
448 |     "factor": 2
449 |   },
450 |   {
451 |     "key": "upgrade-energy7",
452 |     "name": "√s = 1 TeV",
453 |     "description": "Increased centre-of-mass energy.",
454 |     "effect": "Double the amount of data per click.",
455 |     "icon": "fa-bolt",
456 |     "cost": 2e8,
457 |     "targets": [{ "key": "lab", "property": "detector" }],
458 |     "requirements": [{ "key": "upgrade-energy6", "property": "used", "threshold": 1 }],
459 |     "factor": 2
460 |   },
461 |   {
462 |     "key": "upgrade-energy8",
463 |     "name": "√s = 3.5 TeV",
464 |     "description": "Increased centre-of-mass energy.",
465 |     "effect": "Double the amount of data per click.",
466 |     "icon": "fa-bolt",
467 |     "cost": 2e9,
468 |     "targets": [{ "key": "lab", "property": "detector" }],
469 |     "requirements": [{ "key": "upgrade-energy7", "property": "used", "threshold": 1 }],
470 |     "factor": 2
471 |   },
472 |   {
473 |     "key": "upgrade-energy9",
474 |     "name": "√s = 6 TeV",
475 |     "description": "Increased centre-of-mass energy.",
476 |     "effect": "Double the amount of data per click.",
477 |     "icon": "fa-bolt",
478 |     "cost": 2e10,
479 |     "targets": [{ "key": "lab", "property": "detector" }],
480 |     "requirements": [{ "key": "upgrade-energy8", "property": "used", "threshold": 1 }],
481 |     "factor": 2
482 |   },
483 |   {
484 |     "key": "upgrade-energy10",
485 |     "name": "√s = 8 TeV",
486 |     "description": "Increased centre-of-mass energy.",
487 |     "effect": "Double the amount of data per click.",
488 |     "icon": "fa-bolt",
489 |     "cost": 2e11,
490 |     "targets": [{ "key": "lab", "property": "detector" }],
491 |     "requirements": [{ "key": "upgrade-energy9", "property": "used", "threshold": 1 }],
492 |     "factor": 2
493 |   },
494 |   {
495 |     "key": "upgrade-energy11",
496 |     "name": "√s = 13 TeV",
497 |     "description": "Increased centre-of-mass energy.",
498 |     "effect": "Double the amount of data per click.",
499 |     "icon": "fa-bolt",
500 |     "cost": 2e12,
501 |     "targets": [{ "key": "lab", "property": "detector" }],
502 |     "requirements": [{ "key": "upgrade-energy10", "property": "used", "threshold": 1 }],
503 |     "factor": 2
504 |   },
505 |   {
506 |     "key": "upgrade-energy12",
507 |     "name": "√s = 14 TeV",
508 |     "description": "Increased centre-of-mass energy.",
509 |     "effect": "Double the amount of data per click.",
510 |     "icon": "fa-bolt",
511 |     "cost": 2e13,
512 |     "targets": [{ "key": "lab", "property": "detector" }],
513 |     "requirements": [{ "key": "upgrade-energy11", "property": "used", "threshold": 1 }],
514 |     "factor": 2
515 |   },
516 |   {
517 |     "key": "upgrade-lumi1",
518 |     "name": "L = 1×10³⁰ cm⁻²s⁻¹",
519 |     "description": "Increased instantaneous luminosity.",
520 |     "effect": "+3 data per click.",
521 |     "icon": "fa-bullseye",
522 |     "cost": 8e2,
523 |     "targets": [{ "key": "lab", "property": "detector" }],
524 |     "requirements": [],
525 |     "constant": 3
526 |   },
527 |   {
528 |     "key": "upgrade-lumi2",
529 |     "name": "L = 2×10³⁰ cm⁻²s⁻¹",
530 |     "description": "Increased instantaneous luminosity.",
531 |     "effect": "+15 data per click.",
532 |     "icon": "fa-bullseye",
533 |     "cost": 8e3,
534 |     "targets": [{ "key": "lab", "property": "detector" }],
535 |     "requirements": [{ "key": "upgrade-energy1", "property": "used", "threshold": 1 }],
536 |     "constant": 15
537 |   },
538 |   {
539 |     "key": "upgrade-lumi3",
540 |     "name": "L = 4×10³⁰ cm⁻²s⁻¹",
541 |     "description": "Increased instantaneous luminosity.",
542 |     "effect": "+75 data per click.",
543 |     "icon": "fa-bullseye",
544 |     "cost": 8e4,
545 |     "targets": [{ "key": "lab", "property": "detector" }],
546 |     "requirements": [{ "key": "upgrade-energy2", "property": "used", "threshold": 1 }],
547 |     "constant": 75
548 |   },
549 |   {
550 |     "key": "upgrade-lumi4",
551 |     "name": "L = 6×10³⁰ cm⁻²s⁻¹",
552 |     "description": "Increased instantaneous luminosity.",
553 |     "effect": "+375 data per click.",
554 |     "icon": "fa-bullseye",
555 |     "cost": 8e5,
556 |     "targets": [{ "key": "lab", "property": "detector" }],
557 |     "requirements": [{ "key": "upgrade-energy3", "property": "used", "threshold": 1 }],
558 |     "constant": 375
559 |   },
560 |   {
561 |     "key": "upgrade-lumi5",
562 |     "name": "L = 1×10³¹ cm⁻²s⁻¹",
563 |     "description": "Increased instantaneous luminosity.",
564 |     "effect": "+1875 data per click.",
565 |     "icon": "fa-bullseye",
566 |     "cost": 8e6,
567 |     "targets": [{ "key": "lab", "property": "detector" }],
568 |     "requirements": [{ "key": "upgrade-energy4", "property": "used", "threshold": 1 }],
569 |     "constant": 1875
570 |   },
571 |   {
572 |     "key": "upgrade-lumi6",
573 |     "name": "L = 2×10³¹ cm⁻²s⁻¹",
574 |     "description": "Increased instantaneous luminosity.",
575 |     "effect": "+9.4k data per click.",
576 |     "icon": "fa-bullseye",
577 |     "cost": 8e7,
578 |     "targets": [{ "key": "lab", "property": "detector" }],
579 |     "requirements": [{ "key": "upgrade-energy5", "property": "used", "threshold": 1 }],
580 |     "constant": 9400
581 |   },
582 |   {
583 |     "key": "upgrade-lumi7",
584 |     "name": "L = 4×10³¹ cm⁻²s⁻¹",
585 |     "description": "Increased instantaneous luminosity.",
586 |     "effect": "+47k data per click.",
587 |     "icon": "fa-bullseye",
588 |     "cost": 8e8,
589 |     "targets": [{ "key": "lab", "property": "detector" }],
590 |     "requirements": [{ "key": "upgrade-energy6", "property": "used", "threshold": 1 }],
591 |     "constant": 47000
592 |   },
593 |   {
594 |     "key": "upgrade-lumi8",
595 |     "name": "L = 8×10³¹ cm⁻²s⁻¹",
596 |     "description": "Increased instantaneous luminosity.",
597 |     "effect": "+235k data per click.",
598 |     "icon": "fa-bullseye",
599 |     "cost": 8e9,
600 |     "targets": [{ "key": "lab", "property": "detector" }],
601 |     "requirements": [{ "key": "upgrade-energy7", "property": "used", "threshold": 1 }],
602 |     "constant": 235e3
603 |   },
604 |   {
605 |     "key": "upgrade-lumi9",
606 |     "name": "L = 1×10³² cm⁻²s⁻¹",
607 |     "description": "Increased instantaneous luminosity.",
608 |     "effect": "+1.2M data per click.",
609 |     "icon": "fa-bullseye",
610 |     "cost": 8e10,
611 |     "targets": [{ "key": "lab", "property": "detector" }],
612 |     "requirements": [{ "key": "upgrade-energy8", "property": "used", "threshold": 1 }],
613 |     "constant": 1.2e6
614 |   },
615 |   {
616 |     "key": "upgrade-lumi10",
617 |     "name": "L = 4×10³² cm⁻²s⁻¹",
618 |     "description": "Increased instantaneous luminosity.",
619 |     "effect": "+6M data per click.",
620 |     "icon": "fa-bullseye",
621 |     "cost": 8e11,
622 |     "targets": [{ "key": "lab", "property": "detector" }],
623 |     "requirements": [{ "key": "upgrade-energy9", "property": "used", "threshold": 1 }],
624 |     "constant": 6e6
625 |   },
626 |   {
627 |     "key": "upgrade-lumi11",
628 |     "name": "L = 6×10³³ cm⁻²s⁻¹",
629 |     "description": "Increased instantaneous luminosity.",
630 |     "effect": "+30M data per click.",
631 |     "icon": "fa-bullseye",
632 |     "cost": 8e12,
633 |     "targets": [{ "key": "lab", "property": "detector" }],
634 |     "requirements": [{ "key": "upgrade-energy10", "property": "used", "threshold": 1 }],
635 |     "constant": 3e7
636 |   },
637 |   {
638 |     "key": "upgrade-lumi12",
639 |     "name": "L = 1×10³⁴ cm⁻²s⁻¹",
640 |     "description": "Increased instantaneous luminosity.",
641 |     "effect": "+150M data per click.",
642 |     "icon": "fa-bullseye",
643 |     "cost": 8e13,
644 |     "targets": [{ "key": "lab", "property": "detector" }],
645 |     "requirements": [{ "key": "upgrade-energy11", "property": "used", "threshold": 1 }],
646 |     "constant": 1.5e8
647 |   },
648 |   {
649 |     "key": "upgrade-sps",
650 |     "name": "Super Proton Synchrotron",
651 |     "description": "A larger particle smasher.",
652 |     "effect": "Ten times the amount of data per click.",
653 |     "icon": "fa-circle-o-notch",
654 |     "cost": 5e5,
655 |     "targets": [{ "key": "lab", "property": "detector" }],
656 |     "requirements": [
657 |       { "key": "upgrade-energy3", "property": "used", "threshold": 1 },
658 |       { "key": "upgrade-lumi3", "property": "used", "threshold": 1 }
659 |     ],
660 |     "factor": 10
661 |   },
662 |   {
663 |     "key": "upgrade-tevatron",
664 |     "name": "Tevatron",
665 |     "description": "A larger particle smasher.",
666 |     "effect": "Ten times the amount of data per click.",
667 |     "icon": "fa-circle-o-notch",
668 |     "cost": 5e7,
669 |     "targets": [{ "key": "lab", "property": "detector" }],
670 |     "requirements": [
671 |       { "key": "upgrade-energy6", "property": "used", "threshold": 1 },
672 |       { "key": "upgrade-lumi6", "property": "used", "threshold": 1 }
673 |     ],
674 |     "factor": 10
675 |   },
676 |   {
677 |     "key": "upgrade-lhc",
678 |     "name": "Large Hadron Collider",
679 |     "description": "A larger particle smasher.",
680 |     "effect": "Ten times the amount of data per click.",
681 |     "icon": "fa-circle-o-notch",
682 |     "cost": 5e10,
683 |     "targets": [{ "key": "lab", "property": "detector" }],
684 |     "requirements": [
685 |       { "key": "upgrade-energy9", "property": "used", "threshold": 1 },
686 |       { "key": "upgrade-lumi9", "property": "used", "threshold": 1 }
687 |     ],
688 |     "factor": 10
689 |   },
690 |   {
691 |     "key": "upgrade-cpv1",
692 |     "name": "B factories",
693 |     "description": "",
694 |     "effect": "Future CP violation research gives double the amount of reputation.",
695 |     "icon": "fa-newspaper-o",
696 |     "cost": 7500,
697 |     "targets": [{ "key": "research-cpv", "property": "reputation" }],
698 |     "requirements": [{ "key": "research-cpv", "property": "level", "threshold": 5 }],
699 |     "factor": 2
700 |   },
701 |   {
702 |     "key": "upgrade-inspire",
703 |     "name": "Inspire HEP",
704 |     "description": "Publish your research online.",
705 |     "effect": "Double the reputation for all future research.",
706 |     "icon": "fa-newspaper-o",
707 |     "cost": 1e12,
708 |     "targets": [
709 |       { "key": "research-cpv", "property": "reputation" },
710 |       { "key": "research-jpsi", "property": "reputation" },
711 |       { "key": "research-tau", "property": "reputation" },
712 |       { "key": "research-beauty", "property": "reputation" },
713 |       { "key": "research-gluons", "property": "reputation" },
714 |       { "key": "research-weak", "property": "reputation" },
715 |       { "key": "research-top", "property": "reputation" },
716 |       { "key": "research-boscillations", "property": "reputation" },
717 |       { "key": "research-higgs", "property": "reputation" },
718 |       { "key": "research-dstars", "property": "reputation" },
719 |       { "key": "research-xib", "property": "reputation" }
720 |     ],
721 |     "requirements": [
722 |       { "key": "research-cpv", "property": "level", "threshold": 1 },
723 |       { "key": "research-jpsi", "property": "level", "threshold": 1 },
724 |       { "key": "research-tau", "property": "level", "threshold": 1 },
725 |       { "key": "research-beauty", "property": "level", "threshold": 1 },
726 |       { "key": "research-gluons", "property": "level", "threshold": 1 },
727 |       { "key": "research-weak", "property": "level", "threshold": 1 },
728 |       { "key": "research-top", "property": "level", "threshold": 1 },
729 |       { "key": "research-boscillations", "property": "level", "threshold": 1 },
730 |       { "key": "research-higgs", "property": "level", "threshold": 1 },
731 |       { "key": "research-dstars", "property": "level", "threshold": 1 },
732 |       { "key": "research-xib", "property": "level", "threshold": 1 }
733 |     ],
734 |     "factor": 2
735 |   },
736 |   {
737 |     "key": "upgrade-lhcb",
738 |     "name": "LHCb",
739 |     "description": "CP violation research on a whole new level.",
740 |     "effect": "Future research of CP violation gives +1M reputation.",
741 |     "icon": "fa-",
742 |     "cost": 4e11,
743 |     "targets": [{"key": "research-cpv", "property": "reputation"}],
744 |     "requirements": [
745 |       { "key": "research-cpv", "property": "level", "threshold": 15 },
746 |       { "key": "upgrade-lhc", "property": "used", "threshold": 1 }
747 |     ],
748 |     "constant": 1e6
749 |   }
750 | ]

# File: json/workers.json

 1 | [
 2 |   {
 3 |     "key": "workers-masterstudents",
 4 |     "name": "Master Students",
 5 |     "description": "Cheap and enthusiastic workforce, they can save you a lot of work.",
 6 |     "cost_increase": 1.5,
 7 |     "state": {
 8 |       "cost": 4e1,
 9 |       "rate": 1e0
10 |     }
11 |   },
12 |   {
13 |     "key": "workers-phdstudents",
14 |     "name": "PhD Students",
15 |     "description": "They decided to do a PhD. Now they are working hard.",
16 |     "cost_increase": 1.45,
17 |     "state": {
18 |       "cost": 6e2,
19 |       "rate": 8e0
20 |     }
21 |   },
22 |   {
23 |     "key": "workers-postdocs",
24 |     "name": "Postdocs",
25 |     "description": "These brilliant minds are here only to serve your needs.",
26 |     "cost_increase": 1.4,
27 |     "state": {
28 |       "cost": 7.5e3,
29 |       "rate": 2.5e1
30 |     }
31 |   },
32 |   {
33 |     "key": "workers-fellows",
34 |     "name": "Research Fellows",
35 |     "description": "You pay them a lot. They work a lot.",
36 |     "cost_increase": 1.35,
37 |     "state": {
38 |       "cost": 8e4,
39 |       "rate": 1e2
40 |     }
41 |   },
42 |   {
43 |     "key": "workers-permanent",
44 |     "name": "Permanent Staff",
45 |     "description": "Somebody who gets a permanent position in physics has to be good.",
46 |     "cost_increase": 1.3,
47 |     "state": {
48 |       "cost": 7e5,
49 |       "rate": 9e3
50 |     }
51 |   },
52 |   {
53 |     "key": "workers-profs",
54 |     "name": "Tenured Professors",
55 |     "description": "They bring their own group along and are able to get a lot of work done.",
56 |     "cost_increase": 1.25,
57 |     "state": {
58 |       "cost": 5e6,
59 |       "rate": 1.2e5
60 |     }
61 |   },
62 |   {
63 |     "key": "workers-nobel",
64 |     "name": "Nobel Laureates",
65 |     "description": "They received their prize for a reason.",
66 |     "cost_increase": 1.2,
67 |     "state": {
68 |       "cost": 3e7,
69 |       "rate": 1.5e6
70 |     }
71 |   },
72 |   {
73 |     "key": "workers-summies",
74 |     "name": "Summer Students",
75 |     "description": "Their best ideas come between two parties.",
76 |     "cost_increase": 1.15,
77 |     "state": {
78 |       "cost": 1.25e8,
79 |       "rate": 2e7
80 |     }
81 |   }
82 | ]

# File: LICENSE

 1 | The MIT License (MIT)
 2 | 
 3 | Copyright (c) 2014-2016 Igor Babuschkin, Kevin Dungs, Tadej Novak, Gabor Biro
 4 | 
 5 | Permission is hereby granted, free of charge, to any person obtaining a copy
 6 | of this software and associated documentation files (the "Software"), to deal
 7 | in the Software without restriction, including without limitation the rights
 8 | to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 9 | copies of the Software, and to permit persons to whom the Software is
10 | furnished to do so, subject to the following conditions:
11 | 
12 | The above copyright notice and this permission notice shall be included in all
13 | copies or substantial portions of the Software.
14 | 
15 | THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
16 | IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
17 | FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
18 | AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
19 | LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
20 | OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
21 | SOFTWARE.

# File: README.md

1 | # Particle Clicker
2 | 
3 | An addictive incremental game that teaches players the history of high energy particle physics.
4 | 
5 | Developed during the 2014 CERN Webfest over a weekend.
6 | 
7 | Visit [http://cern.ch/particle-clicker](http://cern.ch/particle-clicker) to play the game.

# File: bootstrap-config.json

  1 | {
  2 |   "vars": {
  3 |     "@gray-base": "#000",
  4 |     "@gray-darker": "lighten(@gray-base, 13.5%)",
  5 |     "@gray-dark": "lighten(@gray-base, 20%)",
  6 |     "@gray": "lighten(@gray-base, 33.5%)",
  7 |     "@gray-light": "lighten(@gray-base, 46.7%)",
  8 |     "@gray-lighter": "lighten(@gray-base, 93.5%)",
  9 |     "@brand-primary": "darken(#428bca, 6.5%)",
 10 |     "@brand-success": "#5cb85c",
 11 |     "@brand-info": "#5bc0de",
 12 |     "@brand-warning": "#f0ad4e",
 13 |     "@brand-danger": "#d9534f",
 14 |     "@body-bg": "#fff",
 15 |     "@text-color": "@gray-dark",
 16 |     "@link-color": "@brand-primary",
 17 |     "@link-hover-color": "darken(@link-color, 15%)",
 18 |     "@link-hover-decoration": "underline",
 19 |     "@font-family-sans-serif": "\"Helvetica Neue\", Helvetica, Arial, sans-serif",
 20 |     "@font-family-serif": "Georgia, \"Times New Roman\", Times, serif",
 21 |     "@font-family-monospace": "Menlo, Monaco, Consolas, \"Courier New\", monospace",
 22 |     "@font-family-base": "@font-family-sans-serif",
 23 |     "@font-size-base": "14px",
 24 |     "@font-size-large": "ceil((@font-size-base * 1.25))",
 25 |     "@font-size-small": "ceil((@font-size-base * 0.85))",
 26 |     "@font-size-h1": "floor((@font-size-base * 2.6))",
 27 |     "@font-size-h2": "floor((@font-size-base * 2.15))",
 28 |     "@font-size-h3": "ceil((@font-size-base * 1.7))",
 29 |     "@font-size-h4": "ceil((@font-size-base * 1.25))",
 30 |     "@font-size-h5": "@font-size-base",
 31 |     "@font-size-h6": "ceil((@font-size-base * 0.85))",
 32 |     "@line-height-base": "1.428571429",
 33 |     "@line-height-computed": "floor((@font-size-base * @line-height-base))",
 34 |     "@headings-font-family": "inherit",
 35 |     "@headings-font-weight": "500",
 36 |     "@headings-line-height": "1.1",
 37 |     "@headings-color": "inherit",
 38 |     "@icon-font-path": "\"../fonts/\"",
 39 |     "@icon-font-name": "\"glyphicons-halflings-regular\"",
 40 |     "@icon-font-svg-id": "\"glyphicons_halflingsregular\"",
 41 |     "@padding-base-vertical": "6px",
 42 |     "@padding-base-horizontal": "12px",
 43 |     "@padding-large-vertical": "10px",
 44 |     "@padding-large-horizontal": "16px",
 45 |     "@padding-small-vertical": "5px",
 46 |     "@padding-small-horizontal": "10px",
 47 |     "@padding-xs-vertical": "1px",
 48 |     "@padding-xs-horizontal": "5px",
 49 |     "@line-height-large": "1.33",
 50 |     "@line-height-small": "1.5",
 51 |     "@border-radius-base": "4px",
 52 |     "@border-radius-large": "6px",
 53 |     "@border-radius-small": "3px",
 54 |     "@component-active-color": "#fff",
 55 |     "@component-active-bg": "@brand-primary",
 56 |     "@caret-width-base": "4px",
 57 |     "@caret-width-large": "5px",
 58 |     "@table-cell-padding": "8px",
 59 |     "@table-condensed-cell-padding": "5px",
 60 |     "@table-bg": "transparent",
 61 |     "@table-bg-accent": "#f9f9f9",
 62 |     "@table-bg-hover": "#f5f5f5",
 63 |     "@table-bg-active": "@table-bg-hover",
 64 |     "@table-border-color": "#ddd",
 65 |     "@btn-font-weight": "normal",
 66 |     "@btn-default-color": "#333",
 67 |     "@btn-default-bg": "#fff",
 68 |     "@btn-default-border": "#ccc",
 69 |     "@btn-primary-color": "#fff",
 70 |     "@btn-primary-bg": "@brand-primary",
 71 |     "@btn-primary-border": "darken(@btn-primary-bg, 5%)",
 72 |     "@btn-success-color": "#fff",
 73 |     "@btn-success-bg": "@brand-success",
 74 |     "@btn-success-border": "darken(@btn-success-bg, 5%)",
 75 |     "@btn-info-color": "#fff",
 76 |     "@btn-info-bg": "@brand-info",
 77 |     "@btn-info-border": "darken(@btn-info-bg, 5%)",
 78 |     "@btn-warning-color": "#fff",
 79 |     "@btn-warning-bg": "@brand-warning",
 80 |     "@btn-warning-border": "darken(@btn-warning-bg, 5%)",
 81 |     "@btn-danger-color": "#fff",
 82 |     "@btn-danger-bg": "@brand-danger",
 83 |     "@btn-danger-border": "darken(@btn-danger-bg, 5%)",
 84 |     "@btn-link-disabled-color": "@gray-light",
 85 |     "@input-bg": "#fff",
 86 |     "@input-bg-disabled": "@gray-lighter",
 87 |     "@input-color": "@gray",
 88 |     "@input-border": "#ccc",
 89 |     "@input-border-radius": "@border-radius-base",
 90 |     "@input-border-radius-large": "@border-radius-large",
 91 |     "@input-border-radius-small": "@border-radius-small",
 92 |     "@input-border-focus": "#66afe9",
 93 |     "@input-color-placeholder": "#999",
 94 |     "@input-height-base": "(@line-height-computed + (@padding-base-vertical * 2) + 2)",
 95 |     "@input-height-large": "(ceil(@font-size-large * @line-height-large) + (@padding-large-vertical * 2) + 2)",
 96 |     "@input-height-small": "(floor(@font-size-small * @line-height-small) + (@padding-small-vertical * 2) + 2)",
 97 |     "@legend-color": "@gray-dark",
 98 |     "@legend-border-color": "#e5e5e5",
 99 |     "@input-group-addon-bg": "@gray-lighter",
100 |     "@input-group-addon-border-color": "@input-border",
101 |     "@cursor-disabled": "not-allowed",
102 |     "@dropdown-bg": "#fff",
103 |     "@dropdown-border": "rgba(0,0,0,.15)",
104 |     "@dropdown-fallback-border": "#ccc",
105 |     "@dropdown-divider-bg": "#e5e5e5",
106 |     "@dropdown-link-color": "@gray-dark",
107 |     "@dropdown-link-hover-color": "darken(@gray-dark, 5%)",
108 |     "@dropdown-link-hover-bg": "#f5f5f5",
109 |     "@dropdown-link-active-color": "@component-active-color",
110 |     "@dropdown-link-active-bg": "@component-active-bg",
111 |     "@dropdown-link-disabled-color": "@gray-light",
112 |     "@dropdown-header-color": "@gray-light",
113 |     "@dropdown-caret-color": "#000",
114 |     "@screen-xs": "480px",
115 |     "@screen-xs-min": "@screen-xs",
116 |     "@screen-phone": "@screen-xs-min",
117 |     "@screen-sm": "768px",
118 |     "@screen-sm-min": "@screen-sm",
119 |     "@screen-tablet": "@screen-sm-min",
120 |     "@screen-md": "992px",
121 |     "@screen-md-min": "@screen-md",
122 |     "@screen-desktop": "@screen-md-min",
123 |     "@screen-lg": "1200px",
124 |     "@screen-lg-min": "@screen-lg",
125 |     "@screen-lg-desktop": "@screen-lg-min",
126 |     "@screen-xs-max": "(@screen-sm-min - 1)",
127 |     "@screen-sm-max": "(@screen-md-min - 1)",
128 |     "@screen-md-max": "(@screen-lg-min - 1)",
129 |     "@grid-columns": "12",
130 |     "@grid-gutter-width": "30px",
131 |     "@grid-float-breakpoint": "@screen-sm-min",
132 |     "@grid-float-breakpoint-max": "(@grid-float-breakpoint - 1)",
133 |     "@container-tablet": "(720px + @grid-gutter-width)",
134 |     "@container-sm": "@container-tablet",
135 |     "@container-desktop": "(940px + @grid-gutter-width)",
136 |     "@container-md": "@container-desktop",
137 |     "@container-large-desktop": "(1140px + @grid-gutter-width)",
138 |     "@container-lg": "@container-large-desktop",
139 |     "@navbar-height": "40px",
140 |     "@navbar-margin-bottom": "@line-height-computed",
141 |     "@navbar-border-radius": "@border-radius-base",
142 |     "@navbar-padding-horizontal": "floor((@grid-gutter-width / 2))",
143 |     "@navbar-padding-vertical": "((@navbar-height - @line-height-computed) / 2)",
144 |     "@navbar-collapse-max-height": "340px",
145 |     "@navbar-default-color": "#777",
146 |     "@navbar-default-bg": "#f8f8f8",
147 |     "@navbar-default-border": "darken(@navbar-default-bg, 6.5%)",
148 |     "@navbar-default-link-color": "#777",
149 |     "@navbar-default-link-hover-color": "#333",
150 |     "@navbar-default-link-hover-bg": "transparent",
151 |     "@navbar-default-link-active-color": "#555",
152 |     "@navbar-default-link-active-bg": "darken(@navbar-default-bg, 6.5%)",
153 |     "@navbar-default-link-disabled-color": "#ccc",
154 |     "@navbar-default-link-disabled-bg": "transparent",
155 |     "@navbar-default-brand-color": "@navbar-default-link-color",
156 |     "@navbar-default-brand-hover-color": "darken(@navbar-default-brand-color, 10%)",
157 |     "@navbar-default-brand-hover-bg": "transparent",
158 |     "@navbar-default-toggle-hover-bg": "#ddd",
159 |     "@navbar-default-toggle-icon-bar-bg": "#888",
160 |     "@navbar-default-toggle-border-color": "#ddd",
161 |     "@navbar-inverse-color": "lighten(@gray-light, 15%)",
162 |     "@navbar-inverse-bg": "#222",
163 |     "@navbar-inverse-border": "darken(@navbar-inverse-bg, 10%)",
164 |     "@navbar-inverse-link-color": "lighten(@gray-light, 15%)",
165 |     "@navbar-inverse-link-hover-color": "#fff",
166 |     "@navbar-inverse-link-hover-bg": "transparent",
167 |     "@navbar-inverse-link-active-color": "@navbar-inverse-link-hover-color",
168 |     "@navbar-inverse-link-active-bg": "darken(@navbar-inverse-bg, 10%)",
169 |     "@navbar-inverse-link-disabled-color": "#444",
170 |     "@navbar-inverse-link-disabled-bg": "transparent",
171 |     "@navbar-inverse-brand-color": "@navbar-inverse-link-color",
172 |     "@navbar-inverse-brand-hover-color": "#fff",
173 |     "@navbar-inverse-brand-hover-bg": "transparent",
174 |     "@navbar-inverse-toggle-hover-bg": "#333",
175 |     "@navbar-inverse-toggle-icon-bar-bg": "#fff",
176 |     "@navbar-inverse-toggle-border-color": "#333",
177 |     "@nav-link-padding": "10px 15px",
178 |     "@nav-link-hover-bg": "@gray-lighter",
179 |     "@nav-disabled-link-color": "@gray-light",
180 |     "@nav-disabled-link-hover-color": "@gray-light",
181 |     "@nav-tabs-border-color": "#ddd",
182 |     "@nav-tabs-link-hover-border-color": "@gray-lighter",
183 |     "@nav-tabs-active-link-hover-bg": "@body-bg",
184 |     "@nav-tabs-active-link-hover-color": "@gray",
185 |     "@nav-tabs-active-link-hover-border-color": "#ddd",
186 |     "@nav-tabs-justified-link-border-color": "#ddd",
187 |     "@nav-tabs-justified-active-link-border-color": "@body-bg",
188 |     "@nav-pills-border-radius": "@border-radius-base",
189 |     "@nav-pills-active-link-hover-bg": "@component-active-bg",
190 |     "@nav-pills-active-link-hover-color": "@component-active-color",
191 |     "@pagination-color": "@link-color",
192 |     "@pagination-bg": "#fff",
193 |     "@pagination-border": "#ddd",
194 |     "@pagination-hover-color": "@link-hover-color",
195 |     "@pagination-hover-bg": "@gray-lighter",
196 |     "@pagination-hover-border": "#ddd",
197 |     "@pagination-active-color": "#fff",
198 |     "@pagination-active-bg": "@brand-primary",
199 |     "@pagination-active-border": "@brand-primary",
200 |     "@pagination-disabled-color": "@gray-light",
201 |     "@pagination-disabled-bg": "#fff",
202 |     "@pagination-disabled-border": "#ddd",
203 |     "@pager-bg": "@pagination-bg",
204 |     "@pager-border": "@pagination-border",
205 |     "@pager-border-radius": "15px",
206 |     "@pager-hover-bg": "@pagination-hover-bg",
207 |     "@pager-active-bg": "@pagination-active-bg",
208 |     "@pager-active-color": "@pagination-active-color",
209 |     "@pager-disabled-color": "@pagination-disabled-color",
210 |     "@jumbotron-padding": "30px",
211 |     "@jumbotron-color": "inherit",
212 |     "@jumbotron-bg": "@gray-lighter",
213 |     "@jumbotron-heading-color": "inherit",
214 |     "@jumbotron-font-size": "ceil((@font-size-base * 1.5))",
215 |     "@state-success-text": "#3c763d",
216 |     "@state-success-bg": "#dff0d8",
217 |     "@state-success-border": "darken(spin(@state-success-bg, -10), 5%)",
218 |     "@state-info-text": "#31708f",
219 |     "@state-info-bg": "#d9edf7",
220 |     "@state-info-border": "darken(spin(@state-info-bg, -10), 7%)",
221 |     "@state-warning-text": "#8a6d3b",
222 |     "@state-warning-bg": "#fcf8e3",
223 |     "@state-warning-border": "darken(spin(@state-warning-bg, -10), 5%)",
224 |     "@state-danger-text": "#a94442",
225 |     "@state-danger-bg": "#f2dede",
226 |     "@state-danger-border": "darken(spin(@state-danger-bg, -10), 5%)",
227 |     "@tooltip-max-width": "200px",
228 |     "@tooltip-color": "#fff",
229 |     "@tooltip-bg": "#000",
230 |     "@tooltip-opacity": ".9",
231 |     "@tooltip-arrow-width": "5px",
232 |     "@tooltip-arrow-color": "@tooltip-bg",
233 |     "@popover-bg": "#fff",
234 |     "@popover-max-width": "276px",
235 |     "@popover-border-color": "rgba(0,0,0,.2)",
236 |     "@popover-fallback-border-color": "#ccc",
237 |     "@popover-title-bg": "darken(@popover-bg, 3%)",
238 |     "@popover-arrow-width": "10px",
239 |     "@popover-arrow-color": "@popover-bg",
240 |     "@popover-arrow-outer-width": "(@popover-arrow-width + 1)",
241 |     "@popover-arrow-outer-color": "fadein(@popover-border-color, 5%)",
242 |     "@popover-arrow-outer-fallback-color": "darken(@popover-fallback-border-color, 20%)",
243 |     "@label-default-bg": "@gray-light",
244 |     "@label-primary-bg": "@brand-primary",
245 |     "@label-success-bg": "@brand-success",
246 |     "@label-info-bg": "@brand-info",
247 |     "@label-warning-bg": "@brand-warning",
248 |     "@label-danger-bg": "@brand-danger",
249 |     "@label-color": "#fff",
250 |     "@label-link-hover-color": "#fff",
251 |     "@modal-inner-padding": "15px",
252 |     "@modal-title-padding": "15px",
253 |     "@modal-title-line-height": "@line-height-base",
254 |     "@modal-content-bg": "#fff",
255 |     "@modal-content-border-color": "rgba(0,0,0,.2)",
256 |     "@modal-content-fallback-border-color": "#999",
257 |     "@modal-backdrop-bg": "#000",
258 |     "@modal-backdrop-opacity": ".5",
259 |     "@modal-header-border-color": "#e5e5e5",
260 |     "@modal-footer-border-color": "@modal-header-border-color",
261 |     "@modal-lg": "900px",
262 |     "@modal-md": "600px",
263 |     "@modal-sm": "300px",
264 |     "@alert-padding": "15px",
265 |     "@alert-border-radius": "@border-radius-base",
266 |     "@alert-link-font-weight": "bold",
267 |     "@alert-success-bg": "@state-success-bg",
268 |     "@alert-success-text": "@state-success-text",
269 |     "@alert-success-border": "@state-success-border",
270 |     "@alert-info-bg": "@state-info-bg",
271 |     "@alert-info-text": "@state-info-text",
272 |     "@alert-info-border": "@state-info-border",
273 |     "@alert-warning-bg": "@state-warning-bg",
274 |     "@alert-warning-text": "@state-warning-text",
275 |     "@alert-warning-border": "@state-warning-border",
276 |     "@alert-danger-bg": "@state-danger-bg",
277 |     "@alert-danger-text": "@state-danger-text",
278 |     "@alert-danger-border": "@state-danger-border",
279 |     "@progress-bg": "#f5f5f5",
280 |     "@progress-bar-color": "#fff",
281 |     "@progress-border-radius": "@border-radius-base",
282 |     "@progress-bar-bg": "@brand-primary",
283 |     "@progress-bar-success-bg": "@brand-success",
284 |     "@progress-bar-warning-bg": "@brand-warning",
285 |     "@progress-bar-danger-bg": "@brand-danger",
286 |     "@progress-bar-info-bg": "@brand-info",
287 |     "@list-group-bg": "#fff",
288 |     "@list-group-border": "#ddd",
289 |     "@list-group-border-radius": "@border-radius-base",
290 |     "@list-group-hover-bg": "#f5f5f5",
291 |     "@list-group-active-color": "@component-active-color",
292 |     "@list-group-active-bg": "@component-active-bg",
293 |     "@list-group-active-border": "@list-group-active-bg",
294 |     "@list-group-active-text-color": "lighten(@list-group-active-bg, 40%)",
295 |     "@list-group-disabled-color": "@gray-light",
296 |     "@list-group-disabled-bg": "@gray-lighter",
297 |     "@list-group-disabled-text-color": "@list-group-disabled-color",
298 |     "@list-group-link-color": "#555",
299 |     "@list-group-link-hover-color": "@list-group-link-color",
300 |     "@list-group-link-heading-color": "#333",
301 |     "@panel-bg": "#fff",
302 |     "@panel-body-padding": "15px",
303 |     "@panel-heading-padding": "10px 15px",
304 |     "@panel-footer-padding": "@panel-heading-padding",
305 |     "@panel-border-radius": "@border-radius-base",
306 |     "@panel-inner-border": "#ddd",
307 |     "@panel-footer-bg": "#f5f5f5",
308 |     "@panel-default-text": "@gray-dark",
309 |     "@panel-default-border": "#ddd",
310 |     "@panel-default-heading-bg": "#f5f5f5",
311 |     "@panel-primary-text": "#fff",
312 |     "@panel-primary-border": "@brand-primary",
313 |     "@panel-primary-heading-bg": "@brand-primary",
314 |     "@panel-success-text": "@state-success-text",
315 |     "@panel-success-border": "@state-success-border",
316 |     "@panel-success-heading-bg": "@state-success-bg",
317 |     "@panel-info-text": "@state-info-text",
318 |     "@panel-info-border": "@state-info-border",
319 |     "@panel-info-heading-bg": "@state-info-bg",
320 |     "@panel-warning-text": "@state-warning-text",
321 |     "@panel-warning-border": "@state-warning-border",
322 |     "@panel-warning-heading-bg": "@state-warning-bg",
323 |     "@panel-danger-text": "@state-danger-text",
324 |     "@panel-danger-border": "@state-danger-border",
325 |     "@panel-danger-heading-bg": "@state-danger-bg",
326 |     "@thumbnail-padding": "4px",
327 |     "@thumbnail-bg": "@body-bg",
328 |     "@thumbnail-border": "#ddd",
329 |     "@thumbnail-border-radius": "@border-radius-base",
330 |     "@thumbnail-caption-color": "@text-color",
331 |     "@thumbnail-caption-padding": "9px",
332 |     "@well-bg": "#f5f5f5",
333 |     "@well-border": "darken(@well-bg, 7%)",
334 |     "@badge-color": "#fff",
335 |     "@badge-link-hover-color": "#fff",
336 |     "@badge-bg": "@gray-light",
337 |     "@badge-active-color": "@link-color",
338 |     "@badge-active-bg": "#fff",
339 |     "@badge-font-weight": "bold",
340 |     "@badge-line-height": "1",
341 |     "@badge-border-radius": "10px",
342 |     "@breadcrumb-padding-vertical": "8px",
343 |     "@breadcrumb-padding-horizontal": "15px",
344 |     "@breadcrumb-bg": "#f5f5f5",
345 |     "@breadcrumb-color": "#ccc",
346 |     "@breadcrumb-active-color": "@gray-light",
347 |     "@breadcrumb-separator": "\"/\"",
348 |     "@carousel-text-shadow": "0 1px 2px rgba(0,0,0,.6)",
349 |     "@carousel-control-color": "#fff",
350 |     "@carousel-control-width": "15%",
351 |     "@carousel-control-opacity": ".5",
352 |     "@carousel-control-font-size": "20px",
353 |     "@carousel-indicator-active-bg": "#fff",
354 |     "@carousel-indicator-border-color": "#fff",
355 |     "@carousel-caption-color": "#fff",
356 |     "@close-font-weight": "bold",
357 |     "@close-color": "#000",
358 |     "@close-text-shadow": "0 1px 0 #fff",
359 |     "@code-color": "#c7254e",
360 |     "@code-bg": "#f9f2f4",
361 |     "@kbd-color": "#fff",
362 |     "@kbd-bg": "#333",
363 |     "@pre-bg": "#f5f5f5",
364 |     "@pre-color": "@gray-dark",
365 |     "@pre-border-color": "#ccc",
366 |     "@pre-scrollable-max-height": "340px",
367 |     "@component-offset-horizontal": "180px",
368 |     "@text-muted": "@gray-light",
369 |     "@abbr-border-color": "@gray-light",
370 |     "@headings-small-color": "@gray-light",
371 |     "@blockquote-small-color": "@gray-light",
372 |     "@blockquote-font-size": "(@font-size-base * 1.25)",
373 |     "@blockquote-border-color": "@gray-lighter",
374 |     "@page-header-border-color": "@gray-lighter",
375 |     "@dl-horizontal-offset": "@component-offset-horizontal",
376 |     "@hr-border": "@gray-lighter"
377 |   },
378 |   "css": [
379 |     "print.less",
380 |     "type.less",
381 |     "code.less",
382 |     "grid.less",
383 |     "tables.less",
384 |     "forms.less",
385 |     "buttons.less",
386 |     "responsive-utilities.less",
387 |     "glyphicons.less",
388 |     "button-groups.less",
389 |     "input-groups.less",
390 |     "navs.less",
391 |     "navbar.less",
392 |     "breadcrumbs.less",
393 |     "pagination.less",
394 |     "pager.less",
395 |     "labels.less",
396 |     "badges.less",
397 |     "jumbotron.less",
398 |     "thumbnails.less",
399 |     "alerts.less",
400 |     "progress-bars.less",
401 |     "media.less",
402 |     "list-group.less",
403 |     "panels.less",
404 |     "responsive-embed.less",
405 |     "wells.less",
406 |     "close.less",
407 |     "component-animations.less",
408 |     "dropdowns.less",
409 |     "tooltip.less",
410 |     "popovers.less",
411 |     "modals.less",
412 |     "carousel.less"
413 |   ],
414 |   "js": [
415 |     "alert.js",
416 |     "button.js",
417 |     "carousel.js",
418 |     "dropdown.js",
419 |     "modal.js",
420 |     "tooltip.js",
421 |     "popover.js",
422 |     "tab.js",
423 |     "affix.js",
424 |     "collapse.js",
425 |     "scrollspy.js",
426 |     "transition.js"
427 |   ],
428 |   "customizerUrl": "http://getbootstrap.com/customize/?id=2d6eb27d6ee57636c362"
429 | }

# File: index.html

  1 | <!DOCTYPE html>
  2 | <html lang="en" ng-app="particleClicker">
  3 |   <head>
  4 |     <title>Particle Clicker</title>
  5 |     <meta charset="utf-8">
  6 |     <meta name="viewport" content="width=device-width, initial-scale=1.0">
  7 | 
  8 |     <meta property="og:title" content="Particle Clicker">
  9 |     <meta property="og:type" content="game">
 10 |     <meta property="og:description" content="An addictive incremental game that was made during the CERN Webfest 2014. It takes the player on a historic journey through modern particle physics.">
 11 |     <meta property="og:image" content="https://avatars2.githubusercontent.com/u/8345868">
 12 | 
 13 |     <link rel="stylesheet" href="css/bootstrap.min.css">
 14 |     <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
 15 |     <link rel="stylesheet" href="css/style.css">
 16 |     
 17 |     <link rel="icon" type="image/png" href="assets/favicon.png" />
 18 |     <link rel="apple-touch-icon" href="assets/mobile/icon.png">
 19 |     <link rel="apple-touch-icon" sizes="72x72" href="assets/mobile/icon.png">
 20 |     <meta name="apple-mobile-web-app-capable" content="yes">
 21 | 
 22 |     <!-- Google Analytics -->
 23 |     <script>
 24 |     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 25 |     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 26 |     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 27 |     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 28 |     </script>
 29 |     <!-- End Google Analytics -->
 30 |   </head>
 31 |   <body>  
 32 |     <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
 33 |       <div class="container-fluid">
 34 |         <div class="navbar-header">
 35 |           <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
 36 |             <span class="sr-only">Toggle navigation</span>
 37 |             <span class="icon-bar"></span>
 38 |             <span class="icon-bar"></span>
 39 |             <span class="icon-bar"></span>
 40 |           </button>
 41 |           <a class="navbar-brand pc-icon" href="#" data-toggle="modal" data-target="#myModal"> Particle Clicker</a>
 42 |         </div>
 43 |         <div class="collapse navbar-collapse" id="navbar-collapse">
 44 |           <ul class="nav navbar-nav navbar-left">
 45 |             <li><a href="#" data-toggle="modal" data-target="#achievements-modal"><i class="fa fa-trophy"></i> Achievements</a></li>
 46 |             <li><a href="#" data-toggle="modal" data-target="#stats-modal"><i class="fa fa-bar-chart"></i> Statistics</a></li>
 47 |             <li class="dropdown" ng-controller="SaveController">
 48 |             <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-floppy-o"></i> Saved: <span ng-cloak>{{ lastSaved | date : 'H:mm' }}</span> <span class="caret"></span></a>
 49 |               <ul class="dropdown-menu" role="menu">
 50 |                 <li><a href="#" ng-click="saveNow()"><i class="fa fa-save"></i> Save now</a></li>
 51 |                 <li class="divider"></li>
 52 |                 <li><a href="#" ng-click="restart()"><i class="fa fa-refresh"></i> Restart</a></li>
 53 |               </ul>
 54 |             </li>
 55 |             <!--<li><a href="#" data-toggle="modal" data-target="#myModal"><i class="fa fa-users"></i> About</a></li>-->
 56 |           </ul>
 57 |           <ul class="nav navbar-nav navbar-right">
 58 |             <li><a href="https://github.com/particle-clicker/particle-clicker/" target="_blank"><i class="fa fa-github"></i> GitHub</a></li>
 59 |             <li class="dropdown">
 60 |               <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-share-alt"></i> Social<span class="caret"></span></a>
 61 |               <ul class="dropdown-menu" role="menu">
 62 |                 <li><a href="https://facebook.com/particleclicker"><i class="fa fa-facebook-square"></i> Facebook</a></li>
 63 |                 <li><a href="https://twitter.com/particleclicker"><i class="fa fa-twitter"></i> Twitter</a></li>
 64 |                 <li><a href="https://plus.google.com/share?url=http%3A%2F%2Fcern.ch%2Fparticle-clicker" target="_blank" title="Share on Google+"><i class="fa fa-google-plus-square"></i> Google+</a></li>
 65 |               </ul>
 66 |             </li>
 67 |           </ul>
 68 |         </div>
 69 |       </div>
 70 |     </nav>
 71 | 
 72 |     <div id="main-content" class="container-fluid col-no-padding">
 73 |       <div class="col-md-3 col-md-3s col-lg-2 col-no-padding visible-md-block visible-lg-block">
 74 |         <div class="panel panel-default">
 75 |           <div class="panel-heading">
 76 |             <h4 class="panel-title">
 77 |               <i class="fa fa-cogs"></i> Research
 78 |             </h4>
 79 |           </div>
 80 |           <div class="panel-body scrollable large" id="researchLarge" ng-controller="ResearchController as rc">
 81 |             <div id="researchContent" ng-controller="ResearchController as rc">
 82 |               <ul class="media-list" ng-cloak>
 83 |                 <li class="media" ng-repeat="r in rc.research" ng-show="rc.isVisible(r)">
 84 |                   <img ng-show="r.state.level > 0" class="research-icon media-object" ng-src="{{ r.image }}" alt="">
 85 |                   <img ng-hide="r.state.level > 0" class="research-icon media-object" src="assets/icons/png/unknown.png" alt="">
 86 |                   <div class="media-body">
 87 |                     <h4 class="media-heading">{{ r.state.level > 0 ? r.name : '?????' }} <span ng-show="r.state.level > 0" class="badge">Level {{ r.state.level }}</span></h4>
 88 |                     <p ng-show="r.state.level > 0">{{ r.description }}</p>
 89 |                     <p ng-show="r.state.level > 0" class="small">Research yields <strong>{{ r.state.reputation | niceNumber }}</strong> reputation.</p>
 90 |                     <div class="btn-group">
 91 |                       <button class="btn btn-primary" ng-disabled="!rc.isAvailable(r)" ng-click="rc.doResearch(r)"><i class="fa fa-cogs"></i> <small>{{ r.state.cost | niceNumber }} data</small></button>
 92 |                     <button class="btn btn-info {{ r.state.interesting ? 'blink' : '' }}" ng-show="r.state.level > 0" ng-click="rc.showInfo(r)"><i class="fa {{ r.state.interesting ? 'fa-exclamation' : 'fa-info' }}"></i></button>
 93 |                   </div>
 94 |                   </div>
 95 |                 </li>
 96 |               </ul>
 97 |             </div>
 98 |           </div>
 99 |         </div>
100 |       </div>
101 | 
102 |       <div id="column-lab" class="col-xs-6 col-md-5 col-md-5s col-lg-6 col-no-padding-xs" ng-controller="LabController as lc">
103 |         <input class="hidden-xs" id="labname" value="{{ lc.lab.state.name }}" ng-model="lc.lab.state.name" ng-cloak>
104 |         <hr class="hidden-xs">
105 |         <div id="detector-holder">
106 |           <div id="detector" ng-controller="DetectorController as dc">
107 |             <canvas id="detector-core" width="400" height="400">
108 |               Your detector. Click on it to generate events.
109 |             </canvas>
110 |             <canvas ng-click="dc.click()" id="detector-events" width="400" height="400" class="prevent-select">
111 |               Your detector. Click on it to generate events.
112 |             </canvas>
113 |           </div>
114 |         </div>
115 |         <button id="detector-info" class="btn btn-info" ng-click="lc.showDetectorInfo()"><i class="fa fa-info"></i></button>
116 |         <div class="row status" ng-cloak>
117 |           <div class="col-xs-4 text-center col-no-padding-xs">
118 |             <strong>Data</strong><br>
119 |             {{ lc.lab.state.data | niceNumber }}
120 |             <div class="update-value" id="update-data"></div>
121 |           </div>
122 |           <div class="col-xs-4 text-center col-no-padding-xs">
123 |             <strong>Reputation</strong><br>
124 |             {{ lc.lab.state.reputation | niceNumber }}
125 |             <div class="update-value" id="update-reputation"></div>
126 |           </div>
127 |           <div class="col-xs-4 text-center col-no-padding-xs">
128 |             <strong>Funding</strong><br>
129 |             {{ lc.lab.state.money | currency }}
130 |             <div class="update-value" id="update-funding"></div>
131 |           </div>
132 |         </div>
133 |       </div>
134 | 
135 |       <div class="col-md-3 col-md-3s col-lg-2 col-no-padding visible-md-block visible-lg-block">
136 |         <div class="panel panel-default panel-stick">
137 |           <div class="panel-heading">
138 |             <h4 class="panel-title">
139 |               <i class="fa fa-users"></i> HR
140 |             </h4>
141 |           </div>
142 |           <div class="panel-body scrollable large" id="hrLarge">
143 |             <div id="hrContent" ng-controller="HRController as hrc">
144 |               <ul class="media-list" ng-cloak>
145 |                 <li class="media" ng-repeat="w in hrc.workers" ng-show="hrc.isVisible(w)">
146 |                   <div class="media-body">
147 |                     <h4 class="media-heading">{{ w.name }} <span ng-show="w.state.hired > 0" class="badge">{{ w.state.hired | niceNumber }}</span></h4>
148 |                     <p ng-show="w.state.hired > 0">{{ w.description }}</p>
149 |                     <p ng-show="w.state.hired > 0" class="small">Produce <strong>{{ w.state.rate | niceNumber }}</strong> data per second.</p>
150 |                     <button class="btn btn-primary" ng-disabled="!hrc.isAvailable(w)" ng-click="hrc.hire(w)"><i class="fa fa-user"></i> <small>{{ w.state.cost | currency }}</small></button>
151 |                   </div>
152 |                 </li>
153 |               </ul>
154 |             </div>
155 |           </div>
156 |         </div>
157 |       </div>
158 | 
159 |       <div class="col-md-3 col-md-3s col-lg-2 col-no-padding visible-md-block visible-lg-block">
160 |         <div class="panel panel-default hidden-xs hidden-sm">
161 |           <div class="panel-heading">
162 |             <h4 class="panel-title">
163 |               <i class="fa fa-wrench"></i> Upgrades
164 |             </h4>
165 |           </div>
166 |           <div class="panel-body scrollable large" id="upgradesLarge">
167 |             <div id="upgradesContent" ng-controller="UpgradesController as uc">
168 |               <ul class="media-list media-list-no-margin" ng-cloak>
169 |                 <li class="media" ng-show="false"></li>
170 |                 <li class="media" ng-repeat="u in uc.upgrades" ng-show="uc.isVisible(u)">
171 |                   <div class="media-body">
172 |                     <h4 class="media-heading"><i class="fa {{ u.icon }} media-object"></i> {{ u.name }}</h4>
173 |                     <p>{{ u.description }}</p>
174 |                     <p class="small">{{ u.effect }}</p>
175 |                     <button class="btn btn-primary" ng-disabled="!uc.isAvailable(u)" ng-click="uc.upgrade(u)"><i class="fa fa-money"></i> <small>{{ u.cost | currency }}</small></button>
176 |                   </div>
177 |                 </li>
178 |               </ul>
179 |             </div>
180 |           </div>
181 |         </div>
182 |       </div>
183 | 
184 |       <div id="column-tabs" class="col-xs-6 visible-xs-block visible-sm-block col-no-padding">
185 |         <ul id="TabList" class="nav nav-tabs" role="tablist">
186 |           <li class="active"><a href="#research" role="tab" data-toggle="tab"><i class="fa fa-cogs"></i> Research</a></li>
187 |           <li><a href="#hr" role="tab" data-toggle="tab"><i class="fa fa-users"></i> HR</a></li>
188 |           <li><a href="#upgrades" role="tab" data-toggle="tab"><i class="fa fa-wrench"></i> Upgrades</a></li>
189 |         </ul>
190 |         <div id="TabContent" class="tab-content">
191 |           <div class="tab-pane active scrollable" id="research">
192 | 
193 |           </div>
194 |           <div class="tab-pane scrollable" id="hr">
195 | 
196 |           </div>
197 |           <div class="tab-pane scrollable" id="upgrades">
198 | 
199 |           </div>
200 |         </div>
201 |       </div>
202 |     </div>
203 | 
204 |     <div class="modal fade" id="infoBox" tabindex="-1" role="dialog" aria-labelledby="infoBoxLabel" aria-hidden="true">
205 |       <div class="modal-dialog">
206 |         <div class="modal-content">
207 |           <div class="modal-header">
208 |             <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
209 |             <h4 class="modal-title" id="infoBoxLabel"></h4>
210 |           </div>
211 |           <div class="modal-body"></div>
212 |         </div>
213 |       </div>
214 |     </div>
215 | 
216 |     <div class="modal fade" id="achievements-modal" tabindex="-1" role="dialog" aria-labelledby="achievements-label" aria-hidden="true" ng-controller="AchievementsController">
217 |       <div class="modal-dialog">
218 |         <div class="modal-content">
219 |           <div class="modal-header">
220 |             <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
221 |             <h4 class="modal-title" id="achievements-label"><i class="fa fa-trophy"></i> Achievements</h4>
222 |           </div>
223 |           <div class="modal-body">
224 |             <p class="text-center"><strong>Progress</strong> <span class="label label-info">{{ progress() }} / {{ achievements.length }}</span></p>
225 |             <ul class="list-group">
226 |               <li class="list-group-item" ng-repeat="a in achievements | orderBy:'state.timeAchieved' | reverse" ng-show="a.isAchieved()">
227 |                 <i class="fa {{ a.icon }}"></i>
228 |                 {{ a.description }}
229 |                 <span class="badge">{{ a.state.timeAchieved | niceTime }}</span>
230 |               </li>
231 |             </ul>
232 |           </div>
233 |         </div>
234 |       </div>
235 |     </div>
236 | 
237 |     <div class="modal fade" id="stats-modal" tabindex="-1" role="dialog" aria-labelledby="stats-label" aria-hidden="true" ng-controller="StatsController">
238 |       <div class="modal-dialog">
239 |         <div class="modal-content">
240 |           <div class="modal-header">
241 |             <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
242 |             <h4 class="modal-title" id="stats-label"><i class="fa fa-bar-chart"></i> Statistics</h4>
243 |           </div>
244 |           <div class="modal-body">
245 |             <ul class="list-group">
246 |               <li class="list-group-item"><i class="fa fa-location-arrow"></i> : <strong>{{ lab.state.clicks | niceNumber }}</strong></li>
247 |               <li class="list-group-item"><i class="fa fa-database"></i> : <strong>{{ lab.state.dataSpent | niceNumber }}</strong> used / <strong>{{ lab.state.dataCollected | niceNumber }}</strong> collected</li>
248 |               <li class="list-group-item"><i class="fa fa-money"></i> : <strong>{{ lab.state.moneySpent | niceNumber }}</strong> spent / <strong>{{ lab.state.moneyCollected | niceNumber }}</strong> gathered</li>
249 |             </ul>
250 |           </div>
251 |         </div>
252 |       </div>
253 |     </div>
254 | 
255 |     <div id="achievements-container" class="col-xs-6 col-sm-3"></div>
256 |     <div id="messages-container" class="col-xs-6 col-sm-3"></div>
257 | 
258 |     <div id="mobile-orientation-container">
259 |       <div id="mobile-orientation-message">
260 |         You can only play Particle Clicker on your mobile device in landscape orientation.
261 |       </div>
262 |     </div>
263 | 
264 |     <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
265 |       <div class="modal-dialog">
266 |         <div class="modal-content">
267 |           <div class="modal-header">
268 |             <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
269 |             <h4 class="modal-title" id="myModalLabel">Particle Clicker</h4>
270 |           </div>
271 |           <div class="modal-body">
272 |             <h4>About</h4>
273 |             <p class="small">Version: 0.9</p>
274 |             <p class="small bg-warning">This is a pre-release. If you encounter any bugs please report them using <a href="https://github.com/particle-clicker/particle-clicker/issues"><i class="fa fa-github"></i> GitHub issues</a>. This game runs best in landscape mode. Performance of the event display may rely heavily on your hardware.</p>
275 |             <p>Particle Clicker is a game that was made during the <a href="https://webfest.web.cern.ch">CERN Webfest 2014</a>. The idea is borrowed from <a href="http://orteil.dashnet.org/cookieclicker/">Cookie Clicker</a>, an amazing and addictive cookie-themed game.</p>
276 |             <h5>Libraries</h5>
277 |             <p>This game is realised using a few libraries. Those are</p>
278 |             <ul>
279 |               <li><a href="http://angularjs.org">AngularJS</a></li>
280 |               <li><a href="http://getbootstrap.com/">Bootstrap</a></li>
281 |               <li><a href="http://fortawesome.github.io/">Fontawesome</a></li>
282 |               <li><a href="http://jquery.com">jQuery</a></li>
283 |               <li><a href="http://imulus.github.io/retinajs/">retina.js</a></li>
284 |               <li><a href="https://github.com/ftlabs/fastclick">fastclick.js</a></li>
285 |             </ul>
286 |             <h5>Authors</h5>
287 |             <ul>
288 |               <li><a href="https://github.com/gbiro">Gabor Biro</a></li>
289 |               <li><a href="https://github.com/ibab">Igor Babuschkin</a></li>
290 |               <li><a href="https://github.com/kdungs">Kevin Dungs</a></li>
291 |               <li><a href="https://github.com/ntadej">Tadej Novak</a></li>
292 |               <li><a href="https://github.com/zhangjiannan">Jiannan Zhang</a></li>
293 |             </ul>
294 |             <p>Feel free to get in touch with us via GitHub or by shooting us an email on<br><a href="mailto:particle-clicker@googlegroups.com">particle-clicker@googlegroups.com</a>.</p>
295 |             <h5>Source</h5>
296 |             <p>The source code of this game is freely available on <a href="https://github.com/particle-clicker/particle-clicker"><i class="fa fa-github"></i> GitHub</a> under the terms of an MIT license.</p>
297 |           </div>
298 |         </div>
299 |       </div>
300 |     </div>
301 | 
302 |     <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
303 |     <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js"></script>
304 |     <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
305 |     <script src="js/external/jquery.cookie-1.4.1.min.js"></script>
306 |     <script src="js/external/retina.js"></script>
307 |     <script src="js/external/fastclick.js"></script>
308 | 
309 |     <script src="js/storage.js"></script>
310 |     <script src="js/helpers.js"></script>
311 |     <script src="js/analytics.js"></script>
312 |     <script src="js/gameobjects.js"></script>
313 |     <script src="js/event.js"></script>
314 |     <script src="js/detector.js"></script>
315 |     <script src="js/ui.js"></script>
316 |     <script src="js/game.js"></script>
317 |     <script src="js/app.js"></script>
318 |   </body>
319 | </html>